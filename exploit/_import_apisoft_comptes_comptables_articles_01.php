<?php
include("_graal_header_txt.inc.php");
include("_import_class_data_km.php");
/* Valable pour descriptifs APISoft Version ??????????? */
define('EOL', "\r\n");
set_time_limit(600);
$vl_c_base_origine=fa_recup_param('vl_c_base_origine','apisoft_bar_gc');
$vl_c_base_destination=fa_recup_param('vl_c_base_destination','graal_bar_02');
$sql_req = "SELECT distinct(Compte) from $vl_c_base_origine.articlecompta where Compte not in (select code from $vl_c_base_destination._param_pc)";
$result = _graal_requete_bd($sql_req);
$o_pc=new _graal_import();
$o_pc->req="insert into _param_pc (pc_cleunik,code,intitule,actif,dateheurecreation,dateheuremodification) VALUES ";
$vf_e_pc_cleunik=_graal_requete_max("pc_cleunik","$vl_c_base_destination._param_pc");
$i=0;$i1=500;
while ($row = mysql_fetch_assoc($result)) {
//  Ajout dans la table plan comptable
	$vf_e_pc_cleunik++;
	$i++;
	$code=addslashes($row['Compte']);
	$intitule="Compte ".addslashes($row['Compte']);
	$o_pc->dat.="($vf_e_pc_cleunik,$code,$intitule,1,now(),now(),";
	if ($i % $i1==0){
	    $o_pc->execute();
	}
}
$o_pc->execute();
_graal_libere_requete_bd($result);
echo "AjoutÃ© $i comptes.";
?>
