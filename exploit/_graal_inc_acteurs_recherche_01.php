<?php
include("_graal_var_portee.php");
error_reporting(E_ALL ^ E_NOTICE ^ E_WARNING);  //  Pour éviter les warnings éventuels générés par simplexml_load_string
$vl_c_selqui_01="false";
$vl_c_selqui_02="false";
$vl_c_selqui_03="false";
$vl_c_selqui_04="false";
$vl_c_selqui_05="false";
$vl_c_selqui_06="false";
$vl_c_selqui_07="false";
$vl_c_selqui_08="false";
$vl_c_selqui_09="false";
$vl_c_selqui_10="false";
$vl_c_selqui_11="false";
$vl_c_selqui_12="false";
$vl_e_portee=$vl_e_acteur;
switch ($vl_c_qui_acteurs_recherche) {
  case '01':$vl_c_selqui_01="true";$vl_e_portee=-1;break;
  case '02':$vl_c_selqui_02="true";$vl_e_portee=-1;break;
  case '03':$vl_c_selqui_03="true";$vl_e_portee+=$vl_e_procli;break;
  case '04':$vl_c_selqui_04="true";$vl_e_portee+=$vl_e_client;break;
  case '05':$vl_c_selqui_05="true";$vl_e_portee+=$vl_e_profou;break;
  case '06':$vl_c_selqui_06="true";$vl_e_portee+=$vl_e_fourni;break;
  case '07':$vl_c_selqui_07="true";$vl_e_portee+=$vl_e_autrac;break;
  case '08':$vl_c_selqui_08="true";$vl_e_portee+=$vl_e_actind;break;
  case '09':$vl_c_selqui_09="true";$vl_e_portee+=0;break;
  case '10':$vl_c_selqui_10="true";$vl_e_portee=-1;break;
  case '11':$vl_c_selqui_11="true";$vl_e_portee=-1;break;
  case '12':$vl_c_selqui_12="true";$vl_e_portee=-1;break;
}
$vf_c_url_alimente_table="_graal_das_paniers_01.php?vl_e_maportee=";
$vl_c_source_paniers="_graal_das_paniers_01.php?vl_c_quelspaniers=medoc#38;vl_e_portee=$vl_e_portee#38;";
$vl_c_source_paniers="$vf_c_url_alimente_table$vl_e_portee";
_graal_requete_charge_varlib($vl_c_id_inc_acteurs_recherche,$vl_e_uti_cleunik);
$vl_c_dico_00018=fa_recup_dico("dico_00018");
$vl_c_dico_00029=fa_recup_dico("dico_00029");
$vl_c_dico_00020=fa_recup_dico("dico_00020");
$vl_c_dico_00021=fa_recup_dico("dico_00021");
$vl_c_dico_00022=fa_recup_dico("dico_00022");
$vl_c_dico_00023=fa_recup_dico("dico_00023");
$vl_c_dico_00024=fa_recup_dico("dico_00024");
$vl_c_dico_00025=fa_recup_dico("dico_00025");
$vl_c_dico_00026=fa_recup_dico("dico_00026");
$vl_c_dico_00046=fa_recup_dico("dico_00046");
$vl_c_dico_00047=fa_recup_dico("dico_00047");
$vl_c_dico_00078=fa_recup_dico("dico_00078");
$vl_c_dico_00082=fa_recup_dico("dico_00082");
$vl_c_bbm_002=fa_recup_dico("bbm_002");
$vl_c_bbm_003=fa_recup_dico("bbm_003");
$vl_c_bbm_004=fa_recup_dico("bbm_004");
$vl_c_bbm_005=fa_recup_dico("bbm_005");
$vl_c_bbm_006=fa_recup_dico("bbm_006");
$vl_c_bbm_007=fa_recup_dico("bbm_007");
$vl_c_bbm_008=fa_recup_dico("bbm_008");
$vl_c_bbm_009=fa_recup_dico("bbm_009");

$vl_c_bbm_010=fa_recup_dico("bbm_010");
$vl_c_bbm_011=fa_recup_dico("bbm_011");
$vl_c_bbm_012=fa_recup_dico("bbm_012");
$vl_c_bbm_013=fa_recup_dico("bbm_013");
$vl_c_bbm_014=fa_recup_dico("bbm_014");
$vl_c_bbm_015=fa_recup_dico("bbm_015");
$vl_c_bbm_016=fa_recup_dico("bbm_016");
$vl_c_bbm_017=fa_recup_dico("bbm_017");
$vl_c_bbm_018=fa_recup_dico("bbm_018");
$vl_c_bbm_019=fa_recup_dico("bbm_019");
$vl_c_bbm_020=fa_recup_dico("bbm_020");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_xml=simplexml_load_string(fa_recup_session("vs_param_environ",""));
$selection_acteur=fa_ent_xml($vl_c_xml->selection_acteur->attributes());
$vl_c_context_00='<popupset><popup id="pop_arbre_acteurs"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arbre_acteurs\');" /></popup></popupset>';
echo <<<END
$vl_c_context_00
<script type="text/javascript">
<![CDATA[
function po_sel() {
  var vl_acteur=$vl_e_acteur;
  var vf_c_url_alimente_table="$vf_c_url_alimente_table";
  var vl_portee=fa_mlget("bbm_ml_qui","_graal_portee");
  var vl_e_total=parseInt(vl_portee)+parseInt(vl_acteur)
  fa_das("bao_ml_actif",vf_c_url_alimente_table+vl_e_total);
  fa_gid("bao_ml_actif").builder.rebuild();
}
]]>
</script>
<_graal_overlay_01 id="bbm_acteurs_recherche_01" flex="1">
    <vbox flex="1">
  <hbox>
    <menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' disabled="$vl_c_inactif_acteurs_recherche" flex="1" id="bbm_ml_qui" oncommand="po_sel();pf_approximatif();">
      <menupopup>
        <menuitem label="$vl_c_dico_00018" tooltiptext="$vl_c_dico_00018" selected="$vl_c_selqui_01" value="000000" _graal_portee="999999999999"/>
        <menuitem label="$vl_c_dico_00029" tooltiptext="$vl_c_dico_00019" selected="$vl_c_selqui_10" value="888888" _graal_portee="999999999999"/>
        <menuitem label="$vl_c_dico_00020" tooltiptext="$vl_c_dico_00020" selected="$vl_c_selqui_03" value="110001" _graal_portee="$vl_e_procli"/>
        <menuitem label="$vl_c_dico_00021" tooltiptext="$vl_c_dico_00021" selected="$vl_c_selqui_04" value="110003" _graal_portee="$vl_e_client"/>
        <menuitem label="$vl_c_dico_00022" tooltiptext="$vl_c_dico_00022" selected="$vl_c_selqui_05" value="110002" _graal_portee="$vl_e_profou"/>
        <menuitem label="$vl_c_dico_00023" tooltiptext="$vl_c_dico_00023" selected="$vl_c_selqui_06" value="110004" _graal_portee="$vl_e_fourni"/>
        <menuitem label="$vl_c_dico_00024" tooltiptext="$vl_c_dico_00024" selected="$vl_c_selqui_07" value="110005" _graal_portee="$vl_e_autrac"/>
        <menuitem label="$vl_c_dico_00025" tooltiptext="$vl_c_dico_00025" selected="$vl_c_selqui_08" value="110006" _graal_portee="$vl_e_actind"/>
        <menuitem label="$vl_c_dico_00026" tooltiptext="$vl_c_dico_00026" selected="$vl_c_selqui_09" value="999999" _graal_portee="000000000000"/>
        <menuitem label="$vl_c_dico_00078" tooltiptext="$vl_c_dico_00078" selected="$vl_c_selqui_11" value="777777" _graal_portee="000000000000"/>
        <menuitem label="$vl_c_dico_00082" tooltiptext="$vl_c_dico_00082" selected="$vl_c_selqui_12" value="666666" _graal_portee="000000000000"/>
      </menupopup>
    </menulist>
    <menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' flex="1" id="bao_ml_actif" oncommand="pf_approximatif();" flags="" ref="*" querytype="xml" datasources="$vl_c_source_paniers">
      <menupopup>
        <menuitem label="$vl_c_dico_00046" tooltiptext="$vl_c_dico_00046" selected="true" value="1" /> <!--  Actifs-->
        <menuitem label="$vl_c_dico_00047" tooltiptext="$vl_c_dico_00047" value="2" /> <!--  Inactifs-->
        <menuitem label="$vl_c_dico_00026" tooltiptext="$vl_c_dico_00026" value="0" /> <!--  Tous-->
      </menupopup>
      <template><query expr="*"/><action>
        <menupopup>
          <menuseparator/>
          <menuitem uri="?" label="?panier_titre" tooltiptext="?panier_titre" selected="true" value="3" _graal_cleunik="?panier_cleunik"/><!-- Mes paniers-->
        </menupopup>
      </action></template>
    </menulist>
  <label flex="0" value="$vl_c_bbm_002"/>
  <textbox flex="2"   value="$vl_c_bbm_010" id="bbm_tb_rechapproxima" oninput="pf_approximatif()"/>
  <menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' flex="1" id="bbm_ml_type" oncommand="pf_approximatif()">
    <menupopup>
      <menuitem label="$vl_c_bbm_003" selected="true" value="1"/>
      <menuitem hidden="true" label="$vl_c_bbm_004" value="2"/>
    </menupopup>
  </menulist>
  <label flex="0" value="$vl_c_bbm_005"/>
  <menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' flex="1" id="bbm_ml_zone" oncommand="pf_approximatif()" value="$selection_acteur">
    <menupopup>
      <menuitem label="$vl_c_bbm_006" tooltiptext="$vl_c_bbm_006" value="1"/>
      <menuitem label="$vl_c_bbm_007" tooltiptext="$vl_c_bbm_007" value="2"/>
      <menuitem label="$vl_c_bbm_008" tooltiptext="$vl_c_bbm_008" value="3"/>
      <menuitem label="$vl_c_bbm_009" tooltiptext="$vl_c_bbm_009" value="4"/>

    </menupopup>
  </menulist>
  <toolbarbutton flex="1" hidden="true" class="aa12" oncommand="pf_approximatif();"/>
  </hbox>
  <vbox flex="2">
<tree id="arbre_acteurs" onselect="pf_sel_arbre_acteurs();" enableColumnDrag="true" flex="1" flags="" ref="*" querytype="xml" datasources="" seltype="single" context="pop_arbre_acteurs">
<treecols>
 <treecol id="code" sort="?code" label="$vl_c_bbm_011" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="mnemotech" sort="?mnemotechnique" label="$vl_c_bbm_012" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol hidden="true" id="act_cleunik" label="raf_caché" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="portee" sort="?portee" label="$vl_c_bbm_013" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="raisonsoc" sort="?raisonsoc" label="$vl_c_bbm_014" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="nc" sort="?nomcommercial" label="$vl_c_bbm_015" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol hidden="true" id="typeacteur" label="Type acteur(invisible)" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
</treecols>
 <template><query expr="*"/><action>
 <treechildren>

 <treeitem container="true" uri="?" seltype="single">
 <treerow>
 <treecell label="?code"/>
 <treecell label="?mnemotechnique"/>
 <treecell label="?act_cleunik"/>
 <treecell label="?portee"/>
 <treecell label="?raisonsoc"/>
 <treecell label="?nomcommercial"/>
 <treecell label="?typeacteur"/>
 </treerow>
 </treeitem>
 </treechildren>
 </action></template>
 </tree>
 </vbox>

  </vbox>
</_graal_overlay_01>
END;
?>
