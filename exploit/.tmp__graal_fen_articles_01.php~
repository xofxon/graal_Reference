<?php
include("_graal_header_xul.inc.php");
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
$vl_e_nomcomplet=fa_recup_session('vs_nomcomplet','tesquiconnard?');
$vl_c_genre=fa_recup_param('genre','tousss');
$vl_e_art_cleunik=intval(fa_recup_param('vl_e_art_cleunik',-1));
switch ($vl_c_genre){
  case "tousss": $vl_c_id_fenetre="Fen_00222";$vl_c_id_article_recherche="Div_00206";$class_tabedition="ai07";break;  //  Tous les articles
  case "favori": $vl_c_id_fenetre="Fen_00223";$vl_c_id_article_recherche="Div_00207";$class_tabedition="ai07";break;  //  Favoris
  case "achats": $vl_c_id_fenetre="Fen_00224";$vl_c_id_article_recherche="Div_00208";$class_tabedition="ag02";break;  //  Articles d'achats
  case "ventes": $vl_c_id_fenetre="Fen_00225";$vl_c_id_article_recherche="Div_00209";$class_tabedition="ah19";break;  //  Articles de vente
  case "fabric": $vl_c_id_fenetre="Fen_00226";$vl_c_id_article_recherche="Div_00210";$class_tabedition="af04";break;  //  Articles de fabrication
  default: fa_redirige("acces_interdit");break; 
}
$vl_c_id_article_info_gene="Div_00211"; //  Informations générales
$vl_c_id_article_info_stock="Div_00213"; //  Informations sur les stocks
$vl_c_id_article_dep_emp="Div_00216"; //  Tableau des dépôts et emplacements des articles
$id_inc_art_mousto="Div_00486";// Tableau des mouvements de stock
$vl_c_barre_presente_dep_emp='ok';
$vl_c_id_article_relations="Div_00218"; //  Tableau des relations entre articles
$vl_c_barre_presente_relations='ok';
$vl_c_id_article_achats="Div_00221"; //  Informations sur les achats
$vl_c_id_inc_articles_fournis="Div_00220"; //  Tableau des fournisseurs de l'article

$vl_c_id_article_criteres_entreprise="Div_00311"; //  Critères de l'article (vision de l'entreprise)
$vl_c_id_article_criteres_lesmiens="Div_00312"; //  Critères de l'article (ma vision)
$vl_c_id_article_criteres_lesautres="Div_00313"; //  Critères de l'article (la vision des autres)
$vl_c_id_article_criteres_tous="Div_00386"; //  Critères de l'article (la vision de tous)

$vl_c_id_article_ventes="Div_00318"; //  Onglet des ventes (tarif type, tarifs spéciaux)
$vl_c_id_article_nomenclature="Div_00319"; //  Onglet des nomenclatures de fabrication
$vl_c_barre_presente_nomenclature='ok';
$id_inc_ged="Div_00366"; //  Onglet de la GED
$vl_c_id_article_image="Div_00368"; //  Onglet des images
$id_inc_art_actions_selection="Div_00450";// Onglet de sélection des actions
$vl_c_id_article_divers="Div_00503"; //  Onglet des divers
$vl_tc_composants=array($vl_c_id_article_recherche,$vl_c_id_article_info_gene,$vl_c_id_article_info_stock,$vl_c_id_article_dep_emp,$vl_c_id_article_relations,$vl_c_id_article_achats,$vl_c_id_inc_articles_fournis,$vl_c_id_article_criteres_entreprise,$vl_c_id_article_criteres_lesmiens,$vl_c_id_article_criteres_lesautres,$vl_c_id_article_criteres_tous,$vl_c_id_article_ventes,$vl_c_id_article_nomenclature,$id_inc_ged,$vl_c_id_article_image,$id_inc_art_actions_selection,$id_inc_art_mousto);
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
$vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=1;
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
if ($vl_e_art_cleunik!=-1) {$vl_b_ajout=0;}
$vl_c_bbo_101=fa_recup_dico("bbo_101");
$vl_c_bbo_102=fa_recup_dico("bbo_102");
$vl_c_bbo_103=fa_recup_dico("bbo_103");
$vl_c_bbo_104=fa_recup_dico("bbo_104");
$vl_c_bbo_105=fa_recup_dico("bbo_105");
$vl_c_bbo_106=fa_recup_dico("bbo_106");
$vl_c_bbo_107=fa_recup_dico("bbo_107");
$vl_c_bbo_108=fa_recup_dico("bbo_108");
$vl_c_bbo_109=fa_recup_dico("bbo_109");
$vl_c_bbo_110=fa_recup_dico("bbo_110");
$vl_c_bbo_111=fa_recup_dico("bbo_111");
$vl_c_bbo_112=fa_recup_dico("bbo_112");
$vl_c_bbo_113=fa_recup_dico("bbo_113");
$vl_c_bbo_114=fa_recup_dico("bbo_114");
$vl_c_bbo_115=fa_recup_dico("bbo_115");
$vl_c_bbo_116=fa_recup_dico("bbo_116");
$vl_c_bbo_117=fa_recup_dico("bbo_117");
$vl_c_bbo_118=fa_recup_dico("bbo_118");
$vl_c_bbo_119=fa_recup_dico("bbo_119");
$vl_c_bbo_120=fa_recup_dico("bbo_120");
$vl_c_bbo_121=fa_recup_dico("bbo_121");
$menu_partage="";
switch ($vl_c_genre){
  case "favori":     
    $vl_tb_droits_partage=_graal_requete_droits_fenetre("Fen_00643",$vl_e_uti_cleunik);
    if ($vl_tb_droits_partage[0]==true) {
      $menu_partage='<popupset><popup id="pop_favoris"><menuitem class="menuitem-iconic ak08" label="'.$vl_c_bbo_121.'" oncommand="pf_favoris_partager();" /></popup></popupset>';
    }
    break;
}
$vl_c_dico_00058=fa_recup_dico("dico_00058");
$vl_c_dico_00059=fa_recup_dico("dico_00059");
$vl_c_dico_00073=fa_recup_dico("dico_00073");
$vl_c_dico_00046=fa_recup_dico("dico_00046");
$vl_c_dico_00047=fa_recup_dico("dico_00047");
$vl_c_dico_00026=fa_recup_dico("dico_00026");
$vl_c_type_article_recherche="1";
include("_graal_header_winxul.inc.php");
include("_graal_header_datepicker.inc.php");
include("_graal_header_textfied.inc.php");
echo <<<END
<window context="graal_cp00" _graal_genre="$vl_c_genre" title="$vl_c_bbo_100" id="_win_fen_articles_01" onload="fa_aa(this);pf_aa_init()" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
$vl_c_graal_cp00
$menu_partage
<broadcasterset>
  <broadcaster id="broadcaster_01"/>
  <broadcaster id="broadcaster_02"/>
</broadcasterset>
END;
include("_graal_visites.inc.php");
include("js/_graal_01.js.php");
include("js/_graal_02.js.php");
include("js/_graal_articles_01.js.php");
include("js/_graal_05_dates.js.php");
if ($vl_e_art_cleunik==-1) {
  include("js/_graal_articles_selection_01.js.php");
  echo('<hbox id="bbo_articles_01" />');
  include("_graal_inc_articles_recherche_01.php");
  $vl_c_id_vbox_inc_article_01='arbre_articles_01';
  $vl_c_id_arbre_inc_article_01='arbre_des_articles';
  include("_graal_inc_articles_recherche_01_bis.php");
  echo ("<splitter/>");
}
echo <<<END
  <hbox flex="1">
  <tabbox id="tabbox_01" flex="1" orient="vertical" class="overflow_01">
    <tabs id="tab_infogene">
       <tab class="$class_tabedition" id="tab_edition" linkedpanel="tabpanel_edition" first-tab="true" label="$vl_c_bbo_101" selected="true"/>
       <tab id="tab_divers" linkedpanel="tabpanel_divers" label="$vl_c_bbo_120"/>
       <tab class="af08" id="tab_actions" linkedpanel="tabpanel_actions" label="$vl_c_bbo_111"/>
       <tab class="al01" id="tab_criteres" linkedpanel="tabpanel_critere" label="$vl_c_bbo_108"/>
       <tab id="tab_achats" linkedpanel="tabpanel_achats"  label="$vl_c_bbo_102"/>
       <tab id="tab_ventes" linkedpanel="tabpanel_ventes" collapsed="true" label="$vl_c_bbo_103"/>
       <tab id="tab_stocks" linkedpanel="tabpanel_stocks" label="$vl_c_bbo_104"/>
       <tab id="tab_compta" linkedpanel="tabpanel_compta" collapsed="true" label="$vl_c_bbo_105"/>
       <tab id="tab_relations" linkedpanel="tabpanel_relations"  label="$vl_c_bbo_106"/>
       <tab id="tab_fabrication" linkedpanel="tabpanel_fabrication" label="$vl_c_bbo_107"/>
       <tab class="ah03" linkedpanel="tabpanel_ged" id="tab_ged" label="$vl_c_bbo_109"/>
       <tab class="ab17" linkedpanel="tabpanel_images" id="tab_images" label="$vl_c_bbo_110"/>
    </tabs>
    <tabpanels flex="1">
  		<tabpanel id="tabpanel_edition" flex="1">
END;
include("_graal_inc_articles_infogene_01.php");
echo <<<END
      </tabpanel>
  		<tabpanel id="tabpanel_divers" flex="1">
END;
include("_graal_inc_articles_divers_01.php");
echo <<<END
      </tabpanel>

  		<tabpanel id="tabpanel_actions" flex="1">
  		<vbox flex="1">
END;
include("_graal_inc_art_actions_selection_01.php");
echo <<<END
        <tabbox id="tabbox_03" flex="1" orient="vertical" class="overflow_01">
          <tabs id="tabs_cial">
            <tab id="tab_cial_offcli" linkedpanel="tabpanel_cial_offcli" label="$vl_c_bbo_112" first-tab="true" selected="true"/>
            <tab id="tab_cial_cdecli" linkedpanel="tabpanel_cial_cdecli" label="$vl_c_bbo_114"/>
            <tab id="tab_cial_livcli" linkedpanel="tabpanel_cial_livcli" label="$vl_c_bbo_116"/>
            <tab id="tab_cial_faccli" linkedpanel="tabpanel_cial_faccli" label="$vl_c_bbo_118"/>
            <tab id="tab_cial_demfou" linkedpanel="tabpanel_cial_demfou" label="$vl_c_bbo_113"/>
            <tab id="tab_cial_cdefou" linkedpanel="tabpanel_cial_cdefou" label="$vl_c_bbo_115"/>
            <tab id="tab_cial_recfou" linkedpanel="tabpanel_cial_recfou" label="$vl_c_bbo_117"/>
            <tab id="tab_cial_facfou" linkedpanel="tabpanel_cial_facfou" label="$vl_c_bbo_119"/>
          </tabs>
          <tabpanels flex="1" id="tabpanels_cial">
          	<tabpanel id="tabpanel_cial_offcli" flex="1">
END;
include("_graal_inc_art_actions_offcli_01.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_cial_cdecli" flex="1">
END;
include("_graal_inc_art_actions_cdecli_01.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_cial_livcli" flex="1">
END;
include("_graal_inc_art_actions_livcli_01.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_cial_faccli" flex="1">
END;
include("_graal_inc_art_actions_faccli_01.php");
echo <<<END
            </tabpanel>
          	<tabpanel id="tabpanel_cial_demfou" flex="1">
END;
include("_graal_inc_art_actions_demfou_01.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_cial_cdefou" flex="1">
END;
include("_graal_inc_art_actions_cdefou_01.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_cial_recfou" flex="1">
END;
include("_graal_inc_art_actions_recfou_01.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_cial_facfou" flex="1">
END;
include("_graal_inc_art_actions_facfou_01.php");
echo <<<END
           </tabpanel>
          </tabpanels>
        </tabbox>
      </vbox>
      </tabpanel>
      <tabpanel id="tabpanel_critere" flex="1">
        <tabbox id="tabbox_02" flex="1" orient="vertical" class="overflow_01">
          <tabs>
            <tab class="ag17" id="tab_edition_critere_entreprise" linkedpanel="tabpanel_critere_entreprise" first-tab="true" label="$vl_c_dico_00058" selected="true"/>
            <tab class="ak15" id="tab_edition_critere_lesmiens" linkedpanel="tabpanel_critere_lesmiens" label="$vl_e_nomcomplet"/>
            <tab class="ak19" id="tab_edition_critere_lesautres" linkedpanel="tabpanel_critere_lesautres" label="$vl_c_dico_00059"/>
            <tab class="bd01" id="tab_edition_critere_tous" linkedpanel="tabpanel_critere_tous" label="$vl_c_dico_00073"/>
          </tabs>
          <tabpanels flex="1">
          	<tabpanel id="tabpanel_critere_entreprise" flex="1">
END;
include("_graal_inc_articles_criteres_entreprise.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_critere_lesmiens" flex="1">
END;
include("_graal_inc_articles_criteres_lesmiens.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_critere_lesautres" flex="1">
END;
include("_graal_inc_articles_criteres_lesautres.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_critere_tous" flex="1">
END;
include("_graal_inc_articles_criteres_tous.php");
echo <<<END
            </tabpanel>
          </tabpanels>
        </tabbox>
      </tabpanel>
    	<tabpanel id="tabpanel_achats" flex="1">
END;
include("_graal_inc_articles_achats_01.php");
echo <<<END
      </tabpanel>
      <tabpanel id="tabpanel_ventes" flex="1">
END;
include("_graal_inc_articles_ventes_01.php");
echo <<<END
      </tabpanel>
    	<tabpanel id="tabpanel_stocks" flex="1">
END;
include("_graal_inc_articles_stock_01.php");
echo <<<END
      </tabpanel>
      <tabpanel id="tabpanel_compta" flex="1"><vbox flex="3" id="aay_acteurs_compta_01" /></tabpanel>
      <tabpanel id="tabpanel_fabrication" flex="1">
END;
include("_graal_inc_articles_nomenclatures_fab_01.php");
echo <<<END
      </tabpanel>
      <tabpanel id="tabpanel_relations" flex="1">
END;
include("_graal_inc_articles_relations_01.php");
echo <<<END
      </tabpanel>
      <tabpanel id="tabpanel_ged" flex="1">
END;
include("_graal_inc_ged_01.php");
echo <<<END
      </tabpanel>
      <tabpanel id="tabpanel_images" flex="1">
END;
include("_graal_inc_ged_02.php");
echo <<<END
      </tabpanel>
    </tabpanels>
    
  </tabbox>
  <vbox id="boutons_standards">
END;
include("_graal_inc_boutons_01.php");
echo <<<END
  </vbox>  
  </hbox> 
 </window>
END;
?>
