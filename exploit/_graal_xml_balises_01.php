<?php
include("_graal_header_xml.inc.php");
//*******************************************
//* Récupération du titre d'une page HTML
//*
//*******************************************
define('EOL', "\r\n");
$vl_c_url=fa_recup_param('vl_c_url','http://lemonde.fr');
fa_recup_balise_titre($vl_c_url, $info);
$charset=fa_extrait_charset($vl_c_url);
if (trim($charset)=="") {
  $charset=mb_detect_encoding("$info->title");
}
switch (strtolower($charset)) {
  case 'utf-8':
    $k0="$info->title";
    $k1=html_entity_decode($k0,ENT_QUOTES);
    $k2=fa_ent_xml(utf8_encode($k1));
    $titre=$k1;
    break;
  case 'iso-8859-1':
  default:
    $k0=utf8_encode("$info->title");
    $k1=html_entity_decode($k0,ENT_QUOTES,'UTF-8');
    $k2=fa_ent_xml(utf8_encode($k1));
    $titre=$k1;
    break; 
}
echo(fa_xcree_entete_xml());
echo('<Description>');
echo('<nombre data="1"/>');
echo('<charset data="'.strtolower($charset).'"/>');
echo('<titre data="'.fa_remplace_quotes(trim($titre)).'"/>');
echo('</Description>'.EOL);
?>
