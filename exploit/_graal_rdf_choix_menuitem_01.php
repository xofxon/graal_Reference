<?php
include("_graal_header_xml.inc.php");
define('EOL', "\r\n");
$vl_e_critere_cleunik=intval(fa_recup_param('vl_e_critere_cleunik','108'));
$vl_e_choix_cleunik=intval(fa_recup_param('vl_e_choix_cleunik','0'));  //  français par défaut
if ($vl_e_choix_cleunik!=0)
{
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.critere_cleunik IN ($vl_e_critere_cleunik) and ( choix_actif=1 or _choix.choix_cleunik =$vl_e_choix_cleunik);";
}
else
{
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.critere_cleunik IN ($vl_e_critere_cleunik) and choix_actif=1;";
}
$result = _graal_requete_bd($sql_req);
$vl_e_nombre=mysql_num_rows($result);
echo(fa_xcree_entete_rdf());
  // boucle de récupération des enregistrements de la requête et génération du contenu RDF
  while ($row = mysql_fetch_assoc($result))
    {
      echo('<RDF:li>'.EOL);
      echo('<RDF:Description>');
      // parseType = indication pour le type des données, utile pour le tri sur la colonne
      echo('<row:nombre NC:parseType="Integer">'.fa_ent_xml($vl_e_nombre).'</row:nombre>');
      echo('<row:choix_cleunik NC:parseType="Integer">'.fa_ent_xml($row['choix_cleunik']).'</row:choix_cleunik>');
      echo('<row:valeur>'.fa_ent_xml($row['valeur']).'</row:valeur>');
      echo('</RDF:Description>'.EOL);
      echo('</RDF:li>'.EOL);
    }
echo('</RDF:Bag>'.EOL);
echo('</RDF:RDF>'.EOL);
_graal_libere_requete_bd($result);
_graal_ferme_connexion();
?>
