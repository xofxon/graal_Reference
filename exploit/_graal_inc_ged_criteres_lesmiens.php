<?php
//  Tableau des critÃ¨res des acteurs (vue "la mienne")
_graal_requete_charge_varlib($vl_c_id_graal_inc_ged_criteres_lesmiens,$vl_e_uti_cleunik);
$vl_c_bdz_004=fa_recup_dico("bdz_004");
$vl_c_bdz_005=fa_recup_dico("bdz_005");
$vl_c_bdz_006=fa_recup_dico("bdz_006");
$vl_c_bdz_007=fa_recup_dico("bdz_007");
$vl_c_mes_00007=fa_recup_dico("mess_00007");
$vl_c_mes_00009=fa_recup_dico("mess_00009");
switch ($vl_c_id_graal_inc_ged_criteres_lesmiens){
  case "Div_00348": $vl_c_id_fen_criteres="Fen_00299";break;  //  documents
  case "Div_00349": $vl_c_id_fen_criteres="Fen_00299";break;  //  notes
  case "Div_00350": $vl_c_id_fen_criteres="Fen_00299";break;  //  pseudos-documents
  default : fa_redirige("acces_bizar");break;  
}
echo <<<END
<vbox id="bdz_ged_criteres_lesmiens" flex="3">
     <toolbar grippyhidden="true">
    <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_mes_00007" oncommand="pf_affiche_donnees_criteres_lesmiens();"/>
     <label value="$vl_c_bdz_007"/>
END;
if ($vl_c_id_fen_criteres!="000000000") {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_criteres,$vl_e_uti_cleunik);} else {$vl_tb_droits[0]=1;}
if ($vl_tb_droits[0]!=0){
echo <<<END
    <hbox id="bloc_interlo_lesmiens">
      <toolbarbutton class="ak15" observes="broadcaster_01" tooltiptext="$vl_c_mes_00009" oncommand="pf_ouvre('critere_lesmiens','ouvrir');"/>
    </hbox>
END;
}
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_context_00='<popupset><popup id="pop_criteres_des_ged_lesmiens"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'criteres_des_ged_lesmiens\');" /></popup></popupset>';
echo <<<END
$vl_c_context_00
  </toolbar>
   <tree id="criteres_des_ged_lesmiens" enableColumnDrag="true" flex="2" flags="" ref="*" querytype="xml" datasources="" seltype="single" context="pop_criteres_des_ged_lesmiens">
     <treecols>
       <treecol id="doc_cleunik_lesmiens" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
       <treecol id="choix_cleunik_lesmiens" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
       <treecol id="critere_cleunik_lesmiens" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="critere_denomination_lesmiens" label="$vl_c_bdz_004" sort="?critere_denomination"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="choix_code_lesmiens" label="$vl_c_bdz_005" sort="?choix_code"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="choix_valeur_texte_01_lesmiens" label="$vl_c_bdz_006" sort="?choix_valeur_texte_01"/><splitter class="tree-splitter" resizeafter="grow"/>
     </treecols>
     <template><query expr="*"/><action>
       <treechildren>
         <treeitem uri="?" seltype="single">
           <treerow>
             <treecell label="?doc_cleunik"/>
             <treecell label="?choix_cleunik"/>
             <treecell label="?critere_cleunik"/>
             <treecell label="?critere_denomination"/>
             <treecell label="?choix_code"/>
             <treecell label="?choix_valeur_texte_01"/>
           </treerow>
         </treeitem>
       </treechildren>
     </action></template>
   </tree>
 </vbox>
END;
?>
