<?xml version="1.0" encoding="UTF-8"?>
<bindings	xmlns="http://www.mozilla.org/xbl"
			xmlns:html="http://www.w3.org/1999/xhtml"
			xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
			xmlns:xbl="http://www.mozilla.org/xbl">
	<binding id="accordion">
		<content  selectedIndex="0" orient="vertical" flex="1">
			<children/>
		</content>
		<implementation>
			<constructor><![CDATA[
				this.selectedIndex = this.selectedIndex;
			]]></constructor>
			<property name="items">
				<getter><![CDATA[
					return this.childNodes;
				]]></getter>
			</property>
			<property name="selectedIndex">
				<setter><![CDATA[
					var items = this.items;
					var before = this.getAttribute("selectedIndex");
					items[before].removeAttribute("selected");
					this.setAttribute("selectedIndex", val);
					items[val].setAttribute("selected", true);
				]]></setter>
				<getter><![CDATA[
					return this.getAttribute("selectedIndex");
				]]></getter>
			</property>
			<property name="selectedItem">
				<setter><![CDATA[
					this.selectedIndex = val.index;
				]]></setter>
				<getter><![CDATA[
					return this.items[this.selectedIndex];
				]]></getter>
			</property>
		</implementation>
	</binding>
	<binding id="accordionitem">
		<content selected="false" orient="vertical">
			<xul:toolbox>
				<xul:toolbar flex="1">
					<xul:toolbarbutton xbl:inherits="image,label,disabled,class" flex="1" oncommand="parentNode.parentNode.parentNode.select()"/>
				</xul:toolbar>
			</xul:toolbox>
			<xul:vbox anonid="accordion-content" flex="1">
				<children/>
			</xul:vbox>
		</content>
		<implementation>
			<constructor><![CDATA[
				if(this.getAttribute("selected")=="true") this.parentNode.selectedIndex = this.index; 
			]]></constructor>
			<property name="index">
				<getter><![CDATA[
					var i = 0;
					var current = this;
					while((current=current.previousSibling)!=null) i++;
					return i; 
				]]></getter>
			</property>
			<method name="select">
				<body><![CDATA[
					this.parentNode.selectedItem=this;
				]]></body>
			</method>
		</implementation>
	</binding>
</bindings>
