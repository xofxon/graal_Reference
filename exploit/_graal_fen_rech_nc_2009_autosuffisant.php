<?php
include("_graal_header_xul.inc.php");
$vl_e_uti_cleunik =intval(fa_recup_session("vs_uti_cleunik","0"));
$vl_c_quellerecherche=fa_recup_param("vl_c_quellerecherche","???");
$vl_c_id_fenetre="Fen_01113";
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_b_acces=$vl_tb_droits[0];
if ($vl_b_acces==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);
$vl_c_bvf_100=fa_recup_dico("bvf_100");
$vl_c_bvf_101=fa_recup_dico("bvf_101");
$vl_c_bvf_102=fa_recup_dico("bvf_102");
$vl_c_bvf_106=fa_recup_dico("bvf_106");
$vl_c_bvf_107=fa_recup_dico("bvf_107");
$vl_c_bvf_108=fa_recup_dico("bvf_108");
$vl_c_bvf_109=fa_recup_dico("bvf_109");
$vl_c_bvf_110=fa_recup_dico("bvf_110");
$vl_c_bvf_111=fa_recup_dico("bvf_111");
$vl_c_bvf_112=fa_recup_dico("bvf_112");
$vl_c_bvf_113=fa_recup_dico("bvf_113");
$vl_c_mes_00007=fa_recup_dico("mes_000007");
$vl_tc_composants=array($vl_c_id_fenetre);
include("_graal_header_winxul.inc.php");
echo <<<END
<window title="$vl_c_bvf_100" id="_win_fen_nc_2009_autosuffisant" onload="fa_aa(this);pf_aa_init();" $c_xmlns>
$vl_c_graal_cp00
END;
include_once("js/_graal_01.js.php");
include("js/_graal_rech_nc_2009_autosuffisant.js.php");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_dico_00149=fa_recup_dico("dico_00149");
$vl_c_context_00='<popupset><popup id="pop_arbre_nc_2009_autosuffisant"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arbre_nc_2009_autosuffisant\');" /></popup></popupset>';
echo <<<END
$vl_c_context_00
<hbox>
    <textbox minwidth="60" flex="1" value="$vl_c_bvf_111" id="tb_rechapproxima" oninput="pf_alimente_table();"/>
    <label flex="0" value="$vl_c_bvf_108"/>
    <menulist sizetopopup="none" minwidth="60" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' flex="1" id="ml_zone" oncommand="pf_alimente_table();" value="1">
      <menupopup>
        <menuitem label="$vl_c_bvf_109" tooltiptext="$vl_c_bvf_109" value="1"/> <!--  Code -->
        <menuitem label="$vl_c_bvf_110" tooltiptext="$vl_c_bvf_110" value="2"/> <!--  IntitulÃ© -->
      </menupopup>
    </menulist>
    <label flex="0" value="$vl_c_bvf_112"/>
	<textbox flex="0"   value="$vl_c_bvf_113" id="tb_limit" size="4" type="number" hidespinbuttons="true"/>
	<keyset id="_graal_ks_02">
    <key id="k-recherche" modifiers="alt" keycode="VK_F3" oncommand="pf_alimente_table();"/>
	</keyset>
    <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_mes_00007" oncommand="pf_alimente_table();" id="tb_rafraichir_table"/>
    <toolbarbutton id="bt_info_fen" class="ab19" label="$vl_c_dico_00149" crop="end" dir="normal" oncommand="fa_infos_fenetre('$vl_c_win_id')" />
  </hbox>
<vbox id="box_boite_outils_xof_01" flex="1">
  <tree id="arbre_nc_2009_autosuffisant" flex="1" hidecolumnpicker="false" enableColumnDrag="true" flags="" ref="*" querytype="xml" datasources="" context="pop_arbre_nc_2009_autosuffisant">
    <treecols>
      <treecol id="tc_cleunik" hidden="true" sort="?pc_cleunik" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_code" label="$vl_c_bvf_101" sort="?code" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_libelle" label="$vl_c_bvf_102" sort="?libelle" /><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
    <template><query expr="*"/><action>
      <treechildren>
        <treeitem uri="?" seltype="single">
          <treerow>
            <treecell label="?cleunik"/>
            <treecell label="?code"/>
            <treecell label="?libelle"/>
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
</vbox>
<hbox>
  <button flex="1" label="$vl_c_bvf_106" oncommand="pf_etat_fen('renvoyer');"/>
  <button flex="1" label="$vl_c_bvf_107" oncommand="pf_etat_fen('sortir');"/>
</hbox>
</window>
END;
?>
