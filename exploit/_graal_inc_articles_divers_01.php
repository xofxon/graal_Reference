<?php
_graal_requete_charge_varlib($vl_c_id_article_divers,$vl_e_uti_cleunik);
$vl_c_bom_001=fa_recup_dico("bom_001");
$vl_c_bom_002=fa_recup_dico("bom_002");
$vl_c_bom_003=fa_recup_dico("bom_003");
$vl_c_bom_004=fa_recup_dico("bom_004");
$vl_c_bom_005=fa_recup_dico("bom_005");
$vl_c_bom_006=fa_recup_dico("bom_006");
$vl_c_bom_007=fa_recup_dico("bom_007");
$vl_c_bom_008=fa_recup_dico("bom_008");
$vl_c_bom_009=fa_recup_dico("bom_009");
$vl_c_bom_010=fa_recup_dico("bom_010");
$vl_c_bom_011=fa_recup_dico("bom_011");
$vl_c_bom_012=fa_recup_dico("bom_012");
$vl_c_bom_013=fa_recup_dico("bom_013");
$vl_c_bom_014=fa_recup_dico("bom_014");
$vl_c_bom_015=fa_recup_dico("bom_015");
$vl_c_bom_016=fa_recup_dico("bom_016");
$vl_c_bom_017=fa_recup_dico("bom_017");
$vl_c_bom_018=fa_recup_dico("bom_018");
$vl_c_bom_019=fa_recup_dico("bom_019");
$vl_c_bom_020=fa_recup_dico("bom_020");
$vl_c_bom_021=fa_recup_dico("bom_021");
$vl_c_bom_022=fa_recup_dico("bom_022");
$vl_c_bom_023=fa_recup_dico("bom_023");
$vl_c_bom_024=fa_recup_dico("bom_024");
$ml_unite_capacite=fa_brik_menulist_choix(131,1,-1,-1,'','ml_unite_capacite',"broadcaster_01",-55);
$ml_unite_poids=fa_brik_menulist_choix(132,1,-1,-1,'','ml_unite_poids',"broadcaster_01",-59);
$ml_unite_longueur=fa_brik_menulist_choix(135,1,-1,-1,'','ml_unite_longueur',"broadcaster_01",-83);
$param_generaux_graal_167=intval(fa_recup_session('vs_param_generaux_graal_167','0'));
$vs_envan=intval(fa_recup_session('vs_envan','0'));
switch ($vs_envan){
	case 0:
		$tpf_hidden="true";
		$tpf_01_hidden="true";
		break;
	case 1:
		$tpf_01_hidden="true";
		break;
	case 2:
	default:
		break;
}
$vl_c_id_fen_art_compta="Fen_00656";
$tb_compta=<<<EOT
      <toolbar grippyhidden="true">
  		  <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_bom_008" oncommand="pf_affiche_donnees_compta();"/>
EOT;
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_art_compta,$vl_e_uti_cleunik);
if ($vl_tb_droits[0]!=0) {
  if ($vl_tb_droits[1]!=0) {
    $tb_compta.=('<toolbarbutton observes="broadcaster_01" class="ajouter" tooltiptext="'.$vl_c_bom_009.'" oncommand="pf_ouvre(\'compta\',\'nouveau\');"/>');
  }
  $tb_compta.=('<toolbarbutton observes="broadcaster_01" class="modifier" tooltiptext="'.$vl_c_bom_010.'" oncommand="pf_ouvre(\'compta\',\'ouvrir\');"/>');
  if ($vl_tb_droits[1]!=0) {
    $tb_compta.=('<toolbarbutton observes="broadcaster_01" class="ajouter" tooltiptext="'.$vl_c_bom_023.'" oncommand="pf_ouvre(\'compta\',\'dupliquer_reference\');"/>');
  }
}
$tb_compta.=("<toolbarseparator /></toolbar>");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_context_00='<popupset><popup id="pop_arbre_compta"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arbre_compta\');" /></popup></popupset>';
echo <<<END
$vl_c_context_00
<vbox flex="1" id="bom_articles_01">
<hbox>
  <label control="la_nbdec_prix" value="$vl_c_bom_001"/>
  <menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' observes="broadcaster_01" flex="1" id="ml_nbdec_prix" _graal_nombre='5' oncommand="pf_change_nbdec_prix();">
    <menupopup>
      <menuitem label="0" value="0"/>  
      <menuitem label="1" value="1"/>
      <menuitem label="2" value="2" selected="true"/>
      <menuitem label="3" value="3"/>
      <menuitem label="4" value="4"/>
    </menupopup>
  </menulist>
		<label control="la_nbdec_qte" value="$vl_c_bom_015"/>
  <menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' observes="broadcaster_01" flex="1" id="ml_nbdec_qte" _graal_nombre='5' value="$param_generaux_graal_167">
    <menupopup>
      <menuitem label="0" value="0"/>  
      <menuitem label="1" value="1"/>
      <menuitem label="2" value="2"/>
      <menuitem label="3" value="3"/>
      <menuitem label="4" value="4"/>
    </menupopup>
  </menulist>
  <label control="la_pr_generique" value="$vl_c_bom_002"/>
  <textbox decimalplaces="2" label="$vl_c_bom_002" type="number" hidespinbuttons="true" observes="broadcaster_01" id="tb_pr_generique"   />
</hbox>
<hbox>
  <label control="la_delai_reappro" value="$vl_c_bom_003"/>
  <textbox observes="broadcaster_01" type="number" hidespinbuttons="true" decimalplaces="3" emptytext="Capacité dans l'unité" id="tb_capacite"   />
  $ml_unite_capacite
</hbox>
<hbox>
  <label value="$vl_c_bom_012"/>
  <textbox observes="broadcaster_01" type="number" hidespinbuttons="true" decimalplaces="2" label="$vl_c_bom_012" id="tb_poids_net"   />
  <label value="$vl_c_bom_013"/>
  <textbox observes="broadcaster_01" type="number" hidespinbuttons="true" decimalplaces="2" label="$vl_c_bom_013" id="tb_poids_brut"   />
  <label value="$vl_c_bom_016"/>
  <textbox observes="broadcaster_01" type="number" hidespinbuttons="true" decimalplaces="2" label="$vl_c_bom_016" id="tb_tare"   />
  <label value="$vl_c_bom_014"/>
  $ml_unite_poids
</hbox>
<hbox>
  <label value="$vl_c_bom_017"/>
  <textbox observes="broadcaster_01" type="number" hidespinbuttons="true" decimalplaces="2" label="$vl_c_bom_017" id="tb_longueur"   />
  <label value="$vl_c_bom_018"/>
  <textbox observes="broadcaster_01" type="number" hidespinbuttons="true" decimalplaces="2" label="$vl_c_bom_018" id="tb_largeur"   />
  <label value="$vl_c_bom_019"/>
  <textbox observes="broadcaster_01" type="number" hidespinbuttons="true" decimalplaces="2" label="$vl_c_bom_019" id="tb_epaisseur"   />
  <label value="$vl_c_bom_020"/>
  $ml_unite_longueur
</hbox>
<hbox>
  <label value="$vl_c_bom_022"/>
  <textbox id="tb_code_deb" disabled="true" nc_2009_autosuffisant_cleunik="-1"/>
  <toolbarbutton class="al02" observes="broadcaster_01" tooltiptext="$vl_c_aay_026" oncommand="pf_ouvre('deb','ouvrir');"/>
  <label id="la_deb" value=""/>
</hbox>
<vbox id="box_compte_compta" flex="1" class='overflow_01'>
  $tb_compta
  <tree id="arbre_compta" hidecolumnpicker="false" flags="" ref="*" querytype="xml" datasources="" enableColumnDrag="true" rows="6" context="pop_arbre_compta">
    <treecols>
      <treecol id="tc_art_cleunik" ignoreincolumnpicker="true" hidden="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_catcompta_cleunik" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_pc_cleunik_vente" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_pc_cleunik_achat" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_intitule_vente" label="$vl_c_bom_005" sort="?intitule_vente" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_intitule_achat" label="$vl_c_bom_006" sort="?intitule_achat" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_intitule_categorie" label="$vl_c_bom_004" sort="?intitule_categorie" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_intitule_taxe" label="$vl_c_bom_007" sort="?intitule_taxe" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_intitule_tpf" label="$vl_c_bom_021" sort="?intitule_tpf" hidden="$tpf_hidden" ignoreincolumnpicker="$tpf_hidden"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_tpf_cleunik" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_intitule_tpf_01" label="$vl_c_bom_024" sort="?intitule_tpf_01" hidden="$tpf_01_hidden" ignoreincolumnpicker="$tpf_01_hidden"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_tpf_cleunik_01" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
    <template><query expr="*"/><action>
      <treechildren>
        <treeitem uri="?" seltype="single">
          <treerow>
            <treecell label="?art_cleunik"/>
            <treecell label="?catcompta_cleunik"/>
            <treecell label="?pc_cleunik_vente"/>
            <treecell label="?pc_cleunik_achat"/>
            <treecell label="?intitule_vente"/>
            <treecell label="?intitule_achat"/>
            <treecell label="?intitule_categorie"/>
            <treecell label="?intitule_taxe"/>
            <treecell label="?intitule_tpf"/>
            <treecell label="?tpf_cleunik"/>
            <treecell label="?intitule_tpf_01"/>
            <treecell label="?tpf_cleunik_01"/>
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
</vbox>


</vbox>
END;
?>
