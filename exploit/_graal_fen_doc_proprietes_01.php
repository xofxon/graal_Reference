<?php
include("_graal_header_xul.inc.php");
include("_graal_fonctions_documents.php");
$vl_c_id_fenetre="Fen_01029"; //Récupération des propriétés des documents
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
$vf_e_doc_cleunik=intval(fa_recup_param('vf_e_doc_cleunik','0'));
if (fa_verif_droit($vf_e_doc_cleunik)==false) {fa_redirige("document_interdit");}
$vl_c_genrecritere=fa_recup_param('genrecritere','');
$vl_e_typedoc=fa_recup_param('typedoc','');
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);
$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_bsc_100=fa_recup_dico("bsc_100");
$vl_c_bsc_101=fa_recup_dico("bsc_101");
$vl_c_bsc_102=fa_recup_dico("bsc_102");
$vl_c_bsc_103=fa_recup_dico("bsc_103");
$vl_c_bsc_104=fa_recup_dico("bsc_104");
$vl_c_bsc_105=fa_recup_dico("bsc_105");
include("_graal_header_winxul.inc.php");
echo <<<END
<window context="graal_cp00" _graal_url="$vf_c_url" title="$vl_c_bsc_101" _graal_genre_critere="$vl_c_genrecritere" id="_graal_doc_propriertes_01" onload="fa_aa(this);pf_etat_fen('ini')" $c_xmlns >
$vl_c_graal_cp00
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_doc_proprietes_01.js.php");
include("js/_graal_03.js.php");
echo <<<END
  <vbox flex="1">
   <tree id="arbre_metatags" flex="2" flags="" ref="*" querytype="xml" datasources="" seltype="multiple">
     <treecols>
       <treecol id="tag" label="$vl_c_bsc_102"  flex="2" sort="?tag" sortActive="true" sortDirection="ascending"/>
	   <treecol id="valeur" label="$vl_c_bsc_103"  flex="2" sort="?valeur" sortActive="true" sortDirection="ascending"/>
     </treecols>
     <template><query expr="*"/><action>
       <treechildren>
         <treeitem uri="?" seltype="single">
           <treerow>
		     <treecell label="?tag" />
             <treecell label="?valeur" />
           </treerow>
         </treeitem>
       </treechildren>
     </action></template>
   </tree>
  </vbox>
  <hbox>
     <button width="40" flex="1" id="bt_ajouter" label="$vl_c_bsc_105" crop="end" dir="normal" oncommand="pf_validation('ajouter')" />
     <button width="40" flex="1" id="bt_sortir" label="$vl_c_bsc_100" crop="end" dir="normal" oncommand="pf_etat_fen('sortir')" />
  </hbox>
 </window>
END;
?>
