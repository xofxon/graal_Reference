<?php
include("_graal_header_txt.inc.php");
include("_graal_fonctions_mail.php");
$t_origines_ok=array();
$t_origines_ok[0]="_graal_import_adresses_courriel_02";
fa_acces_script();
$vf_c_echo="";
$vf_lig_cleunik=intval(fa_recup_param("vf_lig_cleunik","-1"));
$vf_c_action=fa_recup_param("vf_c_action","??????");
$vl_c_refweb=fa_recup_param("vl_c_refweb","??????");
switch (TRUE){
  case $vf_c_action=="supprimer":
    $sql_req = "DELETE FROM _w_import_courriel_ligne WHERE lig_cleunik=$vf_lig_cleunik";
    $vf_c_echo=_graal_exec_requete($sql_req);
    if($vf_c_echo=='ok') {$vf_c_echo='ok';} else {$vf_c_echo=-1;}
    break;
  case $vf_c_action=="modifier":
    $sql_req = "UPDATE _w_import_courriel_ligne SET refweb='$vl_c_refweb' WHERE lig_cleunik=$vf_lig_cleunik";
    $vf_c_echo=_graal_exec_requete($sql_req);
    if($vf_c_echo=='ok') {$vf_c_echo='ok';} else {$vf_c_echo=-1;}
    break;
  case $vf_c_action=="verifier":
    if(!ff_verifie($vl_c_refweb)){ 
      $vf_c_echo="Attention, syntaxiquement, $vl_c_refweb n'est pas une adresse e-mail valide.";
    } else {
      $vf_c_echo="Syntaxiquement, $vl_c_refweb est une adresse e-mail valide.";
      //$vf_c_echo="Ok";
    }
    break;
}
_graal_ferme_connexion();
echo $vf_c_echo;
/*
echo $vf_c_action;
echo $vf_lig_cleunik;
echo 'toto';
*/
?>
