<?php
include("_graal_header_xul.inc.php");
include("_graal_fonctions_echeances.php");
$vl_e_uti_cleunik =intval(fa_recup_session("vs_uti_cleunik","0"));
$vl_tb_droits[0]=true;
/*
switch ($vl_c_type) {
	case "ventes":$vl_c_id_fenetre="Fen_01094";break;
	case "achats":$vl_c_id_fenetre="Fen_01095";break;
}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
*/
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_bsv_100=fa_recup_dico("bsv_100");
$vl_c_bsv_101=fa_recup_dico("bsv_101");
$vl_c_bsv_102=fa_recup_dico("bsv_102");
$vl_c_bsv_103=fa_recup_dico("bsv_103");
$vl_c_bsv_104=fa_recup_dico("bsv_104");
$vl_c_bsv_105=fa_recup_dico("bsv_105");
$vl_c_bsv_106=fa_recup_dico("bsv_106");
$vl_c_bsv_107=fa_recup_dico("bsv_107");
$vl_c_bsv_108=fa_recup_dico("bsv_108");
$vl_c_bsv_109=fa_recup_dico("bsv_109");$vl_c_bsv_109="Format date";
$vl_c_bsv_110=fa_recup_dico("bsv_110");$vl_c_bsv_110="JJ/MM/AAAA";
$vl_c_bsv_111=fa_recup_dico("bsv_111");$vl_c_bsv_111="AAAA-MM-JJ";
$vl_c_bsv_112=fa_recup_dico("bsv_112");$vl_c_bsv_112="Intitulé compte acteur";
$vl_c_bsv_113=fa_recup_dico("bsv_113");$vl_c_bsv_113="Code journal";
$vl_c_dico00051=fa_recup_dico('dico_00051');
$vl_c_dico00052=fa_recup_dico('dico_00052');
$vl_c_dico00053=fa_recup_dico("dico_00053");
$vl_c_dico00054=fa_recup_dico('dico_00054');
$vl_c_dico00055=fa_recup_dico("dico_00055");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_dico_00149=fa_recup_dico("dico_00149");
$vl_tc_composants=array($vl_c_id_fenetre);
$vl_c_menu_context="<popup id='pop_ecritures'>";
$vl_c_menu_context.="<menuitem class='menuitem-iconic ad09' label='$vl_c_dico_00106' tooltiptext='$vl_c_dico_00106' oncommand='fa_infos_colonnes_arbre_recup(\"$vl_c_id_fenetre\",\"arbre_des_ca\");'/><menuseparator />";
$vl_c_menu_context.=<<<EOT
  <menuitem label="$vl_c_dico00055" tooltiptext='$vl_c_dico_00055' oncommand="pf_recup_sql('ods');" class="menuitem-iconic ac12" collapsed="true"/>
  <menuitem label="$vl_c_dico00052" tooltiptext='$vl_c_dico_00052' oncommand="pf_recup_sql('rdf');" class="menuitem-iconic ak02" collapsed="true"/>
  <menuitem label="$vl_c_dico00053" tooltiptext='$vl_c_dico_00053' oncommand="pf_recup_sql('htm');" class="menuitem-iconic ak03" collapsed="true"/>
  <menuitem label="$vl_c_dico00054" tooltiptext='$vl_c_dico_00054' disabled="true" oncommand="pf_recup_sql('xml');" class="menuitem-iconic ak04" collapsed="true"/>
  <menuitem dir="reverse" label="$vl_c_dico00051 " tooltiptext='$vl_c_dico_00051 ' oncommand="pf_export_excel_02('$vl_c_type-01');" class="menuitem-iconic ak05"/>
EOT;
$vl_c_menu_context.="</popup>";
include("_graal_header_winxul.inc.php");
echo <<<END
<window context="graal_cp00" title="$vl_c_bsv_100" id="_win_fen_ca_03" onload="fa_aa(this);pf_aa_init();" onunload="pf_onunload();" $c_xmlns>
$vl_c_graal_cp00
$vl_c_menu_context
END;
include("_graal_visites.inc.php");
include("js/_graal_stats_fr_03.js.php");
include_once("js/_graal_01.js.php");
echo <<<END
<vbox id="bbb_ove_01" >
<hbox flex="1">
END;
  $id_pref="";$id_deb="bbo_tb_deb";$id_fin="bbo_tb_fin";$trimestres="oui";include ("_graal_inc_choix_periodes_01.php");
echo <<<END
 <toolbarbutton class="table-rafraichir" id="bbo_top_raf01" oncommand="pf_approximatif();"/>
    <toolbarbutton id="bt_info_fen" class="ab19" label="$vl_c_dico_00149"  crop="end" dir="normal" oncommand="fa_infos_fenetre('$vl_c_id_fenetre')" />  
</hbox>
</vbox>
<hbox flex="100" class="overflow_01">
  
  <tree id="arbre_des_ca" enableColumnDrag="true" flex="1" flags="" ref="*" querytype="xml" datasources="" seltype="single" context="pop_ecritures">
  <treecols>
 <treecol id="genre" label="Genre" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="numero" label="Numéro" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="code" label="Code" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="description"  label="Désignation"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="montant" class="droite" label="Montant HT" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="art_cleunik" class="droite" hidden="true" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="date_document" label="Date" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="act_cleunik" class="droite" hidden="true" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="nom_acteur" label="Acteur" /><splitter class="tree-splitter" resizeafter="grow"/>
 </treecols>
 <template><query expr="*"/><action>
 <treechildren>

 <treeitem container="true" uri="?" seltype="single">
 <treerow>
 <treecell properties="?properties" label="?genre" />
 <treecell properties="?properties" label="?numero" />
 <treecell properties="?properties" label="?code"/>
 <treecell properties="?properties" label="?description"/>
 <treecell properties="?properties" label="?montant"/>
 <treecell properties="?properties" label="?art_cleunik"/>
 <treecell properties="?properties" label="?date_document"/>
 <treecell properties="?properties" label="?act_cleunik"/>
 <treecell properties="?properties" label="?nom_acteur"/>
 
 </treerow>
 </treeitem>
 </treechildren>
 </action></template>
 </tree>
  
  
  </hbox> 
</window>
END;
?>
