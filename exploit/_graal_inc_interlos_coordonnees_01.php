<?php
_graal_requete_charge_varlib($vl_c_id_inc_interlos_coordonnees_01,$vl_e_uti_cleunik);
$vl_c_aan_001=fa_recup_dico("aan_001");
$vl_c_aan_005=fa_recup_dico("aan_005");
$vl_c_aan_006=fa_recup_dico("aan_006");
$vl_c_aan_007=fa_recup_dico("aan_007");
$vl_c_aan_008=fa_recup_dico("aan_008");
$vl_c_aan_009=fa_recup_dico("aan_009");
$vl_c_aan_010=fa_recup_dico("aan_010");
$vl_c_aan_011=fa_recup_dico("aan_011");
$vl_c_aan_012=fa_recup_dico("aan_012");
$vl_c_aan_013=fa_recup_dico("aan_013");
$vl_c_aan_014=fa_recup_dico("aan_014");
$vl_c_aan_015=fa_recup_dico("aan_015");
$vl_c_aan_016=fa_recup_dico("aan_016");
$vl_c_aan_017=fa_recup_dico("aan_017");
$vl_c_aan_018=fa_recup_dico("aan_018");
$vl_c_aan_019=fa_recup_dico("aan_019");
$vl_c_aan_021=fa_recup_dico("aan_021");
$vl_c_aan_022=fa_recup_dico("aan_022");
$vl_c_aan_023=fa_recup_dico("aan_023");
$vl_c_aan_024=fa_recup_dico("aan_024");
switch ($vl_c_id_inc_interlos_coordonnees_01){
  case "Div_00154": $vl_c_id_fen_fax="Fen_00155";$vl_c_id_fen_tel="Fen_00147";$vl_c_id_fen_courriel="Fen_00162";$vl_c_id_fen_mesinst="Fen_00697";break;  //  Interlocuteurs des Membres de l'entreprise
  case "Div_00155": $vl_c_id_fen_fax="Fen_00156";$vl_c_id_fen_tel="Fen_00149";$vl_c_id_fen_courriel="Fen_00163";$vl_c_id_fen_mesinst="Fen_00698";break;  //  prospects clients
  case "Div_00156": $vl_c_id_fen_fax="Fen_00157";$vl_c_id_fen_tel="Fen_00150";$vl_c_id_fen_courriel="Fen_00164";$vl_c_id_fen_mesinst="Fen_00699";break;  //  prospects fournisseurs
  case "Div_00157": $vl_c_id_fen_fax="Fen_00158";$vl_c_id_fen_tel="Fen_00151";$vl_c_id_fen_courriel="Fen_00165";$vl_c_id_fen_mesinst="Fen_00700";break;  //  clients
  case "Div_00158": $vl_c_id_fen_fax="Fen_00159";$vl_c_id_fen_tel="Fen_00152";$vl_c_id_fen_courriel="Fen_00166";$vl_c_id_fen_mesinst="Fen_00701";break;  //  fournisseurs
  case "Div_00159": $vl_c_id_fen_fax="Fen_00160";$vl_c_id_fen_tel="Fen_00153";$vl_c_id_fen_courriel="Fen_00167";$vl_c_id_fen_mesinst="Fen_00702";break;  //  autres acteurs
  case "Div_00160": $vl_c_id_fen_fax="Fen_00161";$vl_c_id_fen_tel="Fen_00154";$vl_c_id_fen_courriel="Fen_00168";$vl_c_id_fen_mesinst="Fen_00703";break;  //  acteurs indéterminés
  default:
    die;  
}
switch ($vl_c_id_inc_interlos_coordonnees_01) {
  case "Div_00154": $vl_c_telephone="Trait_00001";$vl_c_sms="Trait_00012";$vl_c_fax="Trait_00019";$vl_c_courtex="Trait_00026";$vl_c_courhtm="Trait_00033";$vl_c_chat="Fen_00696";break;  //  Interlocuteurs des Membres de l'entreprise
  case "Div_00155": $vl_c_telephone="Trait_00002";$vl_c_sms="Trait_00013";$vl_c_fax="Trait_00020";$vl_c_courtex="Trait_00027";$vl_c_courhtm="Trait_00034";$vl_c_chat="Fen_00696";break;  //  prospects clients
  case "Div_00156": $vl_c_telephone="Trait_00005";$vl_c_sms="Trait_00014";$vl_c_fax="Trait_00021";$vl_c_courtex="Trait_00028";$vl_c_courhtm="Trait_00035";$vl_c_chat="Fen_00696";break;  //  prospects fournisseurs
  case "Div_00157": $vl_c_telephone="Trait_00006";$vl_c_sms="Trait_00015";$vl_c_fax="Trait_00022";$vl_c_courtex="Trait_00029";$vl_c_courhtm="Trait_00036";$vl_c_chat="Fen_00696";break;  //  clients
  case "Div_00158": $vl_c_telephone="Trait_00009";$vl_c_sms="Trait_00016";$vl_c_fax="Trait_00023";$vl_c_courtex="Trait_00030";$vl_c_courhtm="Trait_00037";$vl_c_chat="Fen_00696";break;  //  fournisseurs
  case "Div_00159": $vl_c_telephone="Trait_00010";$vl_c_sms="Trait_00017";$vl_c_fax="Trait_00024";$vl_c_courtex="Trait_00031";$vl_c_courhtm="Trait_00038";$vl_c_chat="Fen_00696";break;  //  autres acteurs
  case "Div_00160": $vl_c_telephone="Trait_00011";$vl_c_sms="Trait_00018";$vl_c_fax="Trait_00025";$vl_c_courtex="Trait_00032";$vl_c_courhtm="Trait_00039";$vl_c_chat="Fen_00696";break;  //  acteurs indéterminés
  default:
    die;  
}
$bloc_boutons_tel="";
$bloc_boutons_fax="";
$bloc_boutons_courriels="";
$bloc_boutons_mesinst="";
//  Présence bloc boutons Téléphones
if ($vl_c_id_fen_tel=="000000000") {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_tel,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_boutons_tel.=('<hbox id="bloc_telephone"><label value="'.$vl_c_aan_005.'"/>');
  if ($vl_tb_droits[1]!=0){
    $bloc_boutons_tel.=('<toolbarbutton observes="broadcaster_01" class="aj15" id="tb_tel_01" tooltiptext="'.$vl_c_aan_006.'"  oncommand="pf_ouvre(\'telephone\',\'nouveau\');"/>');
  }          
  $bloc_boutons_tel.=('<toolbarbutton observes="broadcaster_01" class="aj14" id="tb_tel_02" tooltiptext="'.$vl_c_aan_007.'"  oncommand="pf_ouvre(\'telephone\',\'ouvrir\');"/></hbox><toolbarseparator />');
}
//  Présence bloc boutons Fax
if ($vl_c_id_fen_fax=='000000000') {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_fax,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_boutons_fax.='<hbox id="bloc_fax"><label value="'.$vl_c_aan_009.'"/>';
  if ($vl_tb_droits[1]!=0){
    $bloc_boutons_fax.='<toolbarbutton observes="broadcaster_01" class="al07" id="tb_fax_01" tooltiptext="'.$vl_c_aan_010.'"  oncommand="pf_ouvre(\'fax\',\'nouveau\')"/>';
  }          
  $bloc_boutons_fax.='<toolbarbutton observes="broadcaster_01" class="al03" id="tb_fax_02" tooltiptext="'.$vl_c_aan_011.'"  oncommand="pf_ouvre(\'fax\',\'ouvrir\');"/></hbox><toolbarseparator />';
}
//	Présence bloc boutons Courriels
if ($vl_c_id_fen_courriel=='000000000') {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_courriel,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_boutons_courriels.='<hbox id="bloc_courriel"><label value="'.$vl_c_aan_013.'"/>';
  if ($vl_tb_droits[1]!=0){
    $bloc_boutons_courriels.='<toolbarbutton observes="broadcaster_01" class="al10" id="tb_courriel_01" tooltiptext="'.$vl_c_aan_014.'"  oncommand="pf_ouvre(\'courriel\',\'nouveau\')"/>';
  }          
  $bloc_boutons_courriels.='<toolbarbutton observes="broadcaster_01" class="aj18" id="tb_courriel_02" tooltiptext="'.$vl_c_aan_015.'"  oncommand="pf_ouvre(\'courriel\',\'ouvrir\');"/></hbox><toolbarseparator />';
}
//  Présence bloc bouton messagerie instantanée
if ($vl_c_id_fen_mesinst=='000000000') {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_mesinst,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_boutons_mesinst.='<hbox id="bloc_mesinst"><label value="'.$vl_c_aan_022.'"/>';
  if ($vl_tb_droits[1]!=0){
    $bloc_boutons_mesinst.='<toolbarbutton observes="broadcaster_01" class="xx04" id="tb_mesinst_01" tooltiptext="'.$vl_c_aan_023.'"  oncommand="pf_ouvre(\'mesinst\',\'nouveau\')"/>';
  }          
  $bloc_boutons_mesinst.='<toolbarbutton observes="broadcaster_01" class="xx03" id="tb_mesinst_02" tooltiptext="'.$vl_c_aan_024.'"  oncommand="pf_ouvre(\'mesinst\',\'ouvrir\');"/></hbox><toolbarseparator />';
}
if ($vl_c_telephone=='000000000') {$vl_tb_droits[0]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_telephone,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_action_telephone='<toolbarbutton observes="broadcaster_01" class="ai06" id="tb_tel_03" tooltiptext="'.$vl_c_aan_008.'"  oncommand="pf_ouvre(\'telephone\',\'telephoner\');"/>';
}
if ($vl_c_sms=="000000000") {$vl_tb_droits[0]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_sms,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_action_sms='<toolbarbutton observes="broadcaster_01" class="aj04" id="tb_tel_04" tooltiptext="'.$vl_c_aan_012.'"  oncommand="pf_ouvre(\'telephone\',\'sms\');"/>';
}
if ($vl_c_fax=="000000000") {$vl_tb_droits[0]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_fax,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_action_fax='<toolbarbutton observes="broadcaster_01" class="aa01" id="tb_fax_03" tooltiptext="'.$vl_c_aan_019.'"  oncommand="pf_ouvre(\'fax\',\'envoyer\');"/>';
}
if ($vl_c_courtex=="000000000") {$vl_tb_droits[0]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_courtex,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_action_cour_tex='<toolbarbutton observes="broadcaster_01" class="ah09" id="tb_courriel_03" tooltiptext="'.$vl_c_aan_016.'"  oncommand="pf_ouvre(\'courriel\',\'envoyer_texte\')"/>';
}
if ($vl_c_courhtm=="000000000") {$vl_tb_droits[0]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_courhtm,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_action_cour_htm='<toolbarbutton observes="broadcaster_01" class="aj20" id="tb_courriel_04" tooltiptext="'.$vl_c_aan_017.'" oncommand="pf_ouvre(\'courriel\',\'envoyer_html\')"/>';
}
if ($vl_c_chat=="000000000") {$vl_tb_droits[0]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_chat,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_action_chat='<toolbarbutton observes="broadcaster_01" class="ag06" id="tb_chat_01" tooltiptext="'.$vl_c_aan_021.'" oncommand="pf_ouvre(\'chat\',\'nouveau\')"/>';
}

echo <<<END
  <vbox id="bar_interlos_01" flex="1">
      <toolbar grippyhidden="true">
				<vbox>
					<hbox>
		  		  <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_aan_001" oncommand="pf_affiche_donnees_interlo();"/>
		        <toolbarseparator />
		        $bloc_boutons_tel
		        $bloc_boutons_mesinst
		        $bloc_boutons_courriels
		        $bloc_boutons_fax
					</hbox>
	        <hbox id="bloc_actions">
	          <label value="$vl_c_aan_018"/>
	          $bloc_action_telephone
	          $bloc_action_sms
	          $bloc_action_fax
	          $bloc_action_cour_tex
	          $bloc_action_cour_htm
	          $bloc_action_chat
	        </hbox>
				</vbox>	
      </toolbar>    
      <tree id="arbre_interlo" flex="20" hidecolumnpicker="true" >
        <treecols>
          <treecol id="arbre_interlo_col01"  class="colname" primary="true" flex="2"  />
          <splitter hidden="true" class="tree-splitter" />
          <treecol hidden="true" id="arbre_interlo_col02"/>
					<treecol hidden="true" id="arbre_interlo_col03" flex="1" />
        </treecols>
        <treechildren id="fils_arbre_interlo" onclick="pf_sel_arbre_interlo()">
        </treechildren>
      </tree>
  </vbox>
END;
?>
