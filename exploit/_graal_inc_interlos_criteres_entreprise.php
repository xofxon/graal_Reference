<?php
//  Tableau des critères des interlocuteurs acteurs (vue "entreprise")
_graal_requete_charge_varlib($vl_c_id_inc_interlos_criteres_entreprise,$vl_e_uti_cleunik);
$vl_c_bcn_004=fa_recup_dico("bcn_004");
$vl_c_bcn_005=fa_recup_dico("bcn_005");
$vl_c_bcn_006=fa_recup_dico("bcn_006");
$vl_c_bcn_007=fa_recup_dico("bcn_007");
$vl_c_mes_00007=fa_recup_dico("mess_00007");
$vl_c_mes_00008=fa_recup_dico("mess_00008");
switch ($vl_c_id_inc_interlos_criteres_entreprise){
  case "Div_00065": $vl_c_id_fen_criteres="Fen_00320";break;  //  Membres de l'entreprise
  case "Div_00287": $vl_c_id_fen_criteres="Fen_00321";break;  //  prospects clients
  case "Div_00288": $vl_c_id_fen_criteres="Fen_00322";break;  //  prospects fournisseurs
  case "Div_00289": $vl_c_id_fen_criteres="Fen_00323";break;  //  clients
  case "Div_00290": $vl_c_id_fen_criteres="Fen_00324";break;  //  fournisseurs
  case "Div_00291": $vl_c_id_fen_criteres="Fen_00325";break;  //  autres acteurs
  case "Div_00292": $vl_c_id_fen_criteres="Fen_00326";break;  //  acteurs indéterminés
  default:die;  
}
echo <<<END
<vbox id="bcn_interlos_criteres_entreprise" flex="1">
     <toolbar grippyhidden="true">
	  <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_mes_00007" oncommand="pf_affiche_donnees_criteres_entreprise();"/>
    <label value="$vl_c_bcn_007"/>
END;
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_criteres,$vl_e_uti_cleunik);
if ($presence_bloc_interlo_entreprise=="false"){
	$vl_tb_droits[0]=0;
}
if ($vl_tb_droits[0]!=0){
echo <<<END
    <hbox id="bloc_interlo_entreprise">
      <toolbarbutton class="ag17" observes="broadcaster_01" tooltiptext="$vl_c_mes_00008" oncommand="pf_ouvre('critere_entreprise','ouvrir');"/>
    </hbox>
END;
}
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_context_00='<popupset><popup id="pop_criteres_des_interlos_entreprise"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'criteres_des_interlos_entreprise\');" /></popup></popupset>';
echo <<<END
$vl_c_context_00
  </toolbar>
   <tree id="criteres_des_interlos_entreprise" enableColumnDrag="true" flex="2" flags="" ref="*" querytype="xml" datasources="" seltype="single" context="pop_criteres_des_interlos_entreprise">
     <treecols>
       <treecol id="int_cleunik_entreprise$affixe_colonne_criteres_des_interlos_entreprise" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
       <treecol id="choix_cleunik_entreprise$affixe_colonne_criteres_des_interlos_entreprise" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
       <treecol id="critere_cleunik_entreprise$affixe_colonne_criteres_des_interlos_entreprise" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="critere_denomination_entreprise$affixe_colonne_criteres_des_interlos_entreprise" label="$vl_c_bcn_004" sort="?critere_denomination"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="choix_code_entreprise$affixe_colonne_criteres_des_interlos_entreprise" label="$vl_c_bcn_005" sort="?choix_code"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="choix_valeur_texte_01_entreprise$affixe_colonne_criteres_des_interlos_entreprise" label="$vl_c_bcn_006"  sort="?choix_valeur_texte_01"/><splitter class="tree-splitter" resizeafter="grow"/>
     </treecols>
     <template><query expr="*"/><action>
       <treechildren>
         <treeitem uri="?" seltype="single">
           <treerow>
             <treecell label="?int_cleunik"/>
             <treecell label="?choix_cleunik"/>
             <treecell label="?critere_cleunik"/>
             <treecell label="?critere_denomination"/>
             <treecell label="?choix_code"/>
             <treecell label="?choix_valeur_texte_01"/>
           </treerow>
         </treeitem>
       </treechildren>
     </action></template>
   </tree>
 </vbox>
END;
?>
