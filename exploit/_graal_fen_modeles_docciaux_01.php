<?php
include("_graal_header_xul.inc.php");
$vl_c_win_id="_graal_modeledocciaux_01";
$vl_c_type=fa_recup_param('type','texte');
$_graal_typedoc=fa_recup_param('typedocs','?');
$vl_e_doc_cleunik=fa_recup_param('doc_cleunik','A');
$vl_c_genre=fa_recup_param('genre','utilis');
$vl_e_portee_cleunik=fa_recup_param('portee_cleunik','0');
switch ($vl_c_type){
  case "texte":
    switch ($_graal_typedoc){
      case "101"  : $vl_c_id_fenetre="Fen_00718";$vl_c_id_inc_note="Div_00521";break;  //Modèles offcli Entêtes
      case "102"  : $vl_c_id_fenetre="Fen_00719";$vl_c_id_inc_note="Div_00522";break;  //Modèles offcli Pieds
      case "111"  : $vl_c_id_fenetre="Fen_00720";$vl_c_id_inc_note="Div_00523";break;  //Modèles cdecli Entêtes
      case "112"  : $vl_c_id_fenetre="Fen_00721";$vl_c_id_inc_note="Div_00524";break;  //Modèles cdecli Pieds
      case "121"  : $vl_c_id_fenetre="Fen_00722";$vl_c_id_inc_note="Div_00525";break;  //Modèles Livcli Entetes
      case "122"  : $vl_c_id_fenetre="Fen_00723";$vl_c_id_inc_note="Div_00526";break;  //Modèles Livcli Pieds
      case "131"  : $vl_c_id_fenetre="Fen_00724";$vl_c_id_inc_note="Div_00527";break;  //Modèles faccli Entêtes
      case "132"  : $vl_c_id_fenetre="Fen_00725";$vl_c_id_inc_note="Div_00528";break;  //Modèles faccli Pied
      case "141"  : $vl_c_id_fenetre="Fen_00726";$vl_c_id_inc_note="Div_00529";break;  //Modèles ddefou Entetes
      case "142"  : $vl_c_id_fenetre="Fen_00727";$vl_c_id_inc_note="Div_00530";break;  //Modèles ddefou Pieds
      case "151"  : $vl_c_id_fenetre="Fen_00728";$vl_c_id_inc_note="Div_00531";break;  //Modèles cdefou Entêtes
      case "152"  : $vl_c_id_fenetre="Fen_00729";$vl_c_id_inc_note="Div_00532";break;  //Modèles cdefou Pieds

      case "161"  : $vl_c_id_fenetre="Fen_01098";$vl_c_id_inc_note="Div_00525";break;  //Modèles retcli Entetes
      case "162"  : $vl_c_id_fenetre="Fen_01099";$vl_c_id_inc_note="Div_00526";break;  //Modèles retcli Pieds
      case "171"  : $vl_c_id_fenetre="Fen_01100";$vl_c_id_inc_note="Div_00527";break;  //Modèles retfou Entêtes
      case "172"  : $vl_c_id_fenetre="Fen_01101";$vl_c_id_inc_note="Div_00528";break;  //Modèles retfou Pied
      case "181"  : $vl_c_id_fenetre="Fen_01102";$vl_c_id_inc_note="Div_00529";break;  //Modèles recfou Entetes
      case "182"  : $vl_c_id_fenetre="Fen_01103";$vl_c_id_inc_note="Div_00530";break;  //Modèles recfou Pieds
      case "191"  : $vl_c_id_fenetre="Fen_01104";$vl_c_id_inc_note="Div_00531";break;  //Modèles facfou Entêtes
      case "192"  : $vl_c_id_fenetre="Fen_01105";$vl_c_id_inc_note="Div_00532";break;  //Modèles facfou Pieds
      case "201"  : $vl_c_id_fenetre="Fen_01132";$vl_c_id_inc_note="Div_00594";break;  //Modèles facfou Entêtes
      case "202"  : $vl_c_id_fenetre="Fen_01133";$vl_c_id_inc_note="Div_00595";break;  //Modèles facfou Pieds

      case "902"  : $vl_c_id_fenetre="Fen_00736";$vl_c_id_inc_note="Div_00539";break;  //Bloc de désincription pour les emailing
      case "904"  : $vl_c_id_fenetre="Fen_00736";$vl_c_id_inc_note="Div_00539";break;  //Bloc de sondage pour les emailing
		  default : fa_redirige("acces_interdit");break;
    }
		break;
	case "html":
    switch ($_graal_typedoc){
	    case "123"  : $vl_c_id_fenetre="Fen_00730";$vl_c_id_inc_note="Div_00533";break;  //Modèles palettes Entêtes (html)
	    case "124"  : $vl_c_id_fenetre="Fen_00731";$vl_c_id_inc_note="Div_00534";break;  //Modèles Palettes Pied (html)
	    case "900"  : $vl_c_id_fenetre="Fen_00732";$vl_c_id_inc_note="Div_00535";break;  //Conditions générales de vente CGV (html)
	    case "901"  : $vl_c_id_fenetre="Fen_00737";$vl_c_id_inc_note="Div_00538";//Bloc de désincription pour les emailing (html)

	    $desinscription_emailing=<<<EOT
<toolbarbutton type="menu-button" class="ac06" observes="broadcaster_02" id="tb_desinscription" tooltiptext="Adresse de désinscription">
  <menupopup>
  <menuitem label="Adresse désinscription" oncommand="pf_insere_desinscription();"/>
  </menupopup></toolbarbutton>
EOT;
	    break;
	    case "903"  : $vl_c_id_fenetre="Fen_00737";$vl_c_id_inc_note="Div_00538";//Bloc de sondage pour les emailing (html)
	    $sondag_emailing=<<<EOT
<toolbarbutton type="menu-button" class="ac06" observes="broadcaster_02" id="tb_desinscription" tooltiptext="Adresse de sondage">
  <menupopup>
  <menuitem label="Adresse sondage" oncommand="pf_insere_sondage();"/>
  </menupopup></toolbarbutton>
EOT;
		break;
		  default : fa_redirige("acces_interdit");break;
		}
		break;
  default : fa_redirige("acces_interdit");break;
}
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
$vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=1;
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_baf_100=fa_recup_dico("baf_100");
$vl_c_baf_103=fa_recup_dico("baf_103");
$vl_c_baf_104=fa_recup_dico("baf_104");
$vl_c_dico_00004=fa_recup_dico('dico_00004');
$vl_c_dico_00106=fa_recup_dico("dico_00106");
include("_graal_header_winxul.inc.php");
$vl_tc_composants=array($vl_c_id_inc_note);
echo <<<END
<window context="graal_cp00" _graal_id_fenetre="$vl_c_id_fenetre" id="$vl_c_win_id" title="$vl_c_baf_100" onload="fa_aa(this);pf_etat_fen('ini')" $c_xmlns>
$vl_c_graal_cp00
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_note_01.js.php");
include_once("js/_graal_doc_07.js.php");
switch ($vl_c_type){
  case "html":
    include("js/_graal_editeur_wysiwyg.js.php");
    include("js/_graal_03.js.php");
    break;
}
echo <<<END
<script type="application/x-javascript" src="js/sha1.js" />
<broadcasterset>
  <broadcaster id="broadcaster_01" />
</broadcasterset>
<keyset>
  <key id="key_masque_tab" modifiers="accel" key="A" oncommand="pf_cache_tab();"/>
</keyset>
<popupset>
  <popup id="bqacp01">
  <menuitem label="Cacher la partie haute" key="key_masque_tab" oncommand="pf_cache_tab()"/>
  </popup>
  <popup id="pp_actions">
    <menuitem class="menuitem-iconic ad09" label="$vl_c_dico_00106" oncommand="fa_infos_colonnes_arbre_recup('$vl_c_id_fenetre','arbre_des_notes');" />
   </popup>
</popupset>
<vbox flex="1" id="vb_tableau">
<_graal_conteneur id="bt_actualiser" context="bqacp01" label="$vl_c_baf_102" _graal_typedoc="$_graal_typedoc" _graal_genre ="modeles_courriels" _graal_lesquels="$vl_c_quelsdocs"/>
END;
include("_graal_inc_note_01.php");
echo <<<END
</vbox>
<splitter></splitter>
<hbox flex="2">
  <vbox flex="1">
    <hbox >
      <vbox flex="1">
        <label control="la_titre" value="$vl_c_baf_103"/>
        <textbox observes="broadcaster_01" id="tb_titre" width="300"   />
      </vbox>
	    <vbox flex="2">
        <label control="la_descriptif_sommaire" value="$vl_c_baf_104"/>
        <textbox observes="broadcaster_01" id="tb_descriptif_sommaire"   width="400" />
      </vbox>
    </hbox>
END;
switch ($vl_c_type){
  case "html":
    echo('<vbox id="boiteaoutils">');
    include("_graal_inc_baroutils_01.php");
    include("_graal_inc_baroutils_02.php");
    echo('</vbox>');
    break;
}
echo <<<END
    <deck id="workarea" flex="2">
			<html:iframe onload="event.stopPropagation();" id="content" flex="2" src="_graal_page_blanche_02.php" />
			<vbox flex="2"><textbox flex="1" multiline="true" id="tb_source"/><button collapsed="true" label="Modifier le html" oncommand="pf_retro();"/></vbox>
    </deck>

		</vbox>
		</hbox>
      <hbox  id="boutons_standards" >
END;
include("_graal_inc_boutons_01.php");
echo <<<END
</hbox>
 </window>
END;
?>
