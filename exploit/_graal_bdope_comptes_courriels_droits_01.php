<?php 
include("_graal_header_txt.inc.php");
$t_origines_ok=array();
$t_origines_ok[0]="_graal_fen_comptes_courriels_droits_01";
fa_acces_script();
$vf_c_action=fa_recup_param('vf_c_action','??????');
$vl_e_uti_cleunik =intval(fa_recup_param('vl_e_uti_cleunik','0')); 
$vl_e_uticptbal_cleunik=intval(fa_recup_param('vl_e_uticptbal_cleunik','0'));
$vl_e_droits_proprio=intval(fa_recup_param('vl_e_droits_proprio','31'));
$vf_c_echo=$vf_c_action;
switch (TRUE) {
  case $vf_c_action=='??????':
    exit;
    break;    
  case $vf_c_action=='supprimer': 
    $sql_req = "DELETE FROM _droits_cpt_bal WHERE uticptbal_cleunik=$vl_e_uticptbal_cleunik AND uti_cleunik=$vl_e_uti_cleunik";
    $vf_c_echo=_graal_exec_requete($sql_req);
    break;
  case $vf_c_action=='ajouter':
    /* 1 -> Propriétaire, 2 -> Lecture, 4 -> Modification -> 8 -> Suppression 16 -> accès en utilisation*/
    $droits_groupe=0;
    $droits_lambda=0;
    $sql_req = "INSERT INTO _droits_cpt_bal set uticptbal_cleunik=$vl_e_uticptbal_cleunik,uti_cleunik=$vl_e_uti_cleunik,droits_proprio=$vl_e_droits_proprio,droits_groupe=$droits_groupe,droits_lambda =$droits_lambda" ;
    $vf_c_echo=_graal_exec_requete($sql_req);
    break;
  case $vf_c_action=='modifier':
    $sql_req = "update _droits_cpt_bal set droits_proprio=$vl_e_droits_proprio where uticptbal_cleunik=$vl_e_uticptbal_cleunik AND uti_cleunik=$vl_e_uti_cleunik";
    $vf_c_echo=_graal_exec_requete($sql_req);
    break;
} 
_graal_ferme_connexion();
echo $vf_c_echo;
echo $sql_req;
?>
