<?php
include("_graal_header_xul.inc.php");
$vl_e_uti_cleunik =intval(fa_recup_session("vs_uti_cleunik","0"));
$vl_e_art_cleunik=intval(fa_recup_param("vl_e_art_cleunik","-1"));
$vl_e_catcompta_cleunik=intval(fa_recup_param("vl_e_catcompta_cleunik","-1"));

$vl_c_id_fenetre="Fen_00656";
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_b_acces=$vl_tb_droits[0];
if ($vl_e_catcompta_cleunik!=-1) {
  $vl_b_modif=$vl_tb_droits[2];
  $vl_b_suppr=$vl_tb_droits[3];
} else {
  $vl_b_ajout=$vl_tb_droits[1];
  $vl_b_modif=0;
  $vl_b_suppr=0;
}
$vl_b_impri=$vl_tb_droits[4];
if ($vl_b_acces==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);
$vl_c_boz_100=fa_recup_dico("boz_100");
$vl_c_boz_101=fa_recup_dico("boz_101");
$vl_c_boz_102=fa_recup_dico("boz_102");
$vl_c_boz_103=fa_recup_dico("boz_103");
$vl_c_boz_104=fa_recup_dico("boz_104");  
$vl_c_boz_105=fa_recup_dico("boz_105");
$vl_c_boz_106=fa_recup_dico("boz_106");
$vl_c_boz_107=fa_recup_dico("boz_107");
$vl_c_boz_108=fa_recup_dico("boz_108");
$vl_c_boz_109=fa_recup_dico("boz_109");
$vl_c_boz_110=fa_recup_dico("boz_110");
$vl_c_boz_111=fa_recup_dico("boz_111");
$vl_c_boz_112=fa_recup_dico("boz_112");
$vl_c_boz_113=fa_recup_dico("boz_113");
$vl_c_boz_114=fa_recup_dico("boz_114");
$vs_envan=intval(fa_recup_session('vs_envan','0'));
switch ($vs_envan){
	case 0:
		$tpf_hidden="true";
		$tpf_01_hidden="true";
		break;
	case 1:
		$tpf_01_hidden="true";
		break;
	case 2:
	default:
		break;
}
if ($vl_e_art_cleunik!=-1){
  $ret=_graal_requete_article($vl_e_art_cleunik);
  $vl_c_code=$ret[0];
  $vl_c_mnemotechnique=$ret[1];
  $vl_c_description=$ret[2]; 
}
include ("_graal_brik_menulist_categories_compta.php");
if($vl_e_catcompta_cleunik!=-1) {
  $exception="SELECT catcompta_cleunik FROM _param_categories_compta where catcompta_cleunik<>$vl_e_catcompta_cleunik";
} else {
  $exception="select catcompta_cleunik from _art_compta where art_cleunik=$vl_e_art_cleunik";
}

$ml_categorie_compta=fa_brik_menulist_categorie_compta("0","ml_categorie_compta",true,$exception);
include("_graal_header_winxul.inc.php");
echo <<<END
<window title="$vl_c_boz_103" id="_win_fen_art_compta" onload="fa_aa(this);pf_aa_init();" $c_xmlns>
<broadcasterset><broadcaster id="broadcaster_01" /></broadcasterset>
$vl_c_graal_cp00
END;
include_once("js/_graal_01.js.php");
include("js/_graal_art_compta_01.js.php");
echo <<<END
<vbox id="hbox_panneaudegauche" flex="1">
  <groupbox id="groupe_article">
    <caption><label value="$vl_c_boz_109"/></caption>
    <hbox>
      <label value="$vl_c_boz_106" />
      <textbox id="tb_code_art" value="$vl_c_code" disabled="true" />
      <label value="$vl_c_boz_107" />
      <textbox id="tb_code_mnemotechnique" value="$vl_c_mnemotechnique" disabled="true" />
      <label value="$vl_c_boz_108" />
      <textbox flex="2" id="tb_code_description" value="$vl_c_description" disabled="true" />
    </hbox>
  </groupbox>

<hbox>
<vbox id="box_boite_outils_xof_03" flex="1">
  <grid flex="1">
    <columns>
      <column flex="1"/>
      <column flex="10"/>
    </columns>
    <rows>
      <row>
        <label control="la_categorie_compta" value="$vl_c_boz_100"/>
        $ml_categorie_compta
      </row>
      <row>
        <label control="la_compte_vente" value="$vl_c_boz_101"/>
        <hbox>
          <toolbarbutton class="al02" observes="broadcaster_01" tooltiptext="$vl_c_boz_104" oncommand="pf_ouvre('pc_vente');"/>
          <textbox id="tb_code_vente" readonly="true" compte_vente="-1"/>
          <textbox id="tb_intitule_vente" readonly="true" flex="1"/>
        </hbox>
      </row>
      <row>
        <label control="la_compte_achat" value="$vl_c_boz_102"/>
        <hbox>
          <toolbarbutton class="al02" observes="broadcaster_01" tooltiptext="$vl_c_boz_105" oncommand="pf_ouvre('pc_achat');"/>
          <textbox id="tb_code_achat" readonly="true" compte_achat="-1"/>
          <textbox id="tb_intitule_achat" readonly="true" flex="1"/>
        </hbox>
      </row>
      <row>
        <label control="la_compte_taxes" value="$vl_c_boz_110"/>
        <hbox>
          <toolbarbutton class="al02" observes="broadcaster_01" tooltiptext="$vl_c_boz_111" oncommand="pf_ouvre('pc_taxes');"/>
          <textbox id="tb_code_taxes" readonly="true" compte_taxes="-1"/>
          <textbox id="tb_intitule_taxes" readonly="true" flex="1"/>
        </hbox>
      </row>
		<row hidden="$tpf_hidden">
        <label value="$vl_c_boz_113"/>
        <hbox>
          <toolbarbutton class="al02" observes="broadcaster_01" tooltiptext="$vl_c_boz_112" oncommand="pf_ouvre('pc_tpf');"/>
          <textbox id="tb_code_tpf" readonly="true" compte_tpf="-1"/>
          <textbox id="tb_intitule_tpf" readonly="true" flex="1"/>
        </hbox>
      </row>
     <row hidden="$tpf_01_hidden">
        <label value="$vl_c_boz_114"/>
        <hbox>
          <toolbarbutton class="al02" observes="broadcaster_01" tooltiptext="$vl_c_boz_112" oncommand="pf_ouvre('pc_tpf_01');"/>
          <textbox id="tb_code_tpf_01" readonly="true" compte_tpf_01="-1"/>
          <textbox id="tb_intitule_tpf_01" readonly="true" flex="1"/>
        </hbox>
      </row>
    </rows>
  </grid>
</vbox>
<vbox>
    </vbox>
  </hbox>
     <hbox id="boutons_standards">
END;
include("_graal_inc_boutons_01.php");
echo <<<END
    </hbox>

</vbox>
</window>
END;
?>

