<?php
include("_graal_header_xul.inc.php");
$vl_e_uti_cleunik=intval(fa_recup_session('vs_uti_cleunik','0'));
$vf_qui=intval(fa_recup_param('vf_qui','-1'));
switch ($vf_qui) {
  case -1:  //  modification de ses propres identifiants
    $vl_c_id_fenetre="Fen_00480";break;  
  default: //  Modification des identifiants d'un utilisateur donnÃ©
    $vl_c_id_fenetre="Fen_00481";break;
}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
$vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=0;
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_bfm_100=fa_recup_dico("bfm_100");
$vl_c_bfm_101=fa_recup_dico("bfm_101");
$vl_c_bfm_102=fa_recup_dico("bfm_102");
$vl_c_bfm_103=fa_recup_dico("bfm_103");
$vl_c_bfm_104=fa_recup_dico("bfm_104");
$vl_c_bfm_105=fa_recup_dico("bfm_105");
$vl_c_dico_00005=fa_recup_dico('dico_00005');
$vl_c_dico_00006=fa_recup_dico('dico_00006');
$vl_c_dico_00007=fa_recup_dico('dico_00007');
$vl_c_bout="";
$vl_c_bout.='<button tooltiptext ="'.$vl_c_dico_00005.' Ctrl+Shift+F5" keycode="k-enregistrer" id="bt_enregistrer" label="'.$vl_c_dico_00005.'" crop="end" dir="normal" oncommand="pf_validation(\'enregistrer\')" />';
$vl_c_bout.='<button tooltiptext ="'.$vl_c_dico_00006.' Ctrl+Shift+F6" keycode="k-annuler" id="bt_annuler" label="'.$vl_c_dico_00006.'" crop="end" dir="normal" oncommand="pf_etat_fen(\'annuler\');" /><button id="bt_sortir" label="'.$vl_c_dico_00007.'" crop="end" dir="normal" oncommand="pf_etat_fen(\'sortir\')" />';
$ks_01="";
$ks_01.='<keyset id="_graal_ks_01">';
$ks_01.='<key id="k-enregistrer" modifiers="control shift" keycode="VK_F5" oncommand="if(fa_est_grise(\'bt_enregistrer\')==true){return};pf_validation(\'enregistrer\');"/>';
$ks_01.='<key id="k-annuler" modifiers="control shift" keycode="VK_F6" oncommand="if(fa_est_grise(\'bt_annuler\')==true){return};pf_etat_fen(\'annuler\');"/>';
$ks_01.='<key id="k-sortir" modifiers="alt" keycode="VK_F4" oncommand="if(fa_est_grise(\'bt_sortir\')==true){return};pf_etat_fen(\'sortir\');"/>';
$ks_01.='</keyset>';
include("_graal_header_winxul.inc.php");
echo <<<END
<window context="graal_cp00" title="$vl_c_bfm_100" id="_graal_fen_modif_idcon_01" onload="fa_aa(this);pf_etat_fen('ini')" $c_xmlns>
$vl_c_graal_cp00
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_modif_idcon_01.js.php");
echo <<<END
<broadcasterset>
  <broadcaster id="broadcaster_01" />
</broadcasterset>
<hbox flex="1">
  <vbox id="bfm_id">
    <grid >
      <columns >
       <column/>
       <column/>
      </columns>
      <rows>
        <row >
          <label value="$vl_c_bfm_101"/>
          <textbox observes="broadcaster_01" id="tb_identifiant"   /> 
        </row>
        <row >
          <label value="$vl_c_bfm_102"/>
          <textbox observes="broadcaster_01" type="password" id="tb_motdepasse_old"   flex="1"/>
        </row>
        <row >
          <label value="$vl_c_bfm_103"/>
          <textbox observes="broadcaster_01" type="password" id="tb_motdepasse_neo_01"   flex="1"/>
        </row>
        <row >
          <label value="$vl_c_bfm_104"/>
          <textbox observes="broadcaster_01" type="password" id="tb_motdepasse_neo_02"   flex="1"/>
        </row>
      </rows>
    </grid>
    </vbox>
  <spacer/>
  <vbox id="boutons_standards" flex="0"> 
  $vl_c_bout
  $ks_01
  </vbox>
</hbox>    
</window>
END;
?>
