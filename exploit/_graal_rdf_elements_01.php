<?php
include("_graal_header_xml.inc.php");
define('EOL', "\r\n");
$vl_c_dico00008=fa_recup_dico("dico_00008");
$vl_c_dico00009=fa_recup_dico("dico_00009");
$vl_c_dico00010=fa_recup_dico("dico_00010");
$vl_c_dico00011=fa_recup_dico("dico_00011");
$vl_c_dico00012=fa_recup_dico("dico_00012");
$vl_c_dico00017=fa_recup_dico("dico_00017");
$vl_c_dico00030=fa_recup_dico("dico_00030");
$vl_c_dico00060=fa_recup_dico("dico_00060");
$vl_c_dico00061=fa_recup_dico("dico_00061");
$vl_e_obj_cleunik=intval(fa_recup_param('vl_e_obj_cleunik','0'));
$vl_e_langue=intval(fa_recup_param('vl_e_langue','120131'));  //  français par défaut
$sql_req = "SELECT _elements.fen_cleunik as fen_cleunik,_elements.ele_cleunik as ele_cleunik,_elements.titre AS titre,_elements_libelle.descriptif AS descriptif,_elements_libelle.commentaire AS commentaire,_elements.type_objet as type_objet FROM _elements left join _elements_libelle using(ele_cleunik) WHERE (_elements_libelle.langue=$vl_e_langue or _elements_libelle.langue is null) and _elements.fen_cleunik=$vl_e_obj_cleunik ORDER BY titre";
$result = _graal_requete_bd($sql_req);
echo(fa_xcree_entete_rdf());
  while ($row = mysql_fetch_assoc($result))
    {
      echo('<RDF:li>'.EOL);
      echo('<RDF:Description>');
      // parseType = indication pour le type des données, utile pour le tri sur la colonne
      echo('<row:fen_cleunik NC:parseType="Integer">'.fa_ent_xml($row['fen_cleunik']).'</row:fen_cleunik>');
      echo('<row:ele_cleunik NC:parseType="Integer">'.fa_ent_xml($row['ele_cleunik']).'</row:ele_cleunik>');
      echo('<row:titre>'.fa_ent_xml($row['titre']).'</row:titre>');
      echo('<row:descriptif>'.fa_ent_xml($row['descriptif']).'</row:descriptif>');
      echo('<row:commentaire>'.fa_ent_xml($row['commentaire']).'</row:commentaire>');
      echo('<row:type_objet>'.fa_ent_xml($row['type_objet']).'</row:type_objet>');
      switch ($row['type_objet'])
      {
        case 1:echo("<row:type_objet_clair>$vl_c_dico00008</row:type_objet_clair>");break;
        case 2:echo("<row:type_objet_clair>$vl_c_dico00009</row:type_objet_clair>");break;
        case 3:echo("<row:type_objet_clair>$vl_c_dico00011</row:type_objet_clair>");break;
        case 4:echo("<row:type_objet_clair>$vl_c_dico00012</row:type_objet_clair>");break;
        case 5:echo("<row:type_objet_clair>$vl_c_dico00017</row:type_objet_clair>");break;
        case 6:echo("<row:type_objet_clair>$vl_c_dico00030</row:type_objet_clair>");break;
        case 7:echo("<row:type_objet_clair>$vl_c_dico00060</row:type_objet_clair>");break;
        case 8:echo("<row:type_objet_clair>$vl_c_dico00061</row:type_objet_clair>");break;
        default:echo("<row:type_objet_clair>$vl_c_dico00010</row:type_objet_clair>");break;
      }
      echo('</RDF:Description>'.EOL);
      echo('</RDF:li>'.EOL);
    }
echo('</RDF:Bag>'.EOL);
echo('</RDF:RDF>'.EOL);
_graal_libere_requete_bd($result);
_graal_ferme_connexion();
?>
