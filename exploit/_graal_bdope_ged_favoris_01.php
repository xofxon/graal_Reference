<?php 
include("_graal_header_txt.inc.php");
$t_origines_ok=array();
$t_origines_ok[0]="_graal_fen_doc_07";
$t_origines_ok[1]="_graal_fen_favoris_partage_01";
$t_origines_ok[2]="_graal_fen_rech_piecesjointes_01";
$t_origines_ok[3]="_graal_fen_modeles_courriels_01";
$t_origines_ok[4]="_graal_fen_modeles_notes_01";
$t_origines_ok[5]="_graal_fen_note_01";
$t_origines_ok[6]="_graal_fen_pseudodocs_01";
fa_acces_script();
$vf_c_action=fa_recup_param('vf_c_action','??????');
$vl_doc_cleunik=intval(fa_recup_param('vl_doc_cleunik','-1'));
$vl_e_uti_cleunik=intval(fa_recup_session('vs_uti_cleunik','0'));
$vl_c_quoi=intval(fa_recup_param('vf_c_quoi','-1'));
$vl_e_uti_cleunik_partage=intval(fa_recup_param('vl_e_uti_cleunik_partage','-1'));
$vf_c_echo='';
$vl_mess_00013=fa_recup_session('mess_00013','');
$vl_mess_00014=fa_recup_session('mess_00014','');
$vl_mess_00015=fa_recup_session('mess_00015','');
$vl_mess_00016=fa_recup_session('mess_00016','');
switch (TRUE) {
  case $vf_c_action=='supprimer': 
    $sql_req = "DELETE FROM _documents_favoris WHERE doc_cleunik = $vl_doc_cleunik and uti_cleunik=$vl_e_uti_cleunik and genre=$vl_c_quoi";
    if(_graal_exec_requete($sql_req)=='ok') {$vf_c_echo=$vl_mess_00015;} else {$vf_c_echo=$vl_mess_00016;}
    break;
  case $vf_c_action=='ajouter':
    $sql_req = "REPLACE INTO _documents_favoris set doc_cleunik=$vl_doc_cleunik,uti_cleunik=$vl_e_uti_cleunik,genre=$vl_c_quoi;";
    if(_graal_exec_requete($sql_req)=='ok') {$vf_c_echo=$vl_mess_00013;} else {$vf_c_echo=$vl_mess_00014;}
    break;
  case $vf_c_action=='partager':
    $sql_req = "REPLACE INTO _documents_favoris set doc_cleunik=$vl_doc_cleunik,uti_cleunik=$vl_e_uti_cleunik_partage,genre=$vl_c_quoi;";
    $vf_c_echo=_graal_exec_requete($sql_req);
    if(_graal_exec_requete($sql_req)=='ok') {$vf_c_echo=$vl_mess_00013;} else {$vf_c_echo=$vl_mess_00014;}
    break;
  case $vf_c_action=='??????':
    $vf_c_echo=-1;
    break;    
} 
_graal_ferme_connexion();
echo $vf_c_echo;       
?>
