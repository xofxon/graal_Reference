<?php
include("_graal_header_xml.inc.php");
include("_graal_fonctions_cryptage.php");
define('EOL', "\r\n");
$vl_e_uticptbal_cleunik=intval(fa_recup_param('vl_e_uticptbal_cleunik','0'));
$vl_e_genre=intval(fa_recup_param('vl_e_genre','1'));
$sql_req = "SELECT _uti_cpt_bal.titre as titre,_uti_cpt_bal.compte AS compte FROM _uti_cpt_bal where uticptbal_cleunik=$vl_e_uticptbal_cleunik";
$result = _graal_requete_bd($sql_req);
$row = mysql_fetch_assoc($result);
$vl_c_comptexml_chiffre=fa_mcrypte("info_compte_courriel",$row['compte'],"déchiffrer");
$vl_c_xml=simplexml_load_string($vl_c_comptexml_chiffre);
switch ($vl_e_genre){
	case 1://	Compte courriel
		$vl_c_comptexml.='<titre data="'.fa_ent_xml($vl_c_xml->titre[0]->attributes()).'"/>';
		$vl_c_comptexml.='<smtp data="'.fa_ent_xml($vl_c_xml->smtp[0]->attributes()).'"/>';
		$vl_c_comptexml.='<nomemetteur data="'.fa_ent_xml($vl_c_xml->nomemetteur[0]->attributes()).'"/>';
		$vl_c_comptexml.='<emetteur data="'.fa_ent_xml($vl_c_xml->emetteur[0]->attributes()).'"/>';
		$vl_c_comptexml.='<from data="'.fa_ent_xml($vl_c_xml->from[0]->attributes()).'"/>';
		$vl_c_comptexml.='<adressereponse data="'.fa_ent_xml($vl_c_xml->adressereponse[0]->attributes()).'"/>';
		$vl_c_comptexml.='<cheminretour data="'.fa_ent_xml($vl_c_xml->cheminretour[0]->attributes()).'"/>';
		$vl_c_comptexml.='<adresseerreurs data="'.fa_ent_xml($vl_c_xml->adresseerreurs[0]->attributes()).'"/>';
		$vl_c_comptexml.='<adresseconfirmationlecture data="'.fa_ent_xml($vl_c_xml->adresseconfirmationlecture[0]->attributes()).'"/>';
		$vl_c_comptexml.='<serveurpop3 data="'.fa_ent_xml($vl_c_xml->serveurpop3[0]->attributes()).'"/>';
		$vl_c_comptexml.='<utilisateurpop3 data="'.fa_ent_xml($vl_c_xml->utilisateurpop3[0]->attributes()).'"/>';
		$vl_c_comptexml.='<motdepassepop3 data="bennon,on ne fait pas transiter le mot de passe comme ça"/>';
		$vl_c_comptexml.='<port_smtp data="'.fa_ent_xml($vl_c_xml->port_smtp[0]->attributes()).'"/>';
		$vl_c_comptexml.='<type_compte data="'.fa_ent_xml($vl_c_xml->type_compte[0]->attributes()).'"/>';
		$vl_c_comptexml.='<port_pop data="'.fa_ent_xml($vl_c_xml->port_pop[0]->attributes()).'"/>';
		$vl_c_comptexml.='<pop_ssl data="'.fa_ent_xml($vl_c_xml->pop_ssl[0]->attributes()).'"/>';
		break;
	case 2://	Compte fax
		$vl_c_comptexml.='<titre data="'.fa_ent_xml($vl_c_xml->titre[0]->attributes()).'"/>';
		$vl_c_comptexml.='<type_compte data="'.fa_ent_xml($vl_c_xml->type_compte[0]->attributes()).'"/>';
		$vl_c_comptexml.='<id data="'.fa_ent_xml($vl_c_xml->id[0]->attributes()).'"/>';
		$vl_c_comptexml.='<motdepasse data="bennon,on ne fait pas transiter le mot de passe comme ça"/>';
		$vl_c_comptexml.='<qualite data="'.fa_ent_xml($vl_c_xml->qualite[0]->attributes()).'"/>';
		$vl_c_comptexml.='<adresse_cr_fax data="'.fa_ent_xml($vl_c_xml->adresse_cr_fax[0]->attributes()).'"/>';
		break;
}
echo '<?xml version="1.0" encoding="utf-8"?><parametres>';
echo $vl_c_comptexml;
echo("</parametres>");
_graal_libere_requete_bd($result);
_graal_ferme_connexion();
?>
