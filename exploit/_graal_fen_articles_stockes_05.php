<?php
include("_graal_header_xul.inc.php");
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
$vl_c_genre=fa_recup_param('genre','tousss');
switch ($vl_c_genre){
  case "tousss": $vl_c_id_fenetre="Fen_00253";$vl_c_id_article_recherche="Div_00227";$vl_c_type_article_recherche="20";break;  //  Tous les articles
  case "favori": $vl_c_id_fenetre="Fen_00254";$vl_c_id_article_recherche="Div_00228";$vl_c_type_article_recherche="20";break;  //  Favoris
  case "achats": $vl_c_id_fenetre="Fen_00255";$vl_c_id_article_recherche="Div_00229";$vl_c_type_article_recherche="20";break;  //  Articles d'achats
  case "ventes": $vl_c_id_fenetre="Fen_00256";$vl_c_id_article_recherche="Div_00230";$vl_c_type_article_recherche="20";break;  //  Articles de vente
  case "fabric": $vl_c_id_fenetre="Fen_00257";$vl_c_id_article_recherche="Div_00231";$vl_c_type_article_recherche="20";break;  //  Articles de fabrication
  default: fa_redirige("acces_interdit");break; 
}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_bca_100=fa_recup_dico("bca_100");
$vl_c_bca_101=fa_recup_dico("bca_101");
$vl_c_bca_102=fa_recup_dico("bca_102");
$vl_c_bca_103=fa_recup_dico("bca_103");
$vl_c_bca_104=fa_recup_dico("bca_104");
$vl_c_bca_105=fa_recup_dico("bca_105");
$vl_c_bca_106=fa_recup_dico("bca_106");
$vl_c_bca_107=fa_recup_dico("bca_107");
$vl_c_bca_108=fa_recup_dico("bca_108");
$vl_c_bca_109=fa_recup_dico("bca_109");
$vl_c_bca_110=fa_recup_dico("bca_110");
$vl_c_bca_111=fa_recup_dico("bca_111");
$vl_c_bca_112=fa_recup_dico("bca_112");
$vl_c_bca_113=fa_recup_dico("bca_113");$vl_c_bca_113="Date Dernier PA";
$vl_c_bca_114=fa_recup_dico("bca_114");
$vl_c_bca_115=fa_recup_dico("bca_115");
$vl_c_bca_116=fa_recup_dico("bca_116");
$vl_c_bca_117=fa_recup_dico("bca_117");
$vl_c_bca_118=fa_recup_dico("bca_118");$vl_c_bca_118="Dernier PA";
$vl_c_bca_119=fa_recup_dico("bca_119");$vl_c_bca_119="Date dernier mouvement";

$vl_c_bca_120=fa_recup_dico("bca_120");$vl_c_bca_120="Identifiant chrono du mouvement";
$vl_c_bca_121=fa_recup_dico("bca_121");$vl_c_bca_121="Date et heure du mouvement";
$vl_c_bca_122=fa_recup_dico("bca_122");$vl_c_bca_122="Date et heure de saisie";
$vl_c_bca_123=fa_recup_dico("bca_123");$vl_c_bca_123="Quantité mouvement";
$vl_c_bca_124=fa_recup_dico("bca_124");$vl_c_bca_124="Stock après mouvement";
$vl_c_bca_125=fa_recup_dico("bca_125");$vl_c_bca_125="Dépôt";
$vl_c_bca_126=fa_recup_dico("bca_126");$vl_c_bca_126="Emplacement";
$vl_c_bca_127=fa_recup_dico("bca_127");$vl_c_bca_127="Origine";
$vl_c_bca_128=fa_recup_dico("bca_128");$vl_c_bca_128="Référence";
$vl_c_bca_129=fa_recup_dico("bca_129");$vl_c_bca_129="Valeur mouvement";
$vl_c_bca_130=fa_recup_dico("bca_130");$vl_c_bca_130="Type de mouvement";
$vl_c_bca_131=fa_recup_dico("bca_131");$vl_c_bca_131="PU du mouvement";
$vl_c_bca_132=fa_recup_dico("bca_132");$vl_c_bca_132="Exporter vers Excel";

$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_dico_00149=fa_recup_dico('dico_00149');
$vl_c_menu_context="<popup id='pop_art'>";
$vl_c_menu_context.="<menuitem class='menuitem-iconic ad09' label='$vl_c_dico_00106' oncommand='fa_infos_colonnes_arbre_recup(\"$vl_c_id_fenetre\",\"arbre_des_articles\");'/>";
$vl_c_menu_context.="<menuitem class='menuitem-iconic ai07' label='$vl_c_bca_108' oncommand='pf_ouvre(\"art\");' />";
$vl_tb_droits_mousto=_graal_requete_droits_fenetre("Fen_00565",$vl_e_uti_cleunik);
if ($vl_tb_droits_mousto[1]!=0){$vl_c_menu_context.="<menuitem class='menuitem-iconic ai07' label='$vl_c_bca_107' oncommand='pf_ouvre(\"mousto\");' />";}
$vl_tb_droits_mousto=_graal_requete_droits_fenetre("Fen_00569",$vl_e_uti_cleunik);
if ($vl_tb_droits_mousto[0]!=0){$vl_c_menu_context.="<menuitem class='menuitem-iconic ai07' label='$vl_c_bca_114' oncommand='pf_ouvre(\"mouvements\");' />";}
//$vl_c_menu_context.="<menuitem class='menuitem-iconic ai07' label='$vl_c_bca_115' disabled='true' />";
//$vl_c_menu_context.="<menuitem class='menuitem-iconic ai07' label='$vl_c_bca_116' disabled='true' />";
//$vl_c_menu_context.="<menuitem class='menuitem-iconic ai07' label='$vl_c_bca_117' disabled='true' />";
$vl_c_menu_context.="<menuitem class='menuitem-iconic ak05' label='$vl_c_bca_132' dir='reverse' oncommand='pf_export_excel_01();'/>";
$vl_c_menu_context.="</popup>";
include("_graal_header_winxul.inc.php");
$vl_tc_composants=array($vl_c_id_article_recherche);
echo <<<END
<window context="graal_cp00" _graal_genre="$vl_c_genre" title="$vl_c_bca_100" id="_win_fen_articles_stockes_05" onload="fa_aa(this);pf_aa_init()" $c_xmlns>
$vl_c_graal_cp00
$vl_c_menu_context
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_fen_articles_stockes_05.js.php");
include("js/_graal_articles_selection_01.js.php");
include("_graal_inc_articles_recherche_01.php");
echo <<<END

<vbox id="bbb_ove_01" >
<hbox flex="1">
  <groupbox flex="1">
  <hbox>  
  
  
			
			<label control="la_dateheureinventaire" value="$vl_c_bca_119"/>
			<datepicker type="popup" monthLeadingZero="true" dateLeadingZero="true" observes="broadcaster_01" id="tb_dateheuredermvt"/>  
  <caption><label value="$vl_c_bca_104" /></caption>
  <radiogroup id="rdg_etat" onclick="fa_approximatif_bbo();" flex="1">
       <hbox flex="1">
       <radio label="$vl_c_bca_109" value="1" />
       <spacer flex="1"/>
       <radio label="$vl_c_bca_110" selected="true" value="2"/>
       <spacer flex="1" />
       <radio label="$vl_c_bca_111" value="3"/>
       <spacer flex="1" />
       <radio label="$vl_c_bca_112" value="4"/>

       </hbox>
     </radiogroup>
     </hbox>
  </groupbox>
</hbox>
</vbox>
  <hbox flex="100" class="overflow_01">
  <iframe onload="event.stopPropagation();" id="graal_iframe_patiente" src="pagesparticulieres/travailencours.php" flex="1" collapsed="true"/>
  <tree id="arbre_des_articles" enableColumnDrag="true" flex="1" flags="" ref="*" querytype="xml" datasources="" seltype="single" context="pop_art">
  <treecols>
      <treecol hidden="true" ignoreincolumnpicker="true" id="mousto_tc_uti_cleunik" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol hidden="true" ignoreincolumnpicker="true" id="mousto_tc_int_cleunik" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="art_cleunik"  hidden="true" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/> 
  <treecol id="code" sort="?code" label="$vl_c_bca_101" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="mnemotech" sort="?mnemotechnique" label="$vl_c_bca_102" /><splitter class="tree-splitter" resizeafter="grow"/>
 
 <treecol id="description" sort="?description" label="$vl_c_bca_103" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="qte_stock" class="droite" sort="?val_qte_stock" label="$vl_c_bca_104" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="unite" class="centre" sort="?unite" label="$vl_c_bca_106" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="date_achat_clair" sort="?dateheure_der_achat" label="$vl_c_bca_113" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="dateheure_der_achat" sort="?dateheure_der_achat" hidden="true" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="derpa" class="droite" sort="?val_derpa" label="$vl_c_bca_118" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="val_derpa" class="droite" sort="?val_derpa" hidden="true" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
<treecol id="mousto_tc_mvt_cleunik" label="$vl_c_bca_120" sort="?mvt_cleunik"/><splitter class="tree-splitter" resizeafter="grow"/>

      
      <treecol id="mousto_tc_dateheuremvt" label="$vl_c_bca_121" sort="?dateheuremvt"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="mousto_tc_dateheuresaisie" label="$vl_c_bca_122" sort="?dateheuresaisie"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="mousto_tc_qte_mvt" class="droite" label="$vl_c_bca_123" sort="?qte_mvt"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="mousto_tc_qte_pos" class="droite" label="$vl_c_bca_124" sort="?qte_pos"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="mousto_tc_type_mvt" label="$vl_c_bca_130" sort="?type_mvt"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="mousto_tc_pu_mvt" class="droite" label="$vl_c_bca_131" sort="?pu_mvt"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="mousto_tc_mt_mvt" class="droite" label="$vl_c_bca_129" sort="?mt_mvt"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="mousto_tc_depot" label="$vl_c_bca_125" sort="?depot" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="mousto_tc_empla" label="$vl_c_bca_126" sort="?empla" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="mousto_tc_genre" label="$vl_c_bca_127" sort="?genre"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="mousto_tc_blocnotebrut" label="$vl_c_bca_128" sort="?blocnotebrut"/><splitter class="tree-splitter" resizeafter="grow"/>



 </treecols>
 <template><query expr="*"/><action>
 <treechildren>

 <treeitem container="true" uri="?" seltype="single">
 <treerow>
            <treecell label="?uti_cleunik"/>
            <treecell label="?int_cleunik"/>
 <treecell properties="?properties" label="?art_cleunik"/>
 <treecell properties="?properties" label="?code" />
 <treecell properties="?properties" label="?mnemotechnique"/>
 
 <treecell properties="?properties" label="?description"/>
 <treecell properties="?properties" label="?qte_stock"/>
 <treecell properties="?properties" label="?unite"/>
 <treecell properties="?properties" label="?date_achat_clair"/>
 <treecell properties="?properties" label="?dateheure_der_achat"/>
 <treecell properties="?properties" label="?derpa"/>
 <treecell properties="?properties" label="?val_derpa"/>
<treecell label="?mvt_cleunik"/>


            <treecell label="?dateheuremvt"/>
            <treecell label="?dateheuresaisie"/>
            <treecell label="?qte_mvt"/>
            <treecell label="?qte_pos"/>
            <treecell label="?type_mvt"/>
            <treecell label="?pu_mvt"/>
            <treecell label="?mt_mvt"/>
            <treecell label="?depot"/>
            <treecell label="?empla"/>
            <treecell label="?genre"/>
            <treecell label="?blocnotebrut"/>
 </treerow>
 </treeitem>
 </treechildren>
 </action></template>
 </tree>
  
 
  
 
 
  
  </hbox> 
 </window>
END;
?>
