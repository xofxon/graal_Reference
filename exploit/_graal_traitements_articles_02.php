<?php
include("_graal_header_xul.inc.php");
/*
# cas d'emploi nomenclatures
SELECT a1.code as codearticle,a1.description as description,a1.actif as articleactif FROM _article a1 left join _nomenclatures_fab on a1.art_cleunik=_nomenclatures_fab.art_cleunik_fils left join _art_tarifs on _art_tarifs.tar_cleunik=_nomenclatures_fab.base_valorisation where _art_tarifs.tarif_cleunik=10000712
# cas d'emploi de documents
SELECT a1.code as codearticle,a1.description as description,a1.actif as articleactif FROM _article a1 left join _offcli_lignes using(art_cleunik) where _offcli_lignes.tarif_cleunik=10000712
SELECT a1.code as codearticle,a1.description as description,a1.actif as articleactif FROM _article a1 left join _cdecli_lignes using(art_cleunik) where _cdecli_lignes.tarif_cleunik=10000712
SELECT a1.code as codearticle,a1.description as description,a1.actif as articleactif FROM _article a1 left join _livcli_lignes using(art_cleunik) where _livcli_lignes.tarif_cleunik=10000712
SELECT a1.code as codearticle,a1.description as description,a1.actif as articleactif FROM _article a1 left join _faccli_lignes using(art_cleunik) where _faccli_lignes.tarif_cleunik=10000712
*/
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
$vl_c_type=fa_recup_param('type','1');  //  1 Normal,2 Choix,3 Critere
$vl_c_genre=fa_recup_param('genre','0');  //  1 ventes, 2 achats
$vl_e_choix_cleunik=intval(fa_recup_param('vl_e_choix_cleunik','0'));
$vl_e_critere_cleunik=intval(fa_recup_param('vl_e_critere_cleunik','0'));
$vl_c_quoi=fa_recup_param('vl_c_quoi','');
$vl_c_enclair=fa_recup_param('vl_c_enclair','');
$vl_c_code_critere=fa_recup_param('vl_c_code_critere','');
$vl_c_code_choix=fa_recup_param('vl_c_code_choix','');
$vl_c_deno_critere=fa_recup_param('vl_c_deno_critere','');
$vl_c_deno_choix=fa_recup_param('vl_c_deno_choix','');
switch ($vl_c_genre) {
  case "1": $vl_c_id_fenetre="Fen_00638";$ml_tarif=fa_brik_menulist_choix(101,1,-1,-1,'','ml_tarif',"broadcaster_01",0);$ml_tarif_remplacement=fa_brik_menulist_choix(101,1,-1,-1,'','ml_tarif_remplacement',"broadcaster_01",0);$vl_c_id_article_recherche="Div_00206";$vl_c_id_inc_infos_critere_choix_01="Div_00344";$vl_c_id_inc_acteurs_selection_01="Div_00040";$vl_c_id_inc_acteurs_01="Div_00033";break;  //  Tarifs de vente
  case "2": $vl_c_id_fenetre="Fen_00639";$ml_tarif=fa_brik_menulist_choix(127,1,-1,-1,'','ml_tarif',"broadcaster_01",0);$ml_tarif_remplacement=fa_brik_menulist_choix(127,1,-1,-1,'','ml_tarif_remplacement',"broadcaster_01",0);$vl_c_id_article_recherche="Div_00208";$vl_c_id_inc_infos_critere_choix_01="Div_00344";$vl_c_id_inc_acteurs_selection_01="Div_00040";$vl_c_id_inc_acteurs_01="Div_00033";break;  //  Tarifs d'achats
  default: fa_redirige("acces_interdit");break;
}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_b_acces=$vl_tb_droits[0];if ($vl_b_acces==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_bop_101=fa_recup_dico("bop_101");
$vl_c_bop_103=fa_recup_dico("bop_103");
$vl_c_bop_104=fa_recup_dico("bop_104");
$vl_c_bop_105=fa_recup_dico("bop_105");
$vl_c_bop_106=fa_recup_dico("bop_106");
$vl_c_bop_108=fa_recup_dico("bop_108");
$vl_c_bop_109=fa_recup_dico("bop_109");
$vl_c_bop_110=fa_recup_dico("bop_110");
$vl_c_bop_111=fa_recup_dico("bop_111");
$vl_c_bop_112=fa_recup_dico("bop_112");
$vl_c_bop_113=fa_recup_dico("bop_113");
$vl_c_bop_114=fa_recup_dico("bop_114");
$vl_c_bop_115=fa_recup_dico("bop_115");
$vl_c_bop_116=fa_recup_dico("bop_116");
$vl_c_bop_117=fa_recup_dico("bop_117");
$vl_c_bop_118=fa_recup_dico("bop_118");
$vl_c_bop_119=fa_recup_dico("bop_119");
$vl_c_bop_120=fa_recup_dico("bop_120");
$vl_c_bop_121=fa_recup_dico("bop_121");
$vl_c_bop_122=fa_recup_dico("bop_122");
$vl_c_bop_123=fa_recup_dico("bop_123");
$vl_c_bop_124=fa_recup_dico("bop_124");
$vl_c_bop_125=fa_recup_dico("bop_125");
$vl_c_bop_126=fa_recup_dico("bop_126");
$vl_c_bop_130=fa_recup_dico("bop_130");
$vl_c_bop_131=fa_recup_dico("bop_131");
$vl_c_bop_133=fa_recup_dico("bop_133");
$vl_c_bop_134=fa_recup_dico("bop_134");
$vl_c_bop_135=fa_recup_dico("bop_135");
$vl_c_bop_136=fa_recup_dico("bop_136");
$vl_c_bop_137=fa_recup_dico("bop_137");
$vl_c_bop_138=fa_recup_dico("bop_138");
$vl_c_bop_139=fa_recup_dico("bop_139");
$vl_c_bop_140=fa_recup_dico("bop_140");
$vl_c_bop_141=fa_recup_dico("bop_141");
$vl_c_bop_144=fa_recup_dico("bop_144");
$vl_c_bop_146=fa_recup_dico("bop_146");
$vl_c_bop_147=fa_recup_dico("bop_147");
$vl_c_bop_148=fa_recup_dico("bop_148");
$vl_c_dico_00026=fa_recup_dico("dico_00026");
$vl_c_dico_00046=fa_recup_dico("dico_00046");
$vl_c_dico_00047=fa_recup_dico("dico_00047");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
switch ($vl_c_genre) {
  case "1": //  Tarifs de vente
    $vl_c_id_t01="Trait_00274";$vl_c_id_t02="Trait_00275";$vl_c_id_t03="Trait_00276";$vl_c_id_t04="Trait_00277";$vl_c_id_t05="Trait_00278";
    $vl_c_id_t06="Trait_00284";$vl_c_id_t07="Trait_00285";$vl_c_id_t08="Trait_00286";$vl_c_id_t09="Trait_00287";$vl_c_id_t10="Trait_00288";$vl_c_id_t11="Trait_00289";$vl_c_id_t12="Trait_00296";
    break;  
  case "2": //  Tarifs d'achats
    $vl_c_id_t01="Trait_00279";$vl_c_id_t02="Trait_00280";$vl_c_id_t03="Trait_00281";$vl_c_id_t04="Trait_00282";$vl_c_id_t05="Trait_00283";
    $vl_c_id_t06="Trait_00290";$vl_c_id_t07="Trait_00291";$vl_c_id_t08="Trait_00292";$vl_c_id_t09="Trait_00293";$vl_c_id_t10="Trait_00294";$vl_c_id_t11="Trait_00295";$vl_c_id_t12="Trait_00297";
    break;  
}
_graal_requete_charge_libobj($vl_c_id_t01,$vl_e_uti_cleunik);$vl_c_t01=fa_recup_dico("$vl_c_id_t01");
_graal_requete_charge_libobj($vl_c_id_t02,$vl_e_uti_cleunik);$vl_c_t02=fa_recup_dico("$vl_c_id_t02");
_graal_requete_charge_libobj($vl_c_id_t03,$vl_e_uti_cleunik);$vl_c_t03=fa_recup_dico("$vl_c_id_t03");
_graal_requete_charge_libobj($vl_c_id_t04,$vl_e_uti_cleunik);$vl_c_t04=fa_recup_dico("$vl_c_id_t04");
_graal_requete_charge_libobj($vl_c_id_t05,$vl_e_uti_cleunik);$vl_c_t05=fa_recup_dico("$vl_c_id_t05");
$bt_suppression_tarif='';
$bt_desactivation_tarif='';
$bt_activation_tarif='';
$bt_maj_validite='';
$bt_maj_tarifs='';
$bt_dup_tarifs='';
$bt_remplacement_tarifs_acteurs='';
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_t06,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==true) {$bt_suppression_tarif='<button tooltiptext ="'.$vl_c_bop_126.'" label="'.$vl_c_bop_126.'" crop="end" dir="normal" oncommand="pf_tarif_action(1);" />';}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_t07,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==true) {$bt_desactivation_tarif='<button flex="1" tooltiptext="'.$vl_c_bop_131.'" label="'.$vl_c_bop_131.'" crop="end" dir="normal" oncommand="pf_tarif_action(2);" />';}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_t08,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==true) {$bt_activation_tarif='<button flex="1" tooltiptext="'.$vl_c_bop_130.'" label="'.$vl_c_bop_130.'" crop="end" dir="normal" oncommand="pf_tarif_action(3);" />';}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_t09,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==true) {$bt_maj_validite='<button flex="1" tooltiptext ="'.$vl_c_bop_133.'" label="'.$vl_c_bop_133.'" crop="end" dir="normal" oncommand="pf_tarif_action(4);" />';}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_t10,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==true) {$bt_maj_tarifs='<button flex="1" tooltiptext ="'.$vl_c_bop_140.'" label="'.$vl_c_bop_140.'" crop="end" dir="normal" oncommand="pf_tarif_action(6);" />';}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_t11,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==true) {$bt_dup_tarifs='<button flex="1" tooltiptext ="'.$vl_c_bop_141.'" label="'.$vl_c_bop_141.'" crop="end" dir="normal" oncommand="pf_tarif_action(7);" />';}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_t12,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==true) {$bt_remplacement_tarifs_acteurs='<button flex="1" tooltiptext ="'.$vl_c_bop_144.'" label="'.$vl_c_bop_144.'" crop="end" dir="normal" oncommand="pf_tarif_action_acteur(1);" />';}
include("_graal_header_winxul.inc.php");
$c_id_windows=$vl_c_id_fenetre;
$c_id_windows="";
echo <<<END
<window id="$c_id_windows" onload="fa_aa(this);pf_aa_init()" onunload="pf_aa_ferme();" $c_xmlns>
$vl_c_graal_cp00
END;
echo <<<END
<popupset>
  <popup id="pop_selections_tarifs">
    <menuitem class="menuitem-iconic ad09" label="$vl_c_dico_00106" tooltiptext="$vl_c_dico_00106" oncommand="fa_infos_colonnes_arbre_recup('$vl_c_id_fenetre','arbre_des_articles');" />
    <menuitem label="$vl_c_bop_109" tooltiptext="$vl_c_bop_109" oncommand="" />
    <menuitem class='menuitem-iconic ai07' label="$vl_c_bop_110" tooltiptext="$vl_c_bop_110" oncommand='pf_article_ouvre(1);' />
    <menuitem class='menuitem-iconic af01' label="$vl_c_bop_123" tooltiptext="$vl_c_bop_123" oncommand='pf_tarif_ouvre(1);' />
    <menuitem class='menuitem-iconic ai15' label="$vl_c_bop_124" tooltiptext="$vl_c_bop_124" oncommand='pf_acteur_ouvre(1);' />
    <menuitem class="menuitem-iconic ak11" label="$vl_c_bop_111" tooltiptext="$vl_c_bop_111" oncommand="pf_panier_ajoute_tarifs();" />
    <menuitem tooltiptext ="$vl_c_bop_103" collapsed="true" id="bt_voir_panier" label="$vl_c_bop_103" oncommand="pf_voir_deck(1)" />
  </popup>
  <popup id="pop_selections_acteurs">
    <menuitem label="$vl_c_bop_109" tooltiptext="$vl_c_bop_109" oncommand="" />
    <menuitem class='menuitem-iconic ai15' label="$vl_c_bop_124" tooltiptext="$vl_c_bop_124" oncommand='pf_acteur_ouvre(3);' />
    <menuitem class="menuitem-iconic ak11" label="$vl_c_bop_111" tooltiptext="$vl_c_bop_111" oncommand="pf_panier_ajoute_acteurs();" />
    <menuitem collapsed="true" id="bt_voir_panier_acteurs" label="$vl_c_bop_103" tooltiptext ="$vl_c_bop_103" oncommand="pf_voir_deck_acteurs(1)" />
  </popup>

  <popup id="pop_panier_tarifs">
    <menuitem class="menuitem-iconic ad09" label="$vl_c_dico_00106" tooltiptext="$vl_c_dico_00106" oncommand="fa_infos_colonnes_arbre_recup('$vl_c_id_fenetre','arbre_des_articles_panier');" />
    <menuitem label="$vl_c_bop_108" tooltiptext="$vl_c_bop_108" oncommand="" />
    <menuitem class='menuitem-iconic ai07' label="$vl_c_bop_110" tooltiptext="$vl_c_bop_110" oncommand='pf_article_ouvre(2);' />
    <menuitem class='menuitem-iconic af01' label="$vl_c_bop_123" tooltiptext="$vl_c_bop_123" oncommand='pf_tarif_ouvre(2);' />
    <menuitem class='menuitem-iconic ai15' label="$vl_c_bop_124" tooltiptext="$vl_c_bop_124" oncommand='pf_acteur_ouvre(2);' />
    <menuitem class="menuitem-iconic ak12" label="$vl_c_bop_106" tooltiptext="$vl_c_bop_106" oncommand="pf_panier_enleve();"/>
    <menuitem label="$vl_c_bop_104" tooltiptext="$vl_c_bop_104" oncommand="pf_voir_deck(0);"/>
    <menuseparator />
END;
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_t01,$vl_e_uti_cleunik);$vl_b_acces=$vl_tb_droits[0];if ($vl_b_acces==true) {echo('<menuitem label="'.$vl_c_t01.'" oncommand="pf_recup_requete(\'ods\');" class="menuitem-iconic ac12" />');}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_t02,$vl_e_uti_cleunik);$vl_b_acces=$vl_tb_droits[0];if ($vl_b_acces==true) {echo('<menuitem label="'.$vl_c_t02.'" oncommand="pf_recup_requete(\'rdf\');" class="menuitem-iconic ak02" collapsed="true"/>');}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_t03,$vl_e_uti_cleunik);$vl_b_acces=$vl_tb_droits[0];if ($vl_b_acces==true) {echo('<menuitem label="'.$vl_c_t03.'" oncommand="pf_recup_requete(\'htm\');" class="menuitem-iconic ak03" />');}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_t04,$vl_e_uti_cleunik);$vl_b_acces=$vl_tb_droits[0];if ($vl_b_acces==true) {echo('<menuitem label="'.$vl_c_t04.'" oncommand="pf_recup_requete(\'xml\');" class="menuitem-iconic ak04" disabled="true"/>');}
echo ('<menuseparator />');
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_t05,$vl_e_uti_cleunik);$vl_b_acces=$vl_tb_droits[0];if ($vl_b_acces==true) {echo('<menuitem label="'.$vl_c_t05.'" oncommand="pf_recup_requete(\'xls\');" class="menuitem-iconic ak05" dir="reverse"/>');}
echo <<<END
    
  </popup>
  <popup id="pop_panier_acteurs">
    <menuitem label="$vl_c_bop_108" tooltiptext="$vl_c_bop_108" oncommand="" />
    <menuitem class='menuitem-iconic ai15' label="$vl_c_bop_124" tooltiptext="$vl_c_bop_124" oncommand='pf_acteur_ouvre(4);' />
    <menuitem class="menuitem-iconic ak12" label="$vl_c_bop_106" tooltiptext="$vl_c_bop_106" oncommand="pf_panier_enleve_acteurs();"/>
    <menuitem label="$vl_c_bop_104" tooltiptext="$vl_c_bop_104" oncommand="pf_voir_deck_acteurs(0);"/>
  </popup>
</popupset>
END;
include("_graal_visites.inc.php");
include_once("js/_graal_05_dates.js.php");
include_once("js/_graal_01.js.php");
include("js/_graal_articles_traitements_02.js.php");
$vl_c_type_article_recherche="5";
include("js/_graal_articles_selection_01.js.php");
echo <<<END
<hbox>
$ml_tarif
<menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' id="bop_ml_actif" value="1">
  <menupopup>
    <menuitem label="$vl_c_dico_00046" tooltiptext="$vl_c_dico_00046" value="1" /> <!--  Actifs-->
    <menuitem label="$vl_c_dico_00047" tooltiptext="$vl_c_dico_00047" value="2" /> <!--  Inactifs-->
    <menuitem label="$vl_c_dico_00026" tooltiptext="$vl_c_dico_00026" value="0" /> <!--  Tous-->
  </menupopup>
</menulist>
<keyset id="_graal_ks_02">
    <key id="k-recherche" modifiers="alt" keycode="VK_F3" oncommand="pf_rafraichir_tarif();"/>
	</keyset>
<toolbarbutton id='bt_rafraichir_tarif' class="table-rafraichir" tooltiptext="$vl_c_bop_101" oncommand='pf_rafraichir_tarif();' />
<button id="bt_sortir" tooltiptext ="$vl_c_bop_105" label="$vl_c_bop_105" crop="end" dir="normal" oncommand="window.close();" />
</hbox>
  <tabbox id="tabbox_01" flex="1" orient="vertical" class="overflow_01">
    <tabs id="tab_infogene">
       <tab id="tab_articles" linkedpanel="tabpanel_articles" first-tab="true" label="$vl_c_bop_112" selected="true"/>
       <tab id="tab_acteurs" linkedpanel="tabpanel_acteurs" label="$vl_c_bop_113"/>
       <tab id="tab_nomenclatures" linkedpanel="tabpanel_nomenclatures" label="$vl_c_bop_114"/>
       <tab id="tab_documents" linkedpanel="tabpanel_documents" label="$vl_c_bop_115"/>
    </tabs>
    <tabpanels flex="1">
  		<tabpanel id="tabpanel_articles" flex="1">
        <deck id="deck_articles" selectedIndex="0" flex="1">
        <vbox flex="1">
END;
switch ($vl_c_type) {
  case '1' : // Normal
    include("_graal_inc_articles_recherche_01.php");
    break;
  case '2' : // Choix
  case '3' : // Critère
    $_graal_inc_infos_critere_choix_01="articles";
    include("_graal_inc_infos_critere_choix_01.php");
    break;
}
$vl_c_id_vbox_inc_article_01='arbre_articles_01';
echo <<<END
<vbox id="$vl_c_id_vbox_inc_article_01" flex="2">
  <tree id="arbre_des_articles" enableColumnDrag="true" flex="1" flags="" ref="*" querytype="xml" datasources="" seltype="multiple" context="pop_selections_tarifs">
    <treecols>
      <treecol id="dateheure_validite" ignoreincolumnpicker="true" hidden="true"/>
      <treecol id="dateheure_dermaj" ignoreincolumnpicker="true" hidden="true"/>

      <treecol id="puref_1000" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="art_cleunik" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tar_cleunik" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="articleactif" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="typetarif" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="act_cleunik" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tarifactif" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="typeacteur" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="codearticle" sort="?codearticle" label="$vl_c_bop_119" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="description" sort="?description" label="$vl_c_bop_120" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="datevalidite" sort="?dateheure_validite" label="$vl_c_bop_117" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="datemaj" sort="?dateheure_dermaj" label="$vl_c_bop_118" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="pu_reference" class="droite" sort="?puref_1000" label="$vl_c_bop_116" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="typetarifclair" class="centre" sort="?typetarifclair" label="$vl_c_bop_121" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="raisonsoc" sort="?raisonsoc" label="$vl_c_bop_122" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
    <template><query expr="*"/><action>
      <treechildren>
        <treeitem container="true" uri="?" seltype="single">
          <treerow>
            <treecell label="?dateheure_validite"/>
            <treecell label="?dateheure_dermaj"/>

            <treecell label="?puref_1000"/>
            <treecell label="?art_cleunik"/>
            <treecell label="?tar_cleunik"/>
            <treecell label="?articleactif"/>
            <treecell label="?typetarif"/>
            <treecell label="?act_cleunik"/>
            <treecell label="?tarif_actif"/>
            <treecell label="?typeacteur"/>
            
            <treecell properties="?properties_art" label="?codearticle"/>
            <treecell properties="?properties_art" label="?description"/>
            <treecell properties="?properties_tar" label="?datevalidite"/>
            <treecell properties="?properties_tar" label="?datemaj"/>
            
            <treecell properties="?properties_tar" label="?pu_reference"/>
            <treecell properties="?properties_tar" label="?typetarifclair"/>
            <treecell properties="?properties_act" label="?raisonsoc"/>
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
</vbox>
END;
echo '</vbox><vbox flex="1">';
$vl_c_id_vbox_inc_article_01='arbre_articles_panier';
echo <<<END
<vbox id="$vl_c_id_vbox_inc_article_01" flex="2">
  <tree id="arbre_des_articles_panier" enableColumnDrag="true" flex="1" flags="" ref="*" querytype="xml" datasources="" seltype="multiple" context="pop_panier_tarifs">
    <treecols>
      <treecol id="dateheure_validite_panier" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="dateheure_dermaj_panier" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="nouveau_tarif_1000_panier" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="puref_1000_panier" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="art_cleunik_panier" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tar_cleunik_panier" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="articleactif_panier" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="typetarif_panier" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="act_cleunik_panier" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tarifactif_panier" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="typeacteur_panier" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="codearticle_panier" sort="?codearticle" label="$vl_c_bop_119" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="description_panier" sort="?description" label="$vl_c_bop_120" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="datevalidite_panier" sort="?dateheure_validite" label="$vl_c_bop_117" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="datemaj_panier" sort="?dateheure_dermaj" label="$vl_c_bop_118" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="pu_reference_panier" class="droite" sort="?puref_1000" label="$vl_c_bop_116" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="typetarifclair_panier" class="centre" sort="?typetarifclair" label="$vl_c_bop_121" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="raisonsoc_panier" sort="?raisonsoc" label="$vl_c_bop_122" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="nouveau_tarif_panier" sort="?nouveau_tarif_1000" label="$vl_c_bop_125" /><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
    <template><query expr="*"/><action>
      <treechildren>
        <treeitem container="true" uri="?" seltype="single">
          <treerow>
            <treecell label="?dateheure_validite"/>
            <treecell label="?dateheure_dermaj"/>
            <treecell label="?nouveau_tarif_1000"/>
            <treecell label="?puref_1000"/>
            <treecell label="?art_cleunik"/>
            <treecell label="?tar_cleunik"/>
            <treecell label="?articleactif"/>
            <treecell label="?typetarif"/>
            <treecell label="?act_cleunik"/>
            <treecell label="?tarif_actif"/>
            <treecell label="?typeacteur"/>
            
            <treecell properties="?properties_art" label="?codearticle"/>
            <treecell properties="?properties_art" label="?description"/>
            <treecell properties="?properties_tar" label="?datevalidite"/>
            <treecell properties="?properties_tar" label="?datemaj"/>
            
            <treecell properties="?properties_tar" label="?pu_reference"/>
            <treecell properties="?properties_tar" label="?typetarifclair"/>
            <treecell properties="?properties_act" label="?raisonsoc"/>
            <treecell properties="?properties_tar" label="?nouveau_tarif"/>
            

          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
</vbox>

<groupbox >
  <tabbox  flex="1">

    <tabpanels flex="1" style="border-bottom: 0px solid" >
       <tabpanel id="tabpanel_panier_article_maj">
        
        <groupbox flex="1"><caption><label value="$vl_c_bop_148"/></caption>
          <vbox>
            $bt_suppression_tarif
            <hbox>
              $bt_desactivation_tarif
              $bt_activation_tarif
            </hbox>
          </vbox>
        </groupbox>
        <groupbox flex="1"><caption><label value="$vl_c_bop_134"/></caption>
          <vbox>
		  <datepicker type="popup" monthLeadingZero="true" dateLeadingZero="true" observes="broadcaster_01" id="tb_dat_deb"/>
            $bt_maj_validite
          </vbox>
    			
        </groupbox>
        <groupbox flex="1"><caption><label value="$vl_c_bop_135"/></caption>
          <hbox>
            <hbox>
              <label value="$vl_c_bop_136"  />
			  <datepicker type="popup" monthLeadingZero="true" dateLeadingZero="true" observes="broadcaster_01" id="tb_dat_val_01"/>
      			</hbox>
      			<hbox>
              <label value="$vl_c_bop_137"  />
			  <datepicker type="popup" monthLeadingZero="true" dateLeadingZero="true" observes="broadcaster_01" id="tb_dat_val_02"/>
      			</hbox>
      			<hbox>
              <label value="$vl_c_bop_138"  />
              <textbox id="coef_multiplicateur" type="number" hidespinbuttons="true" decimalplaces="3" value="1" />
            </hbox>
          </hbox>
          <hbox>
            <button flex="1" tooltiptext ="$vl_c_bop_139" label="$vl_c_bop_139" crop="end" dir="normal" oncommand="pf_tarif_action(5);" />
            $bt_maj_tarifs
            $bt_dup_tarifs
          </hbox>
        </groupbox>

       </tabpanel>
      <tabpanel id="tabpanel_panier_article_impressions">
       <label value="Impressions à venir"  />
      </tabpanel> 
    </tabpanels>
    <tabs flex="1" class="tabs-bottom">
       <tab id="tab_panier_article_maj" linkedpanel="tabpanel_panier_article_maj" label="$vl_c_bop_146"  class="tab-bottom" />
       <tab id="tab_panier_article_impressions" linkedpanel="tabpanel_panier_article_impressions" label="$vl_c_bop_147"  class="tab-bottom" />
    </tabs>

  </tabbox>
</groupbox>


      </vbox>
    </deck>
    </tabpanel>
  		<tabpanel id="tabpanel_acteurs" flex="1">
<deck id="deck_acteurs" selectedIndex="0" flex="1">
<vbox flex="1">
END;
switch ($vl_c_type) {
  case '1' : // Normal
    $vl_c_infos_adresses="true";$vl_c_infos_sitesweb="true";
    include("_graal_inc_acteurs_selection_01.php");
    break;
  case '2' : // Choix
  case '3' : // Critère
    $_graal_inc_infos_critere_choix_01="acteurs";
    include("_graal_inc_infos_critere_choix_01.php");
    break;
}
echo <<<END
END;
$vl_c_id_vbox_inc_acteurs_01='aai_acteurs_01';
$vl_c_id_arbre_inc_acteurs_01='arbre_des_acteurs';
include("_graal_inc_acteurs_01.php");
echo <<<END
</vbox>
<vbox flex="1">
END;
$vl_c_id_vbox_inc_acteurs_01='aai_acteurs_panier';
$vl_c_id_arbre_inc_acteurs_01='arbre_des_acteurs_panier';
include("_graal_inc_acteurs_01.php");
echo <<<END
<hbox>
  $ml_tarif_remplacement
  $bt_remplacement_tarifs_acteurs
  
</hbox>
</vbox>
</deck>
</tabpanel>



    </tabpanels>
  </tabbox>
  </window>
END;
?>
