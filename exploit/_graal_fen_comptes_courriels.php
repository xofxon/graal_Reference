<?php
include("_graal_header_xul.inc.php");
$vl_c_id_fenetre="Fen_00052"; //Gestion des comptes courriels par utilisateur
$vl_c_id_inc_uti_03="Div_00072";
$vl_c_id_inc_compte_courriel="Div_00073";
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
$vl_c_qui=fa_recup_param('qui','');
$vl_e_genre="1";	//Compte courriel
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
$vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=1;
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_bas_101=fa_recup_dico("bas_101");
$vl_c_bas_102=fa_recup_dico("bas_102");
$vl_c_bas_103=fa_recup_dico("bas_103");
$vl_c_bas_104=fa_recup_dico("bas_104");
$vl_c_bas_105=fa_recup_dico("bas_105");
$vl_c_bas_106=fa_recup_dico("bas_106");
$vl_c_bas_107=fa_recup_dico("bas_107");
$vl_c_bas_108=fa_recup_dico("bas_108");
$vl_c_bas_109=fa_recup_dico("bas_109");
$vl_c_bas_110=fa_recup_dico("bas_110");
$vl_c_bas_111=fa_recup_dico("bas_111");
$vl_c_bas_112=fa_recup_dico("bas_112");
$vl_c_bas_113=fa_recup_dico("bas_113");
$vl_c_bas_114=fa_recup_dico("bas_114");
$vl_c_bas_115=fa_recup_dico("bas_115");
$vl_c_bas_116=fa_recup_dico("bas_116");
$vl_c_bas_117=fa_recup_dico("bas_117");
$vl_c_bas_118=fa_recup_dico("bas_118");
$vl_c_bas_119=fa_recup_dico("bas_119");
$vl_c_bas_120=fa_recup_dico("bas_120");
$vl_c_bas_121=fa_recup_dico("bas_121");
$vl_c_bas_122=fa_recup_dico("bas_122");
$vl_c_dico_00013=fa_recup_dico("dico_00013");
$vl_c_dico_00014=fa_recup_dico("dico_00014");
if ($vl_c_qui=="lui"){
	$vl_e_uti_cleunik =intval(fa_recup_param('vl_e_uti_cleunik','0'));
}
$vl_tc_composants=array($vl_c_id_inc_uti_03,$vl_c_id_inc_compte_courriel);
if ($vl_b_modif==1){
	$bouton_mod_pwd="<button label='Changer' id='tb_changerpwd' collapsed='true' oncommand='pf_changer_mot_de_passe();' observes='broadcaster_01'/>";
}
include("_graal_header_winxul.inc.php");
echo <<<END
<window context="graal_cp00" title="$vl_c_bas_101" id="_graal_comptes_courriels_01" onload="fa_aa(this);pf_etat_fen('ini')" $c_xmlns>
$vl_c_graal_cp00
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_comptes_courriels_01.js.php");
echo <<<END
<broadcasterset><broadcaster id="broadcaster_01" /></broadcasterset>
<vbox flex="10">
  <hbox flex="1">
END;
if ($vl_c_qui=="eux") {
  include("_graal_inc_utilisateurs_03.php");
  echo("<splitter />");
}
include("_graal_inc_comptes_courriels_01.php");
echo('<vbox id="boutons_standards" >');
include("_graal_inc_boutons_01.php");
echo <<<END
  <button flex="1" label="$vl_c_bas_122" id="bt_droits" oncommand="pf_droits();" observes="broadcaster_01"/>
  </vbox>
  </hbox>
</vbox>
<splitter />
  <vbox id="hbox_panneaudegauche" flex="1">
    <hbox>
      <label value="$vl_c_bas_102"></label>
      <textbox flex="1" id="tb_titre"   observes="broadcaster_01" />
      <label value="$vl_c_bas_117"></label>
      <menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" id="ml_type_compte" observes="broadcaster_01" _graal_nombre="2">
        <menupopup>
          <menuitem id="menu_02_01" label="$vl_c_bas_119" value="1" selected="true"/>
          <menuitem id="menu_02_02" label="$vl_c_bas_118" value="2" />
        </menupopup>
      </menulist>
    </hbox>
      <hbox>
        <label value="$vl_c_bas_111"></label>
        <textbox flex= "1" id="tb_serveurpop3"   observes="broadcaster_01" />
        <label value="$vl_c_bas_112"></label>
        <textbox flex= "1" id="tb_utilisateurpop3"   observes="broadcaster_01" />
        <label  value="$vl_c_bas_113"></label>
				$bouton_mod_pwd
        <textbox flex= "1" id="tb_motdepassepop3" type="password"   observes="broadcaster_01" />
        <label value="$vl_c_bas_120" />
        <textbox flex="1" id="tb_portpop"   observes="broadcaster_01"/>
        <label value="$vl_c_bas_121" />
        <radiogroup id='rdg_pop_ssl' flex="1" name='name'>
          <hbox>
            <radio observes="broadcaster_01" id='ra_pop_ssl_oui' label="$vl_c_dico_00013" value='1' />
            <spacer flex="1"/>
            <radio observes="broadcaster_01" id='ra_pop_ssl_non' label="$vl_c_dico_00014" value='2'/>
          </hbox>

     </radiogroup>

      </hbox>
      <hbox>
        <label value="$vl_c_bas_103" />
        <textbox flex="5" id="tb_serveursmtp"   observes="broadcaster_01"/>
        <label value="$vl_c_bas_116"/>
        <textbox flex="1" id="tb_portsmtp"   observes="broadcaster_01"/>
      </hbox>

      <hbox flex="2">
        <grid flex="1">
        <columns flex="1">
         <column />
         <column flex="1"/>
        </columns>
        <rows>
          <row flex= "1">
            <label value="$vl_c_bas_104"></label>
            <textbox id="tb_sendfrom"   observes="broadcaster_01" />
          </row>
          <row flex= "1">
          <label value="$vl_c_bas_105"></label>
          <textbox id="tb_nomemetteur"   observes="broadcaster_01" />
          </row>
          <row flex= "1">
          <label value="$vl_c_bas_106"></label>
          <textbox id="tb_courrielemetteur"   observes="broadcaster_01" />
          </row>
         </rows> 
         </grid> 
        <grid flex="1">
        <columns flex="1">
         <column/>
         <column flex="1"/>
        </columns>
        <rows>
          <row flex= "1">
            <label value="$vl_c_bas_107"></label>
            <textbox id="tb_courrielreponse"   observes="broadcaster_01" />
          </row>
          <row flex= "1">
            <label value="$vl_c_bas_108"></label>
            <textbox id="tb_courrielretour"   observes="broadcaster_01"/>
          </row>
          <row flex= "1">
          <label value="$vl_c_bas_109"></label>
          <textbox id="tb_courrielerreurs"   observes="broadcaster_01"/>
          </row>
          <row flex= "1">
          <label value="$vl_c_bas_110"></label>
          <textbox id="tb_courrielconfirmationlecture"   observes="broadcaster_01"/>
          </row>
         </rows> 
         </grid>
      </hbox>
      <hbox flex="1">
        <button flex="1" label="$vl_c_bas_114" id="bt_test_emis" oncommand="pf_test_emis();" observes="broadcaster_01"/>
        <button flex="1" label="$vl_c_bas_115" id="bt_test_rece" oncommand="pf_test_rece();" observes="broadcaster_01"/>
      </hbox>
  </vbox>
</window>
END;
?>
