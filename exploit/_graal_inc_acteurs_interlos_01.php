<?php
_graal_requete_charge_varlib($vl_c_id_inc_acteurs_interlos,$vl_e_uti_cleunik);
$vl_c_aam_001=fa_recup_dico("aam_001");
$vl_c_aam_002=fa_recup_dico("aam_002");
$vl_c_aam_003=fa_recup_dico("aam_003");
$vl_c_aam_004=fa_recup_dico("aam_004");
$vl_c_aam_005=fa_recup_dico("aam_005");
$vl_c_aam_006=fa_recup_dico("aam_006");
$vl_c_aam_007=fa_recup_dico("aam_007");
$vl_c_aam_008=fa_recup_dico("aam_008");
$vl_c_aam_009=fa_recup_dico("aam_009");
$vl_c_aam_010=fa_recup_dico("aam_010");
$vl_c_aam_011=fa_recup_dico("aam_011");
$vl_c_aam_012=fa_recup_dico("aam_012");
$vl_c_aam_013=fa_recup_dico("aam_013");
$vl_c_aam_014=fa_recup_dico("aam_014");
$vl_c_aam_015=fa_recup_dico("aam_015");
$vl_c_aam_016=fa_recup_dico("aam_016");
$vl_c_aam_017=fa_recup_dico("aam_017");
$vl_c_aam_018=fa_recup_dico("aam_018");
$vl_c_aam_019=fa_recup_dico("aam_019");
$vl_c_aam_020=fa_recup_dico("aam_020");
$vl_c_aam_021=fa_recup_dico("aam_021");
$vl_c_aam_022=fa_recup_dico("aam_022");
$vl_c_aam_023=fa_recup_dico("aam_023");
$vl_c_aam_024=fa_recup_dico("aam_024");
$vl_c_aam_025=fa_recup_dico("aam_025");
$vl_c_aam_026=fa_recup_dico("aam_026");
$vl_c_aam_027=fa_recup_dico("aam_027");
switch ($vl_c_id_inc_acteurs_interlos){
  case "Div_00147": $vl_c_id_fen_intsimp_01="000000000";$vl_c_id_fen_intsimp_02="000000000";$vl_c_id_fen_interlo="000000000";$vl_c_id_fen_fax="000000000";$vl_c_id_fen_tel="000000000";$vl_c_id_fen_courriel="000000000";$vl_c_id_fen_mesinst="000000000";break;  //  Interlocuteurs de tous les acteurs On considère dans ce cas qu'il n'y a pas de test de gestion des droits
  case "Div_00169": $vl_c_id_fen_intsimp_01="000000000";$vl_c_id_fen_intsimp_02="000000000";$vl_c_id_fen_interlo="000000000";$vl_c_id_fen_fax="000000000";$vl_c_id_fen_tel="000000000";$vl_c_id_fen_courriel="000000000";$vl_c_id_fen_mesinst="000000000";break;  //  Interlocuteurs des acteurs favoris On considère dans ce cas qu'il n'y a pas de test de gestion des droits
  case "Div_00146": $vl_c_id_fen_intsimp_01="Fen_00523";$vl_c_id_fen_intsimp_02="Fen_00542";$vl_c_id_fen_interlo="Fen_00140";$vl_c_id_fen_fax="Fen_00155";$vl_c_id_fen_tel="Fen_00147";$vl_c_id_fen_courriel="Fen_00162";$vl_c_id_fen_mesinst="Fen_00697";break;  //  Interlocuteurs des Membres de l'entreprise
  case "Div_00148": $vl_c_id_fen_intsimp_01="Fen_00524";$vl_c_id_fen_intsimp_02="Fen_00536";$vl_c_id_fen_interlo="Fen_00142";$vl_c_id_fen_fax="Fen_00156";$vl_c_id_fen_tel="Fen_00149";$vl_c_id_fen_courriel="Fen_00163";$vl_c_id_fen_mesinst="Fen_00698";break;  //  prospects clients
  case "Div_00149": $vl_c_id_fen_intsimp_01="Fen_00525";$vl_c_id_fen_intsimp_02="Fen_00537";$vl_c_id_fen_interlo="Fen_00144";$vl_c_id_fen_fax="Fen_00157";$vl_c_id_fen_tel="Fen_00150";$vl_c_id_fen_courriel="Fen_00164";$vl_c_id_fen_mesinst="Fen_00699";break;  //  prospects fournisseurs
  case "Div_00150": $vl_c_id_fen_intsimp_01="Fen_00526";$vl_c_id_fen_intsimp_02="Fen_00538";$vl_c_id_fen_interlo="Fen_00141";$vl_c_id_fen_fax="Fen_00158";$vl_c_id_fen_tel="Fen_00151";$vl_c_id_fen_courriel="Fen_00165";$vl_c_id_fen_mesinst="Fen_00700";break;  //  clients
  case "Div_00151": $vl_c_id_fen_intsimp_01="Fen_00527";$vl_c_id_fen_intsimp_02="Fen_00539";$vl_c_id_fen_interlo="Fen_00143";$vl_c_id_fen_fax="Fen_00159";$vl_c_id_fen_tel="Fen_00152";$vl_c_id_fen_courriel="Fen_00166";$vl_c_id_fen_mesinst="Fen_00701";break;  //  fournisseurs
  case "Div_00152": $vl_c_id_fen_intsimp_01="Fen_00528";$vl_c_id_fen_intsimp_02="Fen_00540";$vl_c_id_fen_interlo="Fen_00146";$vl_c_id_fen_fax="Fen_00160";$vl_c_id_fen_tel="Fen_00153";$vl_c_id_fen_courriel="Fen_00167";$vl_c_id_fen_mesinst="Fen_00702";break;  //  autres acteurs
  case "Div_00153": $vl_c_id_fen_intsimp_01="Fen_00529";$vl_c_id_fen_intsimp_02="Fen_00541";$vl_c_id_fen_interlo="Fen_00145";$vl_c_id_fen_fax="Fen_00161";$vl_c_id_fen_tel="Fen_00154";$vl_c_id_fen_courriel="Fen_00168";$vl_c_id_fen_mesinst="Fen_00703";break;  //  acteurs indéterminés
  default:
    die;  
}
switch ($vl_c_id_inc_acteurs_interlos){
  case "Div_00147": $vl_c_telephone="00000000000";$vl_c_sms="00000000000";$vl_c_fax="00000000000";$vl_c_courtex="00000000000";$vl_c_courhtm="00000000000";$vl_c_chat="Fen_00696";break;  //  Interlocuteurs de tous les acteurs On considère dans ce cas qu'il n'y a pas de test de gestion des droits
  case "Div_00169": $vl_c_telephone="00000000000";$vl_c_sms="00000000000";$vl_c_fax="00000000000";$vl_c_courtex="00000000000";$vl_c_courhtm="00000000000";$vl_c_chat="Fen_00696";break;  //  Interlocuteurs des acteurs favoris On considère dans ce cas qu'il n'y a pas de test de gestion des droits
  case "Div_00146": $vl_c_telephone="Trait_00001";$vl_c_sms="Trait_00012";$vl_c_fax="Trait_00019";$vl_c_courtex="Trait_00026";$vl_c_courhtm="Trait_00033";$vl_c_chat="Fen_00696";break;  //  Interlocuteurs des Membres de l'entreprise
  case "Div_00148": $vl_c_telephone="Trait_00002";$vl_c_sms="Trait_00013";$vl_c_fax="Trait_00020";$vl_c_courtex="Trait_00027";$vl_c_courhtm="Trait_00034";$vl_c_chat="Fen_00696";break;  //  prospects clients
  case "Div_00149": $vl_c_telephone="Trait_00005";$vl_c_sms="Trait_00014";$vl_c_fax="Trait_00021";$vl_c_courtex="Trait_00028";$vl_c_courhtm="Trait_00035";$vl_c_chat="Fen_00696";break;  //  prospects fournisseurs
  case "Div_00150": $vl_c_telephone="Trait_00006";$vl_c_sms="Trait_00015";$vl_c_fax="Trait_00022";$vl_c_courtex="Trait_00029";$vl_c_courhtm="Trait_00036";$vl_c_chat="Fen_00696";break;  //  clients
  case "Div_00151": $vl_c_telephone="Trait_00009";$vl_c_sms="Trait_00016";$vl_c_fax="Trait_00023";$vl_c_courtex="Trait_00030";$vl_c_courhtm="Trait_00037";$vl_c_chat="Fen_00696";break;  //  fournisseurs
  case "Div_00152": $vl_c_telephone="Trait_00010";$vl_c_sms="Trait_00017";$vl_c_fax="Trait_00024";$vl_c_courtex="Trait_00031";$vl_c_courhtm="Trait_00038";$vl_c_chat="Fen_00696";break;  //  autres acteurs
  case "Div_00153": $vl_c_telephone="Trait_00011";$vl_c_sms="Trait_00018";$vl_c_fax="Trait_00025";$vl_c_courtex="Trait_00032";$vl_c_courhtm="Trait_00039";$vl_c_chat="Fen_00696";break;  //  acteurs indéterminés
  default:
    die;  
}
switch ($vl_c_id_inc_acteurs_interlos){
  case "Div_00147": $vl_c_id_fen_intsimp_03="000000000";break;  //  Interlocuteurs de tous les acteurs On considère dans ce cas qu'il n'y a pas de test de gestion des droits
  case "Div_00169": $vl_c_id_fen_intsimp_03="000000000";break;  //  Interlocuteurs des acteurs favoris On considère dans ce cas qu'il n'y a pas de test de gestion des droits
  case "Div_00146": $vl_c_id_fen_intsimp_03="Fen_00968";break;  //  Interlocuteurs des Membres de l'entreprise
  case "Div_00148": $vl_c_id_fen_intsimp_03="Fen_00968";break;  //  prospects clients
  case "Div_00149": $vl_c_id_fen_intsimp_03="Fen_00970";break;  //  prospects fournisseurs
  case "Div_00150": $vl_c_id_fen_intsimp_03="Fen_00971";break;  //  clients
  case "Div_00151": $vl_c_id_fen_intsimp_03="Fen_00972";break;  //  fournisseurs
  case "Div_00152": $vl_c_id_fen_intsimp_03="Fen_00973";break;  //  autres acteurs
  case "Div_00153": $vl_c_id_fen_intsimp_03="Fen_00974";break;  //  acteurs indéterminés
  default:
    die;  
}

$bloc_boutons_interlo="";
$bloc_boutons_tel="";
$bloc_boutons_fax="";
$bloc_boutons_courriels="";
$bloc_boutons_mesinst="";
//  Présence bloc boutons interlocuteurs
if ($vl_c_id_fen_interlo=="000000000") {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_interlo,$vl_e_uti_cleunik);}
if ($vl_c_id_fen_intsimp_01=="000000000") {$vl_tb_drosim_01[0]=1;$vl_tb_drosim_01[1]=1;} else {$vl_tb_drosim_01=_graal_requete_droits_fenetre($vl_c_id_fen_intsimp_01,$vl_e_uti_cleunik);}
if ($vl_c_id_fen_intsimp_02=="000000000") {$vl_tb_drosim_02[0]=1;$vl_tb_drosim_02[1]=1;} else {$vl_tb_drosim_02=_graal_requete_droits_fenetre($vl_c_id_fen_intsimp_02,$vl_e_uti_cleunik);}
if ($vl_c_id_fen_intsimp_03=="000000000") {$vl_tb_drosim_03[0]=1;$vl_tb_drosim_03[1]=1;} else {$vl_tb_drosim_03=_graal_requete_droits_fenetre($vl_c_id_fen_intsimp_03,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0||$vl_tb_drosim_01[0]!=0||$vl_tb_drosim_02[0]!=0||$vl_tb_drosim_03[0]!=0){ 
  $bloc_boutons_interlo.=('<vbox id="bloc_interlo"><label value="'.$vl_c_aam_002.'"/>');
	$bloc_boutons_interlo.=('<hbox><toolbarbutton type="menu" observes="broadcaster_01" class="ak14" id="tb_interlo_03" tooltiptext="'.$vl_c_aam_020.'"><menupopup>');
	if ($vl_tb_droits[1]!=0){
    $bloc_boutons_interlo.=('<menuitem class="ak14" id="tb_interlo_01" label="'.$vl_c_aam_003.'" tooltiptext="'.$vl_c_aam_003.'" oncommand="pf_ouvre(\'interlo\',\'nouveau\');"/>');
  } 
	if ($vl_tb_drosim_01[1]!=0){
		$bloc_boutons_interlo.=('<menuitem label="'.$vl_c_aam_025.'" oncommand="pf_ouvre(\'intsimp01\');"/>');
	} 
	if ($vl_tb_drosim_02[1]!=0){
		$bloc_boutons_interlo.=('<menuitem label="'.$vl_c_aam_026.'" oncommand="pf_ouvre(\'intsimp02\');"/>');
	} 
	if ($vl_tb_drosim_03[1]!=0){
		$bloc_boutons_interlo.=('<menuitem label="'.$vl_c_aam_027.'" oncommand="pf_ouvre(\'intsimp03\');"/>');
	} 
	$bloc_boutons_interlo.=('</menupopup></toolbarbutton>');
  $bloc_boutons_interlo.=('<toolbarbutton observes="broadcaster_01" class="ai18" id="tb_interlo_02" tooltiptext="'.$vl_c_aam_004.'" oncommand="pf_ouvre(\'interlo\',\'ouvrir\');" /></hbox></vbox><toolbarseparator />');
}
//  Présence bloc boutons Téléphones
if ($vl_c_id_fen_tel=="000000000") {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_tel,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_boutons_tel.=('<vbox id="bloc_telephone"><label value="'.$vl_c_aam_005.'"/>');
  if ($vl_tb_droits[1]!=0){
    $bloc_boutons_tel.=('<hbox><toolbarbutton observes="broadcaster_01" class="aj15" id="tb_tel_01" tooltiptext="'.$vl_c_aam_006.'"  oncommand="pf_ouvre(\'telephone\',\'nouveau\');"/>');
  }          
  $bloc_boutons_tel.=('<toolbarbutton observes="broadcaster_01" class="aj14" id="tb_tel_02" tooltiptext="'.$vl_c_aam_007.'"  oncommand="pf_ouvre(\'telephone\',\'ouvrir\');"/></hbox></vbox><toolbarseparator />');
}
//  Présence bloc boutons Fax
if ($vl_c_id_fen_fax=='000000000') {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_fax,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_boutons_fax.='<vbox id="bloc_fax"><label value="'.$vl_c_aam_009.'"/>';
  if ($vl_tb_droits[1]!=0){
    $bloc_boutons_fax.='<hbox><toolbarbutton observes="broadcaster_01" class="al07" id="tb_fax_01" tooltiptext="'.$vl_c_aam_010.'"  oncommand="pf_ouvre(\'fax\',\'nouveau\')"/>';
  }          
  $bloc_boutons_fax.='<toolbarbutton observes="broadcaster_01" class="al03" id="tb_fax_02" tooltiptext="'.$vl_c_aam_011.'"  oncommand="pf_ouvre(\'fax\',\'ouvrir\');"/></hbox></vbox><toolbarseparator />';
}
//  Présence bloc bouton courriels
if ($vl_c_id_fen_courriel=='000000000') {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_courriel,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_boutons_courriels.='<vbox id="bloc_courriel"><label value="'.$vl_c_aam_013.'"/>';
  if ($vl_tb_droits[1]!=0){
    $bloc_boutons_courriels.='<hbox><toolbarbutton observes="broadcaster_01" class="al10" id="tb_courriel_01" tooltiptext="'.$vl_c_aam_014.'"  oncommand="pf_ouvre(\'courriel\',\'nouveau\')"/>';
  }          
  $bloc_boutons_courriels.='<toolbarbutton observes="broadcaster_01" class="aj18" id="tb_courriel_02" tooltiptext="'.$vl_c_aam_015.'"  oncommand="pf_ouvre(\'courriel\',\'ouvrir\');"/></hbox></vbox><toolbarseparator />';
}
//  Présence bloc bouton messagerie instantanée
if ($vl_c_id_fen_mesinst=='000000000') {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_mesinst,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_boutons_mesinst.='<vbox id="bloc_mesinst"><label value="'.$vl_c_aam_022.'"/>';
  if ($vl_tb_droits[1]!=0){
    $bloc_boutons_mesinst.='<hbox><toolbarbutton observes="broadcaster_01" class="xx04" id="tb_mesinst_01" tooltiptext="'.$vl_c_aam_023.'"  oncommand="pf_ouvre(\'mesinst\',\'nouveau\')"/>';
  }          
  $bloc_boutons_mesinst.='<toolbarbutton observes="broadcaster_01" class="xx03" id="tb_mesinst_02" tooltiptext="'.$vl_c_aam_024.'"  oncommand="pf_ouvre(\'mesinst\',\'ouvrir\');"/></hbox></vbox><toolbarseparator />';
}

if ($vl_c_telephone=='000000000') {$vl_tb_droits[0]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_telephone,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_action_telephone='<toolbarbutton old_observes="broadcaster_01" class="ai06" id="tb_tel_03" tooltiptext="'.$vl_c_aam_008.'"  oncommand="pf_ouvre(\'telephone\',\'telephoner\');"/>';
}
if ($vl_c_sms=="000000000") {$vl_tb_droits[0]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_sms,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_action_sms='<toolbarbutton old_observes="broadcaster_01" class="aj04" id="tb_tel_04" tooltiptext="'.$vl_c_aam_012.'"  oncommand="pf_ouvre(\'telephone\',\'sms\');"/>';
}
if ($vl_c_fax=="000000000") {$vl_tb_droits[0]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_fax,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_action_fax='<toolbarbutton old_observes="broadcaster_01" class="aa01" id="tb_fax_03" tooltiptext="'.$vl_c_aam_019.'"  oncommand="pf_ouvre(\'fax\',\'envoyer\');"/>';
}
if ($vl_c_courtex=="000000000") {$vl_tb_droits[0]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_courtex,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_action_cour_tex='<toolbarbutton old_observes="broadcaster_01" class="ah09" id="tb_courriel_03" tooltiptext="'.$vl_c_aam_016.'"  oncommand="pf_ouvre(\'courriel\',\'envoyer_texte\')"/>';
}
if ($vl_c_courhtm=="000000000") {$vl_tb_droits[0]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_courhtm,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_action_cour_htm='<toolbarbutton old_observes="broadcaster_01" class="aj20" id="tb_courriel_04" tooltiptext="'.$vl_c_aam_017.'" oncommand="pf_ouvre(\'courriel\',\'envoyer_html\')"/>';
}
if ($vl_c_chat=="000000000") {$vl_tb_droits[0]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_chat,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  $bloc_action_chat='<toolbarbutton old_observes="broadcaster_01" class="ag06" id="tb_chat_01" tooltiptext="'.$vl_c_aam_021.'" oncommand="pf_ouvre(\'chat\',\'nouveau\')"/>';
}

echo <<<END
  <vbox id="bar_acteurs_interlos_01" flex="3">
      <toolbar grippyhidden="true">
				<vbox>
					<hbox>
						<toolbarbutton id="tb_nombre_courriel" collapsed="true" label="" tooltiptext="Il y a trop d'adresses de courriel pour rafraîchir automatiquement la table."/>
		  		  <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_aam_001" oncommand="pf_affiche_donnees_interlo_force();"/>
		        <toolbarseparator />
		        $bloc_boutons_interlo
		        $bloc_boutons_tel
		        $bloc_boutons_mesinst
		        $bloc_boutons_courriels
		        $bloc_boutons_fax
					</hbox>
	        <hbox id="bloc_actions">
	          <label value="$vl_c_aam_018"/>
	          $bloc_action_telephone
	          $bloc_action_sms
	          $bloc_action_fax
	          $bloc_action_cour_tex
	          $bloc_action_cour_htm
	          $bloc_action_chat
	        </hbox>
				</vbox>
      </toolbar>    
      <tree id="arbre_interlo" flex="20" hidecolumnpicker="true" seltype="single">
        <treecols>
          <treecol id="arbre_interlo_col01"  class="colname" primary="true" flex="2" hideheader="true" />
          <splitter hidden="true" class="tree-splitter" />
          <treecol hidden="true" id="arbre_interlo_col02" flex="1" />
					<treecol hidden="true" id="arbre_interlo_col03" flex="1" />
        </treecols>
        <treechildren id="fils_arbre_interlo" onclick="pf_sel_arbre_interlo();">
        </treechildren>
      </tree>
  </vbox>
END;
?>
