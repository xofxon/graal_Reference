<?php
include("_graal_header_xul.inc.php");
$vl_e_portee=intval(fa_recup_param('portee','0'));
$vl_e_fausseportee=intval(fa_recup_param('fausseportee','0'));
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
switch ($vl_e_fausseportee){
  case '4096': //Critères de tous les interlocuteurs
    $vl_c_id_fenetre="Fen_00280";$vl_c_id_graal_inc_critere_interlo="Div_00232";$vl_c_id_graal_inc_choix_interlo_corpus="Div_00240";
    $vl_e_acces=0;
    $vl_tb_droits=_graal_requete_droits_fenetre("Fen_00259",$vl_e_uti_cleunik);$vl_e_acces+=$vl_tb_droits[0];//Membres de l'entreprise
    $vl_tb_droits=_graal_requete_droits_fenetre("Fen_00281",$vl_e_uti_cleunik);$vl_e_acces+=$vl_tb_droits[0];//Prospects clients
    $vl_tb_droits=_graal_requete_droits_fenetre("Fen_00283",$vl_e_uti_cleunik);$vl_e_acces+=$vl_tb_droits[0];//Clients
    $vl_tb_droits=_graal_requete_droits_fenetre("Fen_00282",$vl_e_uti_cleunik);$vl_e_acces+=$vl_tb_droits[0];//Prospects fournisseurs
    $vl_tb_droits=_graal_requete_droits_fenetre("Fen_00284",$vl_e_uti_cleunik);$vl_e_acces+=$vl_tb_droits[0];//fournisseurs
    $vl_tb_droits=_graal_requete_droits_fenetre("Fen_00285",$vl_e_uti_cleunik);$vl_e_acces+=$vl_tb_droits[0];//Autres acteurs
    $vl_tb_droits=_graal_requete_droits_fenetre("Fen_00286",$vl_e_uti_cleunik);$vl_e_acces+=$vl_tb_droits[0];//Acteurs indéterminés
    if ($vl_e_acces==0) {fa_redirige("acces_interdit");}
    break; 
  case '1'  : $vl_c_id_fenetre="Fen_00259";$vl_c_id_graal_inc_critere_interlo="Div_00233";$vl_c_id_graal_inc_choix_interlo_corpus="Div_00255";break; //Membres de l'entreprise
  case '2'  : $vl_c_id_fenetre="Fen_00281";$vl_c_id_graal_inc_critere_interlo="Div_00249";$vl_c_id_graal_inc_choix_interlo_corpus="Div_00255";break; //Prospects clients
  case '4'  : $vl_c_id_fenetre="Fen_00283";$vl_c_id_graal_inc_critere_interlo="Div_00251";$vl_c_id_graal_inc_choix_interlo_corpus="Div_00255";break; //Clients
  case '8'  : $vl_c_id_fenetre="Fen_00282";$vl_c_id_graal_inc_critere_interlo="Div_00250";$vl_c_id_graal_inc_choix_interlo_corpus="Div_00255";break; //Prospects fournisseurs
  case '16' : $vl_c_id_fenetre="Fen_00284";$vl_c_id_graal_inc_critere_interlo="Div_00252";$vl_c_id_graal_inc_choix_interlo_corpus="Div_00255";break; //fournisseurs
  case '32' : $vl_c_id_fenetre="Fen_00285";$vl_c_id_graal_inc_critere_interlo="Div_00253";$vl_c_id_graal_inc_choix_interlo_corpus="Div_00255";break; //Autres acteurs
  case '64' : $vl_c_id_fenetre="Fen_00286";$vl_c_id_graal_inc_critere_interlo="Div_00254";$vl_c_id_graal_inc_choix_interlo_corpus="Div_00255";break; //Acteurs indéterminés
  default :
    fa_redirige("acces_interdit");
}
$vl_tc_composants=array($vl_c_id_graal_inc_critere_interlo,$vl_c_id_graal_inc_choix_interlo_corpus);
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
$vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=1;
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_bgk_100=fa_recup_dico("bgk_100");
include("_graal_header_winxul.inc.php");
echo <<<END
<window context="graal_cp00" _graal_cleunik="$vl_e_cleunik_critere" title="$vl_c_bgk_100" id="_graal_critere_01" onload="fa_aa(this);pf_etat_fen('ini')" $c_xmlns >
$vl_c_graal_cp00
<broadcasterset><broadcaster id="broadcaster_01" /></broadcasterset>
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_02.js.php");
include("js/_graal_criteres_interlocuteurs.js.php");
echo ("<vbox flex='1' class='overflow_01'>");
include("_graal_inc_criteres_interlocuteurs.php");
echo('<splitter /><hbox flex="1">');
include("_graal_inc_criteres_interlocuteurs_corpus.php");
echo('<spacer /><vbox ><vbox flex="1" id="boutons_standards">');
include("_graal_inc_boutons_01.php");
echo <<<END
   </vbox></vbox>
</hbox>
</vbox>
 </window>
END;
?>
