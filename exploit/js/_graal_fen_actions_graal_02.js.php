<?php
echo <<<END
<script type="application/x-javascript"><![CDATA[
var vf_c_url_alimente_table;
const vf_c_script_bdope_graal="_graal_bdope_graal_01.php";
const vf_c_xml_graal="_graal_xml_actions_graal_01.php?vl_e_act_cleunik=$vl_e_act_cleunik&vl_e_int_cleunik=$vl_e_int_cleunik&vl_e_action_cleunik=$vl_e_action_cleunik&vl_e_choix_cleunik=$vl_e_choix_cleunik&";
const vf_ancien_choix_cleunik="$vl_e_choix_cleunik";
function pf_aa_init() {
  fa_xmlhttprequest_xml(vf_c_xml_graal,"",pf_affiche_datas);
}
function pf_affiche_datas(stream){
  var vl_c_datas;
  vl_c_datas = stream;
  fa_value_set('tb_blocnotebrut',fa_xml_get(vl_c_datas,'blocnotebrut'));
  fa_value_set('tb_interlo',fa_xml_get(vl_c_datas,'interlocuteur'));
	fa_mlsel("ml_graal",fa_xml_get(vl_c_datas,'choix_cleunik'));
  fa_value_set("rdg_principal",fa_xml_get(vl_c_datas,'principal'));
  switch(fa_xml_get(vl_c_datas,'principal')) {
   case "1":  fa_att_set("rd_principal_non","selected", 'true');  break;
   case "2":  fa_att_set("rd_principal_oui",'selected', 'true');  break;
  }
  fa_focusdonne("ml_graal")
}
function pf_etat_fen(vv_quoi){
  switch (vv_quoi) {
    case 'sortir' :
      close();
      break;
  }
}
function pf_fin_requete(vv_stream) {
  var vl_c_data=vv_stream;
  if (vl_c_data!='ok') {alert(vl_c_data);}
  window.opener.pf_affiche_arbre_graal();
  pf_etat_fen('sortir');
}
function pf_validation(vv_quoi) {
  var vl_c_donnees="";
  vl_c_donnees+="vl_action_cleunik=$vl_e_action_cleunik&";
  vl_c_donnees+="vl_act_cleunik=$vl_e_act_cleunik&";
  vl_c_donnees+="vl_int_cleunik=$vl_e_int_cleunik&";
  vl_c_donnees+="vl_ancien_choix_cleunik=$vl_e_choix_cleunik&";
  vl_c_donnees+="vl_choix_cleunik="+fa_mlget("ml_graal")+"&";
  vl_c_donnees+="vl_blocnotebrut="+fa_enc(fa_value_get("tb_blocnotebrut"))+"&";
  vl_c_donnees+="vl_principal="+fa_enc(fa_value_get('rdg_principal'))+"&";
  switch(vv_quoi) {
    case "modifier":
      vl_c_donnees+="vf_c_action=modifier&";vf_c_action="modification";
      break;
    case "supprimer":
        if(confirm("Confirmez-vous la suppression de cette relation ?")== false) return;
        vl_c_donnees+="vf_c_action=supprimer&"
        vf_c_action="suppression";
      break;
  }
  fa_xmlhttprequest_txt(vf_c_script_bdope_graal,vl_c_donnees,pf_fin_requete);
}
]]></script>
END;
?>
