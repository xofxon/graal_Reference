<?php
include_once("_graal_var_portee.php");
echo <<<END
<script type="application/x-javascript"><![CDATA[
var vf_c_action="";
const c_script_das_acteurs="_graal_das_import_acteurs_04.php?vl_e_imp_cleunik=$vf_imp_cleunik";
const c_script_traitement="_graal_bdope_acteurs_01.php?vl_typeacteur=$vl_e_genreacteur&vf_c_action=importer_04&vl_e_imp_cleunik=$vf_imp_cleunik&";
const c_fen_choix_critere="_graal_fen_sel_choix_criteres.php?vl_e_domaine=$vl_e_acteur&genre=$vl_e_genreacteur&genrecritere=";
const lstn_grise = { 
	willRebuild : function(event){},
	didRebuild  : function(event){fa_grise_fenetre(event,"non");} 
};
function pf_alimente_arbre() {
	fa_grise_fenetre('',"oui");
	var vl_c_param=c_script_das_acteurs+"&raf="+Math.random()+"&";
  fa_das("arbre_acteurs",vl_c_param);
}
function pf_etat_fen(vv_quoi)  {
vf_c_action=vv_quoi;
  switch(vv_quoi) {
    case "ini":
			fa_badl("arbre_acteurs",lstn_grise);
			fa_gid("id_deck").selectedIndex=0;
			fa_att_set("if_import_acteurs","onload","pf_validation_fin();");
			pf_alimente_arbre();
      break;
    case "sortir":
       window.close();
      break;   
    default:
      break;
  }
}
function pf_onunload(){
	fa_brl("arbre_acteurs",lstn_grise);
}
function pf_ouvre_choix_critere(vv_quoi) {
  fa_att_set("_graal_ajout_ove_bdc_datas","_graal_critere_qui",vv_quoi);
  fa_ouvre(c_fen_choix_critere+vv_quoi+"&",800,400);
}
function pf_ouvre_choix_critere_recup(vv_critere_cleunik,vv_choix_cleunik,vv_c_critere_denomination,vv_c_choix_valeur_texte_01) {
  fa_att_set("_graal_ajout_ove_bdc_datas","_graal_choix_cleunik",vv_choix_cleunik);
  fa_att_set("_graal_ajout_ove_bdc_datas","_graal_critere_cleunik",vv_critere_cleunik);
	fa_value_set("tb_ajout_critere_denomination",vv_c_critere_denomination);
  fa_value_set("tb_ajout_choix_valeur_texte_01",vv_c_choix_valeur_texte_01);
}
function pf_validation(){
	if (fa_att_get("_graal_ajout_ove_bdc_datas","_graal_choix_cleunik")=="") {alert("Il faut sélectionner un critère d'origine")};
	fa_gid("id_deck").selectedIndex=1;
	fa_grise_fenetre('','oui');
	var vl_c_donnee="&choix_origine="+fa_att_get("_graal_ajout_ove_bdc_datas","_graal_choix_cleunik")+"&raf="+Math.random()+"&";
	vl_c_donnee+="&critere_origine="+fa_att_get("_graal_ajout_ove_bdc_datas","_graal_critere_cleunik")+"&";
	//fa_ouvre(c_script_traitement+vl_c_donnee)
	fa_att_set("if_import_acteurs","src",c_script_traitement+vl_c_donnee);
}
function pf_validation_fin(stream) {
  //alert(stream);
  fa_ds("arbre_acteurs","");
  fa_grise_fenetre('','non');
}
]]></script>
END;
?>
