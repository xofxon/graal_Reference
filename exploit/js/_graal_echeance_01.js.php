<?php
$vl_c_brf_109=fa_recup_dico_js("brf_109");
echo <<<END
<script type="application/x-javascript"><![CDATA[
const _c_script_edite="_graal_xml_echeance_01.php?echeance_cleunik=$vl_e_echeance_cleunik&type=$vl_c_type&fichier_echeance=$vl_c_fichier_echeance&";
const _c_script_bdope_fen="_graal_bdope_echeance_01.php?echeance_cleunik=$vl_e_echeance_cleunik&vf_c_action=solder&";
var vf_c_action;
function pf_affiche_datas(stream){
  var vl_c_datas=stream;
  fa_value_set("tb_echeance_cleunik",fa_xml_get(vl_c_datas,"echeance_cleunik"));
  fa_value_set("tb_commercial_cleunik",fa_xml_get(vl_c_datas,"commercial_cleunik"));
  fa_value_set("tb_pc_cleunik",fa_xml_get(vl_c_datas,"pc_cleunik"));
  fa_value_set("tb_noligne",fa_xml_get(vl_c_datas,"noligne"));
  fa_value_set("tb_date_paiement",fa_xml_get(vl_c_datas,"date_paiement"));
  fa_value_set("tb_date_echeance",fa_xml_get(vl_c_datas,"date_echeance"));
  fa_value_set("tb_libelle",fa_xml_get(vl_c_datas,"libelle"));
  fa_value_set("tb_montant_du",fa_xml_get(vl_c_datas,"montant_du"));
  fa_value_set("tb_montant_paye",fa_xml_get(vl_c_datas,"montant_paye"));
  fa_value_set("tb_devise_du",fa_xml_get(vl_c_datas,"devise_du"));
  fa_value_set("tb_devise_paye",fa_xml_get(vl_c_datas,"devise_paye"));
  fa_value_set("tb_taux_de_change",fa_xml_get(vl_c_datas,"taux_de_change"));
  fa_value_set("tb_mode_paiement",fa_xml_get(vl_c_datas,"mode_paiement"));
  fa_value_set("tb_blocnotebrut",fa_xml_get(vl_c_datas,"blocnotebrut"));
  fa_value_set("tb_dateheurecreation",fa_xml_get(vl_c_datas,"dateheurecreation"));
  fa_value_set("tb_dateheuremodif",fa_xml_get(vl_c_datas,"dateheuremodif"));
  fa_value_set("tb_etat",fa_xml_get(vl_c_datas,"etat"));
	fa_value_set("tb_nodoc",fa_xml_get(vl_c_datas,"code_document"));
  fa_value_set("tb_nom_acteur",fa_xml_get(vl_c_datas,"nomcommercial"));
}
function pf_aa_init(){
  fa_grise_oui("bt_supprimer");
  fa_grise_oui("bt_modifier");
  fa_grise_non("bt_enregistrer");
  fa_grise_non("bt_annuler");
  fa_grise_groupe_oui("broadcaster_01");
	fa_grise_non("tb_blocnotebrut");
	fa_focusdonne("tb_blocnotebrut")
	fa_xmlhttprequest_xml(_c_script_edite,"",pf_affiche_datas);
}
function pf_etat_fen(vv_quoi){
  vf_c_action=vv_quoi;
  switch(vv_quoi) {
    case "annuler":
			pf_aa_init();
    break;
    case "sortir":
    window.close();
    break;
    default:
    break;
  }
  }
function pf_fin_requete(stream){
  var vl_datas = stream;
  if (vl_datas=="ok") {
  	pf_etat_fen("sortir");
  } else {
  	alert(vl_datas)
	}
}
function pf_onunload(){}
function pf_validation(vv_quoi) {
  if(confirm("$vl_c_brf_109")==false) return;
	var vl_c_donnees="vl_blocnotebrut="+fa_enc(fa_value_get("tb_blocnotebrut"))+"&";
  fa_xmlhttprequest_txt(_c_script_bdope_fen,vl_c_donnees,pf_fin_requete);
}
]]></script>
END;
?>
