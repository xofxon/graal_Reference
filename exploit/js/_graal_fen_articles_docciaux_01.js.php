<?php
switch ($vl_c_genre){
  case "recfou": 
  	$vf_c_script="_graal_das_art_actions_recfou_01.php?";
  	$vl_c_arbre="tr_art_actions_recfou_01";
  	break;
  case "facfou": 
  	$vf_c_script="_graal_das_art_actions_facfou_01.php?";
  	$vl_c_arbre="tr_art_actions_facfou_01";
  	break;
}
echo <<<END
<script type="application/x-javascript"><![CDATA[
const vf_c_script="$vf_c_script";
const vf_c_script_fen_action='_graal_fen_actions_02.php?';
const lstn_grise = { 
	willRebuild : function(event){},
	didRebuild  : function(event){fa_grise_fenetre("","non");} 
};
function pf_aa_init() {
	fa_badl("$vl_c_arbre",lstn_grise);
	var vl_c_param=vf_c_script+"vl_art_cleunik=$vl_e_art_cleunik&raf_random="+Math.random()+"&vl_c_dateheuredebut=19610123&vl_c_dateheurefin=20610123&limit=-1&";
  fa_das("$vl_c_arbre",vl_c_param);
}
function pf_dblclick_arbre_art_actions(){
  var vl_c_nom="",vl_c_col="";
  var rowIndex=fa_cui("$vl_c_arbre");if(rowIndex == -1){return;}
  switch ("$vl_c_arbre") {
    case "tr_art_lignes_cdecli_01":vl_c_nom="tc_cdecli_action_cleunik";vl_c_col="tc_cdecli_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_cdefou_01":vl_c_nom="tc_cdefou_action_cleunik";vl_c_col="tc_cdefou_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_demfou_01":vl_c_nom="tc_demfou_action_cleunik";vl_c_col="tc_demfou_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_faccli_01":vl_c_nom="tc_faccli_action_cleunik";vl_c_col="tc_faccli_action_cleunik_choix_cleunik";break;
    case "tr_art_actions_facfou_01":vl_c_nom="tc_facfou_action_cleunik";vl_c_col="tc_facfou_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_livcli_01":vl_c_nom="tc_livcli_action_cleunik";vl_c_col="tc_livcli_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_offcli_01":vl_c_nom="tc_offcli_action_cleunik";vl_c_col="tc_offcli_action_cleunik_choix_cleunik";break;
    case "tr_art_actions_recfou_01":vl_c_nom="tc_recfou_action_cleunik";vl_c_col="tc_recfou_action_cleunik_choix_cleunik";break;
	case "tr_art_lignes_avocli_01":vl_c_nom="tc_avocli_action_cleunik";vl_c_col="tc_avocli_action_cleunik_choix_cleunik";break;
	case "tr_art_lignes_retcli_01":vl_c_nom="tc_retcli_action_cleunik";vl_c_col="tc_retcli_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_retfou_01":vl_c_nom="tc_retfou_action_cleunik";vl_c_col="tc_retfou_action_cleunik_choix_cleunik";break;
  }
  var vl_e_action_cleunik=fa_cell_get("$vl_c_arbre",rowIndex,vl_c_nom);
  var vl_e_choix_cleunik=fa_cell_get("$vl_c_arbre",rowIndex,vl_c_col);
  switch (vl_e_choix_cleunik) {
    case "-110114" : vl_c_genre="offcli";break;
    case "-110115" : vl_c_genre="demfou";break;
    case "-110108" : vl_c_genre="cdecli";break;
    case "-110109" : vl_c_genre="cdefou";break;
    case "-110110" : vl_c_genre="livcli";break;
    case "-110111" : vl_c_genre="recfou";break;
    case "-110112" : vl_c_genre="faccli";break;
    case "-110113" : vl_c_genre="facfou";break;
    case "-110116" : vl_c_genre="avocli";break;
    case "-110117" : vl_c_genre="avocli";break;
    case "-110133" : vl_c_genre="retcli";break;
    case "-110134" : vl_c_genre="retfou";break;
    default : vl_c_genre="$vl_c_genre";
  }
  vl_c_donnees="vf_e_action_cleunik="+fa_enc(vl_e_action_cleunik)+"&vf_c_action=modifier&genreaction="+fa_enc(vl_c_genre)+"&";
  fa_ouvre(vf_c_script_fen_action+vl_c_donnees,1000,700);
}
function pf_onunload(){
	fa_brl("$vl_c_arbre",lstn_grise);
}
]]></script>
END;
?>
