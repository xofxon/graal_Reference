<?php
$vl_c_bpd_111_js=fa_recup_dico_js("bpd_111");
echo <<<END
<script type="application/x-javascript"><![CDATA[
const _c_url_alimente_table_01="_graal_das_formulaire_internet_01.php?";
const vf_c_script_fen_action='_graal_fen_actions_02.php?';
var vf_c_script_das_action;
const lstn_grise = {
	willRebuild : function(event){}, 
	didRebuild  : function(event){fa_att_rem("_win_fen_formulaires_internet","cursor-wait");fa_grise_fenetre(event,"non");} 
}
function pf_aa_init(){
  fa05_sel_date('21','bpd_tb_deb','bpd_tb_fin');
  fa_check("me_tb_deb_21");
  pf_approximatif_bpd();
	fa_badl("arbre_des_entrees_formulaire",lstn_grise);
	fa_ael('tb_limit','input',pf_approximatif_bpd);
}
function pf_alimente_table(vv_qui){
	fa_grise_fenetre("","oui");
	fa_att_set("_win_fen_formulaires_internet","cursor-wait");
  fa_das(vv_qui,vf_c_script_das_action);
}
function pf_approximatif_bpd() {
	var vl_c_datedeb=fa_value_get("bpd_tb_deb");
	var vl_c_datefin=fa_value_get("bpd_tb_fin");
	vl_c_datedeb=vl_c_datedeb.replace("-", "", "gi");
	vl_c_datefin=vl_c_datefin.replace("-", "", "gi");
  vf_c_script_das_action=_c_url_alimente_table_01+'&raf_random='+Math.random()+'&vl_c_dateheuredebut='+fa_enc(vl_c_datedeb)+'&vl_c_dateheurefin='+fa_enc(vl_c_datefin)+"&vl_e_limit="+fa_value_get("bpd_tb_limit")+'&';
  pf_alimente_table("arbre_des_entrees_formulaire");
}
function pf_dblclick_arbre_actions_bdp(){
  var rowIndex = fa_cui("arbre_des_entrees_formulaire");if(rowIndex == -1){return;}
  var vl_e_action_cleunik=fa_cell_get("arbre_des_entrees_formulaire",rowIndex,"tc_action_cleunik");
  if (vl_e_action_cleunik!="") {
    vl_c_donnees="vf_e_action_cleunik="+fa_enc(vl_e_action_cleunik)+"&vf_c_action=modifier&genreaction=formul&";
    fa_ouvre(vf_c_script_fen_action+vl_c_donnees,1000,600);
  } else {
    alert("$vl_c_bpd_111_js");
  }
}

function pf_etat_fen(vv_quoi){
  switch(vv_quoi) {
    case "sortir":
      window.close();
    break;
    default:
    break;
  }
}
function pf_onunload(){
	fa_brl("arbre_des_entrees_formulaire",lstn_grise);
	fa_gid("bpd_tb_limit").removeEventListener("input",pf_approximatif_bpd, false);
}
]]></script>
END;
?>
