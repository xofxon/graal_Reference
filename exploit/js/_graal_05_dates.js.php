<?php
echo <<<END
<script type="application/x-javascript"><![CDATA[
function fa05_dates_en_clair(vv_quoi) {
switch (vv_quoi) {
  case "date":
    today = new Date;
    jour = today.getDay();
    numero = today.getDate();
    if (numero<10)
       numero = "0"+numero;
    mois = today.getMonth();
    annee = today.getFullYear();
    TabJour = new Array("Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi");
    TabMois = new Array("janvier","f&eacute;vrier","mars","avril","mai","juin","juillet","aout","septembre","octobre","novembre","dé&eacute;embre");
    messageDate = TabJour[jour] + " " + numero + " " + TabMois[mois] + " " + annee;
    return messageDate;
    break;
  case "heure" :
    today = new Date;
    hh = today.getHours();
    mm = today.getMinutes();
    ss = today.getSeconds();
    return hh+":"+mm+":"+ss;
    break;
  case "dateheure":
    return fa05_dates_en_clair("date")+" à "+fa05_dates_en_clair("heure");
    today = new Date;
    var toto=toLocaleString(today);
    return toto;
    break;
  }
}
function fa05_date_verif(input)
// Fonction de vérification de date avec les années bissextile par jerome.o 
//  http://www.editeurjavascript.com/scripts/scripts_temps_3_479.php
// Accepte en entrée les dates sous la forme : 02/02/2004, 2-2-2004 avec des / ou - ou .
// Retourne false si la date est fausse ou érronée
{
var vl_c_sep;
for (var i=0;i<input.length;i++)
{
  if ( isNaN(input.charAt(i))) {vl_c_sep=input.charAt(i);}
}
var regex = new RegExp("[/.-]");  //  Attention de bien laisser le - en dernier sinon considéré comme caractère d'exclusion
var date = input.split(regex);
var nbJours = new Array('',31,28,31,30,31,30,31,31,30,31,30,31);
var result = true;

if ( date['2'].length==1) {date['2']='200'+date['2'];}
if ( date['2'].length==2) {date['2']='20'+date['2'];}
if ( date['2'].length==3) {date['2']='2'+date['2'];}
if ( date['2']%4 == 0 && date['2']%100 > 0 || date['2']%400 == 0 )
nbJours['2'] = 29;

if( isNaN(date['2']) )
result=false;

if ( isNaN(date['1']) || date['1'] > 12 || date['1'] < 1 )
result=false;
if ( date['1'].length==1) {date['1']='0'+date['1'];}

if ( isNaN(date['0']) || date['0'] > nbJours[Math.round(date['1'])] || date['0'] < 1 )
result=false;
if ( date['0'].length==1) {date['0']='0'+date['0'];}
if (result==false)
{
return result;
}
else
{
return date['0']+vl_c_sep+date['1']+vl_c_sep+date['2'];
}
}
function fa05_sel_date(vv_quel,vv_deb,vv_fin) {
  var ladate_deb=new Date();
  var ladate_fin=new Date();
  var ladate_www=new Date();
  var ecart = "";
  switch (vv_quel) {
    case '1' :  //  Aujourd'hui
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate());
      ladate_fin= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate());
      break;
    case '2' :  //  semaine en cours
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate());
      ecart = (ladate_deb.getDay() + 6) % 7;
      ladate_deb= new Date(ladate_deb.getFullYear(), ladate_deb.getMonth(), ladate_deb.getDate()-ecart);
      ladate_fin= new Date(ladate_deb.getFullYear(), ladate_deb.getMonth(), ladate_deb.getDate()+6);
      break;
    case '3' :  //  Mois en cours
      {
        ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),1);
        var fdm = 31;
        var mois=ladate_deb.getMonth()+1;
        var an=ladate_deb.getFullYear();
        if(mois==4 ||mois==6 || mois==9 || mois==11 ) --fdm;
        if(mois==2) {
          fdm = fdm - 3;
          if(an%4==0) fdm++;
          if(an%100==0) fdm--;
          if(an%400==0) fdm++;
        }
        ladate_fin= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),fdm);
      }
      break;  
    case '4' :  //  Hier
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate()-1);
      ladate_fin= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate()-1);
      break;
    case '5' :  //  semaine précédente
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate());
      ecart = (ladate_deb.getDay() + 6) % 7;
      ladate_deb= new Date(ladate_deb.getFullYear(), ladate_deb.getMonth(), ladate_deb.getDate()-ecart-7);
      ladate_fin= new Date(ladate_deb.getFullYear(), ladate_deb.getMonth(), ladate_deb.getDate()+6);
      break;
    case '6' :  //  Mois précédent
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth()-1,1);
      var fdm = 31;
        var mois=ladate_deb.getMonth();
        var an=ladate_deb.getFullYear();
        if(mois==3 || mois==5 ||mois==8 || mois==10) --fdm;
        if(mois==1) {
          fdm = fdm - 3;
          if(an%4==0) fdm++;
          if(an%100==0) fdm--;
          if(an%400==0) fdm++;
        }
        ladate_fin= new Date(ladate_www.getFullYear(),mois,fdm);
      break;  
    case '7' :  //  Dans le passé
      ladate_deb= new Date(1961,0,23);
      ladate_fin= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate()-1);
      break;
    case '8' :  //  Demain
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate()+1);
      ladate_fin= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate()+1);
      break;  
    case '9' :  //  semaine suivante
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate());
      ecart = (ladate_deb.getDay() + 6) % 7;
      ladate_deb= new Date(ladate_deb.getFullYear(), ladate_deb.getMonth(), ladate_deb.getDate()-ecart+7);
      ladate_fin= new Date(ladate_deb.getFullYear(), ladate_deb.getMonth(), ladate_deb.getDate()+6);
      break;
    case '10' :  //  Mois suivant
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth()+1,1);
      var fdm = 31;
        var mois=ladate_deb.getMonth();
        var an=ladate_deb.getFullYear();
        if(mois==3 || mois==5 ||mois==8 || mois==10) --fdm;
        if(mois==1) {
          fdm = fdm - 3;
          if(an%4==0) fdm++;
          if(an%100==0) fdm--;
          if(an%400==0) fdm++;
        }
        ladate_fin= new Date(ladate_www.getFullYear(),mois,fdm);
      break;  
    case '11' :  //  Dans le futur
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate()+1);
      ladate_fin= new Date(2061,0,23);
      break;
    case '12' : // Semaine précédente glissante (J-7)
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate()-7);
      ladate_fin= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate());
      break;
    case '13' : // Semaine suivante glissante (J+7)
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate());
      ladate_fin= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate()+7);
      break;
    case '14' : // Année en cours
      ladate_deb= new Date(ladate_www.getFullYear(),0,1);
      ladate_fin= new Date(ladate_www.getFullYear(),11,31);
      break;
    case '15' : // Année précédente
      ladate_deb= new Date(ladate_www.getFullYear()-1,0,1);
      ladate_fin= new Date(ladate_www.getFullYear()-1,11,31);
      break;
    case '16' : // Année suivante
      ladate_deb= new Date(ladate_www.getFullYear()+1,0,1);
      ladate_fin= new Date(ladate_www.getFullYear()+1,11,31);
      break;
    case '17' : // Début du mois
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),1);
      ladate_fin= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate());
      break;
    case '18' : // Fin du mois
      {
        ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate());
        var fdm = 31;
        var mois=ladate_deb.getMonth()+1;
        var an=ladate_deb.getFullYear();
        if(mois==4 ||mois==6 || mois==9 || mois==11 ) --fdm;
        if(mois==2) {
          fdm = fdm - 3;
          if(an%4==0) fdm++;
          if(an%100==0) fdm--;
          if(an%400==0) fdm++;
        }
        ladate_fin= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),fdm);
      }
      break;
    case '19' : // Début de l'année
      ladate_deb= new Date(ladate_www.getFullYear(),0,1);
      ladate_fin= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate()-1);
      break;
    case '20' : // Fin du l'année
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate()+1);
      ladate_fin= new Date(ladate_www.getFullYear(),11,31);
      break;
    case '21' :  //  Ad vitam eternam
      ladate_deb= new Date(1961,0,23);
      ladate_fin= new Date(2061,0,23);
      break;
    case '22' : // 1° trimestre année précédente
      ladate_deb= new Date(ladate_www.getFullYear()-1,0,1);
      ladate_fin= new Date(ladate_www.getFullYear()-1,2,31);
      break;
    case '23' : // 2° trimestre année précédente
      ladate_deb= new Date(ladate_www.getFullYear()-1,3,1);
      ladate_fin= new Date(ladate_www.getFullYear()-1,5,30);
      break;
    case '24' : // 3° trimestre année précédente
      ladate_deb= new Date(ladate_www.getFullYear()-1,6,1);
      ladate_fin= new Date(ladate_www.getFullYear()-1,8,30);
      break;
    case '25' : // 4° trimestre année précédente
      ladate_deb= new Date(ladate_www.getFullYear()-1,9,1);
      ladate_fin= new Date(ladate_www.getFullYear()-1,11,31);
      break;
    case '26' : // 1° trimestre année en cours
      ladate_deb= new Date(ladate_www.getFullYear(),0,1);
      ladate_fin= new Date(ladate_www.getFullYear(),2,31);
      break;
    case '27' : // 2° trimestre année en cours
      ladate_deb= new Date(ladate_www.getFullYear(),3,1);
      ladate_fin= new Date(ladate_www.getFullYear(),5,30);
      break;
    case '28' : // 3° trimestre année en cours
      ladate_deb= new Date(ladate_www.getFullYear(),6,1);
      ladate_fin= new Date(ladate_www.getFullYear(),8,30);
      break;
    case '29' : // 4° trimestre année en cours
      ladate_deb= new Date(ladate_www.getFullYear(),9,1);
      ladate_fin= new Date(ladate_www.getFullYear(),11,31);
      break;
    case '30' : // 1° trimestre année suivante
      ladate_deb= new Date(ladate_www.getFullYear()+1,0,1);
      ladate_fin= new Date(ladate_www.getFullYear()+1,2,31);
      break;
    case '31' : // 2° trimestre année suivante
      ladate_deb= new Date(ladate_www.getFullYear()+1,3,1);
      ladate_fin= new Date(ladate_www.getFullYear()+1,5,30);
      break;
    case '32' : // 3° trimestre année suivante
      ladate_deb= new Date(ladate_www.getFullYear()+1,6,1);
      ladate_fin= new Date(ladate_www.getFullYear()+1,8,30);
      break;
    case '33' : // 4° trimestre année suivante
      ladate_deb= new Date(ladate_www.getFullYear()+1,9,1);
      ladate_fin= new Date(ladate_www.getFullYear()+1,11,31);
      break;
	case '34' : // 31 derniers jours
      ladate_deb= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate()-31);
      ladate_fin= new Date(ladate_www.getFullYear(),ladate_www.getMonth(),ladate_www.getDate());
      break; 
  }
  var vl_c_date=ladate_deb.getFullYear()+"-"+(ladate_deb.getMonth()+1)+"-"+ladate_deb.getDate();
  fa_value_set(vv_deb,vl_c_date);
  vl_c_date=ladate_fin.getFullYear()+"-"+(ladate_fin.getMonth()+1)+"-"+ladate_fin.getDate();
  fa_value_set(vv_fin,vl_c_date);
}
]]></script>
END;
?>
