<?php
echo <<<END
<script type="application/x-javascript"><![CDATA[
const _c_url_alimente_table_01="_graal_das_param_pc_01.php?";
const lstn_grise = { 
	willRebuild : function(event){},
	didRebuild  : function(event){fa_grise_fenetre("","non");} 
};
function pf_aa_init(){
	fa_badl("arbre_param_pc",lstn_grise);
  	pf_alimente_table("arbre_param_pc");
  	fa_focusdonne("tb_rechapproxima");
}
function pf_alimente_table(vv_qui){
	if ( fa_value_get("tb_rechapproxima") == "" ) {return;}
	fa_grise_fenetre("","oui");
	var raf_random=Math.random();
  	var vl_c_url_alimente_table='sortie=das&vl_c_limit='+fa_enc(fa_value_get("tb_limit"))+'&vl_c_recherche='+fa_enc(fa_value_get("tb_rechapproxima"))+'&vl_c_type='+fa_value_get("ml_zone")+'&raf_random='+raf_random+"&";
  	fa_das("arbre_param_pc",_c_url_alimente_table_01+vl_c_url_alimente_table);
}
function pf_etat_fen(vv_quoi){
  vf_c_action=vv_quoi;
  switch(vv_quoi) {
    case "renvoyer":
      var i=fa_cui("arbre_param_pc");if(i==-1){return;}
      var vl_e_pc_cleunik=fa_cell_get("arbre_param_pc",i,"tc_pc_cleunik");
      var vl_c_code=fa_cell_get("arbre_param_pc",i,"tc_code");
      var vl_c_intitule=fa_cell_get("arbre_param_pc",i,"tc_intitule");
      if (window.opener!=null) {
        switch ("$vl_c_quellerecherche") {
          case "uncompte_acteur" : 
            try {window.opener.pf_retour_param_pc(vf_e_pc_cleunik,vl_c_code,vl_c_intitule);} catch(e){}
            break;
          case "pc_tva_vente" : 
          case "pc_tva_achat" :
          case "pc_vente_port" : 
          case "pc_achat_port" :
          case "pc_vente_divers" : 
          case "pc_achat_divers" :
          case "pc_vente" : 
          case "pc_achat" :
			    case "pc_journal":
            try {window.opener.pf_retour_param_pc(vf_e_pc_cleunik,vl_c_code,vl_c_intitule,"$vl_c_quellerecherche");} catch(e){}
            break;
        }
      }
      window.close();
    case "sortir":
      window.close();
      break;
    default:
      break;
  }
}
function pf_sel_ligne(vv_qui){
  var i=fa_cui("arbre_param_pc");if(i==-1){return;}
  vf_e_pc_cleunik=fa_cell_get("arbre_param_pc",i,"tc_pc_cleunik");
}
]]></script>
END;
?>

