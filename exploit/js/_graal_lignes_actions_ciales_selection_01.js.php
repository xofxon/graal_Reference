<?php
$vl_c_genreaction_js=$vl_c_genreaction;
switch ($vl_c_genreaction_js){
  case "offcli"   :$vf_c_script_das_lignes="_graal_das_art_lignes_offcli_01.php?";$vf_c_arbre="tr_art_lignes_offcli_01";break;
  case "demfou"   :$vf_c_script_das_lignes="_graal_das_art_lignes_demfou_01.php?";$vf_c_arbre="tr_art_lignes_demfou_01";break;
  case "cdecli"   :$vf_c_script_das_lignes="_graal_das_art_lignes_cdecli_01.php?";$vf_c_arbre="tr_art_lignes_cdecli_01";break;
  case "cdecli_ral"   :$vf_c_script_das_lignes="_graal_das_art_lignes_cdecli_01.php?vl_c_particulier=3&";$vf_c_arbre="tr_art_lignes_cdecli_01";$vl_c_genreaction_js="cdecli";break;
  case "cdefou"   :$vf_c_script_das_lignes="_graal_das_art_lignes_cdefou_01.php?";$vf_c_arbre="tr_art_lignes_cdefou_01";break;
  case "cdefou_rar"   :$vf_c_script_das_lignes="_graal_das_art_lignes_cdefou_01.php?vl_c_particulier=4&";$vf_c_arbre="tr_art_lignes_cdefou_01";$vl_c_genreaction_js="cdefou";break;
  case "livcli"   :$vf_c_script_das_lignes="_graal_das_art_lignes_livcli_01.php?";$vf_c_arbre="tr_art_lignes_livcli_01";break;
  case "recfou"   :$vf_c_script_das_lignes="_graal_das_art_lignes_recfou_01.php?";$vf_c_arbre="tr_art_lignes_recfou_01";break;
  case "faccli"   :$vf_c_script_das_lignes="_graal_das_art_lignes_faccli_01.php?";$vf_c_arbre="tr_art_lignes_faccli_01";break;
  case "facfou"   :$vf_c_script_das_lignes="_graal_das_art_lignes_facfou_01.php?";$vf_c_arbre="tr_art_lignes_facfou_01";break;
  case "avocli"   :$vf_c_script_das_lignes="_graal_das_art_lignes_avocli_01.php?";$vf_c_arbre="tr_art_lignes_avocli_01";break;
  case "retcli"   :$vf_c_script_das_lignes="_graal_das_art_lignes_retcli_01.php?";$vf_c_arbre="tr_art_lignes_retcli_01";break;
  case "retfou"   :$vf_c_script_das_lignes="_graal_das_art_lignes_retfou_01.php?";$vf_c_arbre="tr_art_lignes_retfou_01";break;
}
echo <<<END
<script type="application/x-javascript"><![CDATA[
const vf_c_script_fen_action='_graal_fen_actions_02.php?';
const lstn_grise = { 
		willRebuild : function(event){},
		didRebuild  : function(event){pf_grise_fenetre("non");} 
	};
function pf_aa_init_bfp(vv_choix_date){
	fa_badl("$vf_c_arbre",lstn_grise);
	if ("$vl_e_art_cleunik"=="-1") {
	  fa05_sel_date(vv_choix_date,'bfp_tb_deb','bfp_tb_fin');
	  fa_att_set("ml_genre_action_rech","oncommand","pf_approximatif_bfp()");
	  fa_gid("bfp_cp01").selectedIndex=12;
	  fa_grise_oui('ml_genre_action_rech');
	  pf_approximatif_bfp();
	} else {
		fa_value_set("bfp_tb_rechapproxima","$vl_c_code");
		fa_grise_oui("bfp_tb_rechapproxima");
		fa_grise_oui("ml_genre_action_rech");
		fa_grise_oui("ml_statut_action_cial_rech");
		fa_grise_oui("bfp_ml_operat_statut");
		fa_value_set("bfp_ml_type_recherche","1");
		fa_grise_oui("bfp_ml_type_recherche");
		fa_value_set("bfp_tb_deb","$vl_c_datedebut");
		fa_value_set("bfp_tb_fin","$vl_c_datefin");
		fa_mlsel("ml_statut_action_cial_rech","$statut_action_cial_rech");
		pf_approximatif_bfp();
	}
}
function pf_approximatif_bfp() {
	if ("$vl_e_art_cleunik"=="-1") {
	  var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_dateheuredebut="+fa_enc(fa_date_formate(fa_value_get("bfp_tb_deb"),"AAAAMMJJ"))+"&vl_c_dateheurefin="+fa_enc(fa_date_formate(fa_value_get("bfp_tb_fin"),"AAAAMMJJ"))+"&statut="+fa_enc(fa_mlget("ml_statut_action_cial_rech"))+"&limit="+fa_value_get("bfp_tb_limit")+"&";
	  vl_c_param+='&vl_operat_statut='+fa_mlget("bfp_ml_operat_statut","value");
		vl_c_param+='&vl_type_recherche='+fa_mlget("bfp_ml_type_recherche","value");
		vl_c_param+='&vl_c_recherche='+fa_enc(fa_value_get("bfp_tb_rechapproxima"));
		pf_grise_fenetre("oui");
		fa_das("$vf_c_arbre",vl_c_param);
	} else {
		 var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_dateheuredebut="+fa_enc(fa_date_formate(fa_value_get("bfp_tb_deb"),"AAAAMMJJ"))+"&vl_c_dateheurefin="+fa_enc(fa_date_formate(fa_value_get("bfp_tb_fin"),"AAAAMMJJ"))+"&statut="+fa_enc(fa_mlget("ml_statut_action_cial_rech"))+"&limit="+fa_value_get("bfp_tb_limit")+"&";
	  vl_c_param+='&vl_operat_statut='+fa_value_get("bfp_ml_operat_statut");
		vl_c_param+='&vl_type_recherche=0';
		vl_c_param+='&vl_art_cleunik=$vl_e_art_cleunik';
		pf_grise_fenetre("oui");
		fa_das("$vf_c_arbre",vl_c_param);
	}
}
function pf_dblclick_arbre_lignes(){
  var vl_c_nom="",vl_c_col="";
  var rowIndex=fa_cui("$vf_c_arbre");if(rowIndex == -1){return;}
  switch ("$vf_c_arbre") {
    case "tr_art_lignes_cdecli_01":vl_c_nom="tc_cdecli_action_cleunik";vl_c_col="tc_cdecli_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_cdefou_01":vl_c_nom="tc_cdefou_action_cleunik";vl_c_col="tc_cdefou_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_demfou_01":vl_c_nom="tc_demfou_action_cleunik";vl_c_col="tc_demfou_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_faccli_01":vl_c_nom="tc_faccli_action_cleunik";vl_c_col="tc_faccli_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_facfou_01":vl_c_nom="tc_facfou_action_cleunik";vl_c_col="tc_facfou_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_livcli_01":vl_c_nom="tc_livcli_action_cleunik";vl_c_col="tc_livcli_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_offcli_01":vl_c_nom="tc_offcli_action_cleunik";vl_c_col="tc_offcli_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_recfou_01":vl_c_nom="tc_recfou_action_cleunik";vl_c_col="tc_recfou_action_cleunik_choix_cleunik";break;
	case "tr_art_lignes_avocli_01":vl_c_nom="tc_avocli_action_cleunik";vl_c_col="tc_avocli_action_cleunik_choix_cleunik";break;
	case "tr_art_lignes_retcli_01":vl_c_nom="tc_retcli_action_cleunik";vl_c_col="tc_retcli_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_retfou_01":vl_c_nom="tc_retfou_action_cleunik";vl_c_col="tc_retfou_action_cleunik_choix_cleunik";break;
  }
  var vl_e_action_cleunik=fa_cell_get("$vf_c_arbre",rowIndex,vl_c_nom);
  var vl_e_choix_cleunik=fa_cell_get("$vf_c_arbre",rowIndex,vl_c_col);
  switch (vl_e_choix_cleunik) {
    case "-110114" : vl_c_genre="offcli";break;
    case "-110115" : vl_c_genre="demfou";break;
    case "-110108" : vl_c_genre="cdecli";break;
    case "-110109" : vl_c_genre="cdefou";break;
    case "-110110" : vl_c_genre="livcli";break;
    case "-110111" : vl_c_genre="recfou";break;
    case "-110112" : vl_c_genre="faccli";break;
    case "-110113" : vl_c_genre="facfou";break;
    case "-110116" : vl_c_genre="avocli";break;
    case "-110117" : vl_c_genre="avocli";break;
    case "-110133" : vl_c_genre="retcli";break;
    case "-110134" : vl_c_genre="retfou";break;
    default : vl_c_genre="$vl_c_genreaction_js";
  }
  vl_c_donnees="vf_e_action_cleunik="+fa_enc(vl_e_action_cleunik)+"&vf_c_action=modifier&genreaction="+fa_enc(vl_c_genre)+"&";
  fa_ouvre(vf_c_script_fen_action+vl_c_donnees,1000,700);
}
function pf_grise_fenetre(vv_quoi){
	switch (vv_quoi){
		case "oui":
			fa_grise_oui("_graal_fen_lignes_actions_ciales_01");
			fa_grise_fenetre("","oui");
			break;
		case "non":
			fa_grise_non("_graal_fen_lignes_actions_ciales_01");
			fa_grise_fenetre("","non");
			break;
	}
}
function pf_ouvre(vv_quoi_01) {
  switch (vv_quoi_01) {
    case "art":
		var vl_c_nom="",vl_c_col="";
		  var rowIndex=fa_cui("$vf_c_arbre");if(rowIndex == -1){return;}
		  switch ("$vf_c_arbre") {
		    case "tr_art_lignes_cdecli_01":vl_c_nom="tc_cdecli_art_cleunik";break;
		    case "tr_art_lignes_cdefou_01":vl_c_nom="tc_cdefou_art_cleunik";break;
		    case "tr_art_lignes_demfou_01":vl_c_nom="tc_demfou_art_cleunik";break;
		    case "tr_art_lignes_faccli_01":vl_c_nom="tc_faccli_art_cleunik";break;
		    case "tr_art_lignes_facfou_01":vl_c_nom="tc_facfou_art_cleunik";break;
		    case "tr_art_lignes_livcli_01":vl_c_nom="tc_livcli_art_cleunik";break;
		    case "tr_art_lignes_offcli_01":vl_c_nom="tc_offcli_art_cleunik";break;
		    case "tr_art_lignes_recfou_01":vl_c_nom="tc_recfou_art_cleunik";break;
			case "tr_art_lignes_avocli_01":vl_c_nom="tc_avocli_art_cleunik";break;
			case "tr_art_lignes_retcli_01":vl_c_nom="tc_retcli_art_cleunik";break;
		    case "tr_art_lignes_retfou_01":vl_c_nom="tc_retfou_art_cleunik";break;
		  }
		  var vl_e_art_cleunik=fa_cell_get("$vf_c_arbre",rowIndex,vl_c_nom);
		  fa_ouvre_article('genre=tousss&vl_e_art_cleunik='+vl_e_art_cleunik+"&","");
      break;
  }
}

]]></script>
END;
?>
