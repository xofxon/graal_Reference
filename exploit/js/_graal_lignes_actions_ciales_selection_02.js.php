<?php
$js_01="";
$vl_c_bfy_106=fa_recup_dico_js("bfy_106");
$vl_c_bfy_107=fa_recup_dico_js("bfy_107");
switch ($vl_c_genreaction){
  case "offcli"   :
		$vf_c_script_das_lignes="_graal_das_art_lignes_offcli_01.php?";
		$vf_c_arbre="tr_art_lignes_offcli_01";
$js_01=<<<EOT
function pf_actions_speciales(vv_laquelle){
	switch (vv_laquelle){
		case "-1":
			fa_cache_non("bfp_action_recherche_01");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_offcli_01");
			pf_approximatif_bfp();
			break;
		case "1":	//	lignes sans date de confirmation
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_offcli_02");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
		case "2":	//	lignes sans date de demande
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_offcli_03");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
	}
}
function pf_traitement_speciaux(vv_lequel){
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_confirm&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_demande&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;			
	}
}
function pf_traitement_speciaux_fin(stream,vv_lequel){
	if (stream==""){
		alert("$vl_c_bfy_106");
	} else {
		alert("$vl_c_bfy_107")
	}
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête		
			pf_actions_speciales(vv_lequel)
			break;
	}
}
EOT;
		break;
  case "demfou"   :
		$vf_c_script_das_lignes="_graal_das_art_lignes_demfou_01.php?";
		$vf_c_arbre="tr_art_lignes_demfou_01";
$js_01=<<<EOT
function pf_actions_speciales(vv_laquelle){
	switch (vv_laquelle){
		case "-1":
			fa_cache_non("bfp_action_recherche_01");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_demfou_01");
			pf_approximatif_bfp();
			break;
		case "1":	//	lignes sans date de confirmation
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_demfou_02");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
		case "2":	//	lignes sans date de demande
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_demfou_03");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
	}
}
function pf_traitement_speciaux(vv_lequel){
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_confirm&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_demande&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;			
	}
}
function pf_traitement_speciaux_fin(stream,vv_lequel){
	if (stream==""){
		alert("$vl_c_bfy_106");
	} else {
		alert("$vl_c_bfy_107")
	}
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête		
			pf_actions_speciales(vv_lequel)
			break;
	}
}
EOT;
		break;
  case "cdecli"   :
		$vf_c_script_das_lignes="_graal_das_art_lignes_cdecli_01.php?";
		$vf_c_arbre="tr_art_lignes_cdecli_01";
$js_01=<<<EOT
function pf_actions_speciales(vv_laquelle){
	switch (vv_laquelle){
		case "-1":
			fa_cache_non("bfp_action_recherche_01");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_cdecli_01");
			pf_approximatif_bfp();
			break;
		case "1":	//	lignes sans date de confirmation
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_cdecli_02");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
		case "2":	//	lignes sans date de demande
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_cdecli_03");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
	}
}
function pf_traitement_speciaux(vv_lequel){
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_confirm&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_demande&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;			
	}
}
function pf_traitement_speciaux_fin(stream,vv_lequel){
	if (stream==""){
		alert("$vl_c_bfy_106");
	} else {
		alert("$vl_c_bfy_107")
	}
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête		
			pf_actions_speciales(vv_lequel)
			break;
	}
}
EOT;
		break;
  case "cdefou"   :
		$vf_c_script_das_lignes="_graal_das_art_lignes_cdefou_01.php?";
		$vf_c_arbre="tr_art_lignes_cdefou_01";
$js_01=<<<EOT
function pf_actions_speciales(vv_laquelle){
	switch (vv_laquelle){
		case "-1":
			fa_cache_non("bfp_action_recherche_01");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_cdefou_01");
			pf_approximatif_bfp();
			break;
		case "1":	//	lignes sans date de confirmation
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_cdefou_02");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
		case "2":	//	lignes sans date de demande
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_cdefou_03");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
	}
}
function pf_traitement_speciaux(vv_lequel){
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_confirm&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_demande&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;			
	}
}
function pf_traitement_speciaux_fin(stream,vv_lequel){
	if (stream==""){
		alert("$vl_c_bfy_106");
	} else {
		alert("$vl_c_bfy_107")
	}
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête		
			pf_actions_speciales(vv_lequel)
			break;
	}
}
EOT;
		break;
  case "livcli"   :
		$vf_c_script_das_lignes="_graal_das_art_lignes_livcli_01.php?";
		$vf_c_arbre="tr_art_lignes_livcli_01";
$js_01=<<<EOT
function pf_actions_speciales(vv_laquelle){
	switch (vv_laquelle){
		case "-1":
			fa_cache_non("bfp_action_recherche_01");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_livcli_01");
			pf_approximatif_bfp();
			break;
		case "1":	//	lignes sans date de confirmation
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_livcli_02");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
		case "2":	//	lignes sans date de demande
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_livcli_03");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
	}
}
function pf_traitement_speciaux(vv_lequel){
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_confirm&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_demande&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;			
	}
}
function pf_traitement_speciaux_fin(stream,vv_lequel){
	if (stream==""){
		alert("$vl_c_bfy_106");
	} else {
		alert("$vl_c_bfy_107")
	}
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête		
			pf_actions_speciales(vv_lequel)
			break;
	}
}
EOT;
		break;
  case "recfou"   :
		$vf_c_script_das_lignes="_graal_das_art_lignes_recfou_01.php?";
		$vf_c_arbre="tr_art_lignes_recfou_01";
$js_01=<<<EOT
function pf_actions_speciales(vv_laquelle){
	switch (vv_laquelle){
		case "-1":
			fa_cache_non("bfp_action_recherche_01");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_recfou_01");
			pf_approximatif_bfp();
			break;
		case "1":	//	lignes sans date de confirmation
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_recfou_02");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
		case "2":	//	lignes sans date de demande
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_recfou_03");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
	}
}
function pf_traitement_speciaux(vv_lequel){
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_confirm&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_demande&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;			
	}
}
function pf_traitement_speciaux_fin(stream,vv_lequel){
	if (stream==""){
		alert("$vl_c_bfy_106");
	} else {
		alert("$vl_c_bfy_107")
	}
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête		
			pf_actions_speciales(vv_lequel)
			break;
	}
}
EOT;
		break;
  case "faccli"   :
		$vf_c_script_das_lignes="_graal_das_art_lignes_faccli_01.php?";
		$vf_c_arbre="tr_art_lignes_faccli_01";
$js_01=<<<EOT
function pf_actions_speciales(vv_laquelle){
	switch (vv_laquelle){
		case "-1":
			fa_cache_non("bfp_action_recherche_01");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_faccli_01");
			pf_approximatif_bfp();
			break;
		case "1":	//	lignes sans date de confirmation
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_faccli_02");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
		case "2":	//	lignes sans date de demande
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_faccli_03");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
	}
}
function pf_traitement_speciaux(vv_lequel){
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_confirm&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_demande&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;			
	}
}
function pf_traitement_speciaux_fin(stream,vv_lequel){
	if (stream==""){
		alert("$vl_c_bfy_106");
	} else {
		alert("$vl_c_bfy_107")
	}
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête		
			pf_actions_speciales(vv_lequel)
			break;
	}
}
EOT;
		break;
  case "facfou"   :
		$vf_c_script_das_lignes="_graal_das_art_lignes_facfou_01.php?";
		$vf_c_arbre="tr_art_lignes_facfou_01";
$js_01=<<<EOT
function pf_actions_speciales(vv_laquelle){
	switch (vv_laquelle){
		case "-1":
			fa_cache_non("bfp_action_recherche_01");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_facfou_01");
			pf_approximatif_bfp();
			break;
		case "1":	//	lignes sans date de confirmation
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_facfou_02");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
		case "2":	//	lignes sans date de demande
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_facfou_03");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
	}
}
function pf_traitement_speciaux(vv_lequel){
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_confirm&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_demande&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;			
	}
}
function pf_traitement_speciaux_fin(stream,vv_lequel){
	if (stream==""){
		alert("$vl_c_bfy_106");
	} else {
		alert("$vl_c_bfy_107")
	}
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête		
			pf_actions_speciales(vv_lequel)
			break;
	}
}
EOT;
		break;
  case "avocli"   :
		$vf_c_script_das_lignes="_graal_das_art_lignes_avocli_01.php?";
		$vf_c_arbre="tr_art_lignes_avocli_01";
$js_01=<<<EOT
function pf_actions_speciales(vv_laquelle){
	switch (vv_laquelle){
		case "-1":
			fa_cache_non("bfp_action_recherche_01");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_avocli_01");
			pf_approximatif_bfp();
			break;
		case "1":	//	lignes sans date de confirmation
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_avocli_02");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
		case "2":	//	lignes sans date de demande
			fa_cache_oui("bfp_action_recherche_01");
			var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_particulier="+vv_laquelle+"&";
			pf_grise_fenetre("oui");
			fa_att_set("$vf_c_arbre","context","pop_tr_art_lignes_avocli_03");
			fa_das("$vf_c_arbre",vl_c_param);
			break;
	}
}
function pf_traitement_speciaux(vv_lequel){
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_confirm&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête
			var vl_t_ligne_qte_cleunik=[];
			vl_t_ligne_qte_cleunik=pf_selections_ligne_qte();
			if (vl_t_ligne_qte_cleunik.length==0) {return;}
		  fa_xmlhttprequest_txt(vf_c_script_bdope+"kilometre_dateheure_demande&",'vl_t_listecles='+fa_jsarray2php_00(vl_t_ligne_qte_cleunik),pf_traitement_speciaux_fin,vv_lequel);
			break;			
	}
}
function pf_traitement_speciaux_fin(stream,vv_lequel){
	if (stream==""){
		alert("$vl_c_bfy_106");
	} else {
		alert("$vl_c_bfy_107")
	}
	switch (vv_lequel){
		case "1":	//	Dates de confirmation de ligne à zéro mises à jour avec date de ligne demandée
		case "2":	//	Dates de confirmation de ligne à zéro mises à jour avec date d'entête		
			pf_actions_speciales(vv_lequel)
			break;
	}
}
EOT;
		break;}
echo <<<END
<script type="application/x-javascript"><![CDATA[
const vf_c_script_fen_action='_graal_fen_actions_02.php?';
const vf_c_script_bdope="_graal_bdope_cial_lignes_01.php?genreaction=$vl_c_genreaction&vf_c_action=";
const lstn_grise = { 
		willRebuild : function(event){},
		didRebuild  : function(event){pf_grise_fenetre("non");} 
	};
function pf_aa_init_bfp(vv_choix_date){
  fa05_sel_date(vv_choix_date,'bfp_tb_deb','bfp_tb_fin');
  fa_att_set("ml_genre_action_rech","oncommand","pf_approximatif_bfp()");
  fa_gid("bfp_cp01").selectedIndex=12;
  fa_grise_oui('ml_genre_action_rech');
	fa_badl("$vf_c_arbre",lstn_grise);
	fa_att_set("$vf_c_arbre","seltype","multiple");
  pf_approximatif_bfp();
}
$js_01
function pf_approximatif_bfp() {
  var vl_c_param="$vf_c_script_das_lignes"+"raf_random="+Math.random()+"&vl_c_dateheuredebut="+fa_enc(fa_date_formate(fa_value_get("bfp_tb_deb"),"AAAAMMJJ"))+"&vl_c_dateheurefin="+fa_enc(fa_date_formate(fa_value_get("bfp_tb_fin"),"AAAAMMJJ"))+"&statut="+fa_enc(fa_mlget("ml_statut_action_cial_rech"))+"&limit="+fa_value_get("bfp_tb_limit")+"&";
  vl_c_param+='&vl_operat_statut='+fa_mlget("bfp_ml_operat_statut","value");
	vl_c_param+='&vl_type_recherche='+fa_mlget("bfp_ml_type_recherche","value");
	vl_c_param+='&vl_c_recherche='+fa_enc(fa_value_get("bfp_tb_rechapproxima"));
	pf_grise_fenetre("oui");
	fa_das("$vf_c_arbre",vl_c_param);
}
function pf_dblclick_arbre_lignes(){
  var vl_c_nom="",vl_c_col="";
  var rowIndex=fa_cui("$vf_c_arbre");if(rowIndex == -1){return;}
  switch ("$vf_c_arbre") {
    case "tr_art_lignes_cdecli_01":vl_c_nom="tc_cdecli_action_cleunik";vl_c_col="tc_cdecli_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_cdefou_01":vl_c_nom="tc_cdefou_action_cleunik";vl_c_col="tc_cdefou_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_demfou_01":vl_c_nom="tc_demfou_action_cleunik";vl_c_col="tc_demfou_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_faccli_01":vl_c_nom="tc_faccli_action_cleunik";vl_c_col="tc_faccli_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_facfou_01":vl_c_nom="tc_facfou_action_cleunik";vl_c_col="tc_facfou_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_livcli_01":vl_c_nom="tc_livcli_action_cleunik";vl_c_col="tc_livcli_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_offcli_01":vl_c_nom="tc_offcli_action_cleunik";vl_c_col="tc_offcli_action_cleunik_choix_cleunik";break;
    case "tr_art_lignes_recfou_01":vl_c_nom="tc_recfou_action_cleunik";vl_c_col="tc_recfou_action_cleunik_choix_cleunik";break;
		case "tr_art_lignes_avocli_01":vl_c_nom="tc_avocli_action_cleunik";vl_c_col="tc_avocli_action_cleunik_choix_cleunik";break;
  }
  var vl_e_action_cleunik=fa_cell_get("$vf_c_arbre",rowIndex,vl_c_nom);
  var vl_e_choix_cleunik=fa_cell_get("$vf_c_arbre",rowIndex,vl_c_col);
  switch (vl_e_choix_cleunik) {
    case "-110114" : vl_c_genre="offcli";break;
    case "-110115" : vl_c_genre="demfou";break;
    case "-110108" : vl_c_genre="cdecli";break;
    case "-110109" : vl_c_genre="cdefou";break;
    case "-110110" : vl_c_genre="livcli";break;
    case "-110111" : vl_c_genre="recfou";break;
    case "-110112" : vl_c_genre="faccli";break;
    case "-110113" : vl_c_genre="facfou";break;
    case "-110116" : vl_c_genre="avocli";break;
    case "-110117" : vl_c_genre="avocli";break;
    default : vl_c_genre="$vl_c_genreaction";
  }
  vl_c_donnees="vf_e_action_cleunik="+fa_enc(vl_e_action_cleunik)+"&vf_c_action=modifier&genreaction="+fa_enc(vl_c_genre)+"&";
  fa_ouvre(vf_c_script_fen_action+vl_c_donnees,1000,600);
}
function pf_grise_fenetre(vv_quoi){
	switch (vv_quoi){
		case "oui":
			fa_grise_oui("_graal_fen_lignes_actions_ciales_01");
			fa_grise_fenetre("","oui");
			break;
		case "non":
			fa_grise_non("_graal_fen_lignes_actions_ciales_01");
			fa_grise_fenetre("","non");
			break;
	}
}
function pf_selections_ligne_qte() {
	var vl_t_tableau=[];
  var vl_e_nb_sel;
  var vl_t_ligne_qte_cleunik=[];
  vl_t_tableau=fa_lignes_selectionnees("$vf_c_arbre");
  switch ("$vf_c_arbre") {
    case "tr_art_lignes_cdecli_01":vl_c_nom="tc_cdecli_ligne_qte_cleunik";break;
    case "tr_art_lignes_cdefou_01":vl_c_nom="tc_cdefou_ligne_qte_cleunik";break;
    case "tr_art_lignes_demfou_01":vl_c_nom="tc_demfou_ligne_qte_cleunik";break;
    case "tr_art_lignes_faccli_01":vl_c_nom="tc_faccli_ligne_qte_cleunik";break;
    case "tr_art_lignes_facfou_01":vl_c_nom="tc_facfou_ligne_qte_cleunik";break;
    case "tr_art_lignes_livcli_01":vl_c_nom="tc_livcli_ligne_qte_cleunik";break;
    case "tr_art_lignes_offcli_01":vl_c_nom="tc_offcli_ligne_qte_cleunik";break;
    case "tr_art_lignes_recfou_01":vl_c_nom="tc_recfou_ligne_qte_cleunik";break;
	case "tr_art_lignes_avocli_01":vl_c_nom="tc_avocli_ligne_qte_cleunik";break;
  }
  vl_e_nb_sel=vl_t_tableau.length;
  if (vl_e_nb_sel!=0) {
    for(i=0;i<vl_e_nb_sel;i++) {
      vl_t_ligne_qte_cleunik[i]=fa_cell_get("$vf_c_arbre",vl_t_tableau[i],vl_c_nom);
    }
  }
	return vl_t_ligne_qte_cleunik;
}
]]></script>
END;
?>
