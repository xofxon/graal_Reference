<?php
echo <<<END
/*
********************************************************************************************************************************
**********  Fenêtre des importations des fichiers de trésorerie (_import_apisoft_fen_importation_05.php)                ********
********************************************************************************************************************************
*/
<script type="application/x-javascript"><![CDATA[
const _c_url_impor_banque="_import_apisoft_treso_banques_01.php?";
const _c_url_impor_journa="_import_apisoft_treso_journal_01.php?";
const _c_url_impor_remise="_import_apisoft_treso_remises_01.php?";
const _c_url_impor_echean="_import_apisoft_treso_echeanc_01.php?";
const _c_url_impor_reglem="_import_apisoft_treso_regleme_01.php?";
function pf_etat_fen(vv_quoi){
  switch(vv_quoi)  {
    case "ini":
      break;
    case "sortir":
      window.close();  //  Ne fonctionne que si c'est une nouvelle fenêtre
      break;   
    default:
      break;
  }
}
function pf_importation(vv_quoi){
  var param="";
  var vl_c_base_origine=fa_value_get("c_base_ori");
  var vl_c_base_destination=fa_value_get("c_base_des");
  switch(vv_quoi) {
    case 'treso_banques': //  Fichier des banques
      param +="vl_c_base_origine="+vl_c_base_origine+"&";
      param +="vl_c_base_destination="+vl_c_base_destination+"&";
			fa_att_set("_graal_trad_objets_01","wait-cursor","true");
  		fa_grise_fenetre("","oui");
      fa_xmlhttprequest_txt(_c_url_impor_banque,param,pf_importation_retour);
      break;
    case 'treso_journal': //  Fichier des journaux
      param +="vl_c_base_origine="+vl_c_base_origine+"&";
      param +="vl_c_base_destination="+vl_c_base_destination+"&";
      param +="vl_c_type_doc="+vv_quoi+"&";
			fa_att_set("_graal_trad_objets_01","wait-cursor","true");
  		fa_grise_fenetre("","oui");
      fa_xmlhttprequest_txt(_c_url_impor_journa,param,pf_importation_retour);
      break;
		case 'treso_remises': //  Fichier des remises en banque
      param +="vl_c_base_origine="+vl_c_base_origine+"&";
      param +="vl_c_base_destination="+vl_c_base_destination+"&";
			fa_att_set("_graal_trad_objets_01","wait-cursor","true");
  		fa_grise_fenetre("","oui");
      fa_xmlhttprequest_txt(_c_url_impor_remise,param,pf_importation_retour);
      break;
		case 'treso_echeanc_cli': //  Fichier des échéances clients
      param +="vl_c_base_origine="+vl_c_base_origine+"&";
      param +="vl_c_base_destination="+vl_c_base_destination+"&";
			param +="vl_c_genre=cli&";
			fa_att_set("_graal_trad_objets_01","wait-cursor","true");
  		fa_grise_fenetre("","oui");
      fa_xmlhttprequest_txt(_c_url_impor_echean,param,pf_importation_retour);
      break;			
		case 'treso_echeanc_fou': //  Fichier des échéances fournisseurs
      param +="vl_c_base_origine="+vl_c_base_origine+"&";
      param +="vl_c_base_destination="+vl_c_base_destination+"&";
			param +="vl_c_genre=fou&";
			fa_att_set("_graal_trad_objets_01","wait-cursor","true");
  		fa_grise_fenetre("","oui");
      fa_xmlhttprequest_txt(_c_url_impor_echean,param,pf_importation_retour);
      break;			
		case 'treso_regleme_cli': //  Fichier des réglements clients
      param +="vl_c_base_origine="+vl_c_base_origine+"&";
      param +="vl_c_base_destination="+vl_c_base_destination+"&";
			param +="vl_c_genre=cli&";
			fa_att_set("_graal_trad_objets_01","wait-cursor","true");
  		fa_grise_fenetre("","oui");
      fa_xmlhttprequest_txt(_c_url_impor_reglem,param,pf_importation_retour);
      break;
		case 'treso_regleme_fou': //  Fichier des réglements fournisseurs
      param +="vl_c_base_origine="+vl_c_base_origine+"&";
      param +="vl_c_base_destination="+vl_c_base_destination+"&";
			param +="vl_c_genre=fou&";
			fa_att_set("_graal_trad_objets_01","wait-cursor","true");
  		fa_grise_fenetre("","oui");
      fa_xmlhttprequest_txt(_c_url_impor_reglem,param,pf_importation_retour);
      break;
    default:
      alert("Erreur de programmation !!!->'"+vv_quoi+"'<-!!!");
  }
}
function pf_importation_retour(stream){
  var vl_datas = stream;
  fa_att_rem("_graal_trad_objets_01","wait-cursor");
  alert(vl_datas);
	fa_grise_fenetre("","non");
}
]]></script>
END;
