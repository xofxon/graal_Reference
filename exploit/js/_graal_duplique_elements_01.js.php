<?php
echo <<<END
<script type="application/x-javascript"><![CDATA[
const vf_c_script_bdope_fen='_graal_duplique_elements_objets_01.php?';
function pf_etat_fen(vv_quoi) {
   vf_c_action=vv_quoi;
   switch(vv_quoi) {
     case "ini":
       break;
     case "sortir":
       window.close();  //  Ne fonctionne que si c'est une nouvelle fenêtre
       break;   
     default:
      break;
  }
}
function pf_fin_requete(stream){
  var vl_datas = stream;
  fa_gid("win_duplique_elements").removeAttribute('wait-cursor');
  fa_grise_non("bt_enregistrer");
  fa_grise_non("bt_enregistrer_tous");
  alert("Duplication terminée.");
}
function pf_validation(vv_quoi){
  var s="";
  s +="vl_e_obj_cleunik_ori="+fa_gid("la_obj_origine").getAttribute("_graal_cleunik")+"&";
  switch (vv_quoi) {
    case "enregistrer":
      s +="vl_e_obj_cleunik_des="+fa_mlget("ml_objets")+"&";
      s +="vl_type=unseul&";
      break;
    case "enregistrer_tous":
      s +="vl_type=tous&vl_c_prefixe=$vl_c_prefixe&vl_c_type_objet=$vl_c_type_objet&";
      break;
  }
  fa_att_set("win_duplique_elements",'wait-cursor',true);
  fa_grise_oui("bt_enregistrer");
  fa_grise_oui("bt_enregistrer_tous");
  fa_xmlhttprequest_txt(vf_c_script_bdope_fen,s,pf_fin_requete);
}
]]></script>
END;
?>
