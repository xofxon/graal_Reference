<?php
echo <<<END
<script type="application/x-javascript"><![CDATA[
var vf_c_url_alimente_table;
const vf_c_script_adrpost_act='_graal_das_acteurs_adresses_01.php?sortie=das&';
const vf_c_carte='_graal_loc_01.php';
const vf_c_script_fen_acteur="_graal_fen_acteurs_01.php?genreacteur=";
const vf_c_fen_adr="_graal_fen_act_adresses_01.php?genreacteur=";
const lstn_grise = { 
	willRebuild : function(event){fa_grise_oui("aai_tb_rechapproxima");fa_grise_fenetre(event,"oui");},
	didRebuild  : function(event){fa_grise_non("aai_tb_rechapproxima");fa_grise_fenetre(event,"non");} 
};
function pf_adresse_ouvre() {
  var rowIndex = fa_cui("adressespostales_des_acteurs");if(rowIndex == -1){return;}
  var param=fa_cell_get("adressespostales_des_acteurs",rowIndex,"adr_typeacteur")+"&vl_e_act_cleunik="+fa_cell_get("adressespostales_des_acteurs",rowIndex,"adr_act_cleunik")+"&vl_e_adr_cleunik="+fa_cell_get("adressespostales_des_acteurs",rowIndex,"adr_cleunik")+"&";
  fa_ouvre(vf_c_fen_adr+param,600,350);
}
function pf_acteur_ouvre() {
  var rowIndex = fa_cui("adressespostales_des_acteurs");if(rowIndex == -1){return;}
  var param=fa_cell_get("adressespostales_des_acteurs",rowIndex,"adr_typeacteur")+"&act_cleunik="+fa_cell_get("adressespostales_des_acteurs",rowIndex,"adr_act_cleunik")+"&";
  fa_ouvre(vf_c_script_fen_acteur+param,1000,800);
}
function pf_alimente_table(){
  switch (fa_value_get("aao_ml_qui")){
    case "9":
      fa_cache_non("portee");
      break;
    default:
      fa_cache_oui("portee");
      break;
  }
  fa_das("adressespostales_des_acteurs",vf_c_url_alimente_table);
}
function pf_approximatif(){
  var vl_e_typeacteur=0;
  var vl_c_texte=fa_value_get("aai_tb_rechapproxima");
  fa_grise_oui("aai_tb_rechapproxima");
	fa_grise_fenetre("","oui"); 
  item=fa_gid("bao_ml_actif").selectedItem;  
  vf_c_url_alimente_table =vf_c_script_adrpost_act+'vf_c_genre=B&listecles=&vl_c_recherche='+fa_enc(vl_c_texte)+'&vl_e_typeacteur='+fa_value_get("bao_ml_qui")+'&vl_c_zone='+fa_value_get("aai_ml_zone")+'&vl_c_type='+fa_value_get("aai_ml_type")+'&vl_c_actifs='+fa_value_get("bao_ml_actif")+'&vl_e_panier='+item.getAttribute("_graal_cleunik")+"&limit="+fa_value_get("bao_tb_limit")+"&";
  pf_alimente_table();
}
function pf_etat_fen(vv_quoi) {
   switch(vv_quoi) {
     case "ini":
		fa_badl("adressespostales_des_acteurs",lstn_grise);
       fa_ael("bao_ml_qui","ValueChange",po_change_menu);
       po_change_menu();
       fa_att_rem("adr_raison_soc","hidden");
       fa_cache_oui("tb_adrpos_01");
       pf_approximatif();
       break;
     case "raz":
      fa_focusdonne('arbre_des_acteurs');
      break;
     case "sortir":
      window.close();
     break;   
  }
}
function pf_sel_arbre_adresses(vv_raf) {
  var rowIndex = fa_cui("adressespostales_des_acteurs");if(rowIndex == -1){return;}
  var vl_c_lat,vl_c_lon,vl_c_adr_raison_soc;
  vl_c_lat=fa_cell_get("adressespostales_des_acteurs",rowIndex,"adr_latitude");
  vl_c_lon=fa_cell_get("adressespostales_des_acteurs",rowIndex,"adr_longitude");
  vl_c_adr_raison_soc=fa_cell_get("adressespostales_des_acteurs",rowIndex,"adr_raison_soc");
  fa_gid("id_google_map").src=vf_c_carte+'?vl_c_lat='+vl_c_lat+'&vl_c_lon='+vl_c_lon+'&vl_c_adr_raison_soc='+fa_enc(vl_c_adr_raison_soc)+'&';
}
function pf_onunload(){
	fa_brl("adressespostales_des_acteurs",lstn_grise);		
}
]]></script>
END;
?>
