<?php
$vf_c_script_cial_entete="_graal_xml_docial_entete.php?genreaction=$vl_c_genreaction&vl_commercial_cleunik=$commercial_cleunik&";
$vf_c_script_cial_adresses_01="_graal_xml_docial_adresses_01.php?genreaction=$vl_c_genreaction&vl_commercial_cleunik=$commercial_cleunik&";
$vf_c_script_cial_adresses_02="_graal_xml_docial_adresses_02.php?genreaction=$vl_c_genreaction&vl_commercial_cleunik=$commercial_cleunik&";
$vf_c_script_cial_recap_montants="_graal_das_docial_recap_montants.php?genreaction=$vl_c_genreaction&vl_commercial_cleunik=$commercial_cleunik&vl_action_cleunik=$vl_action_cleunik&";
$vf_c_script_cial_lignes="_graal_das_actions_cial_lignes.php?genreaction=$vl_c_genreaction&vl_commercial_cleunik=$commercial_cleunik&";
$vf_c_script_cial_bonsdepreparation="_graal_das_actions_cial_docciaux.php?vl_action_cleunik=$vl_action_cleunik&vl_type_clair=Commande fournisseur&";
$js_bon_preparation="";
$js_confirmation_cdecli="";
$param_generaux_graal_038=intval(fa_recup_session('vs_param_generaux_graal_038','0'));
switch ($param_generaux_graal_038) {
  case 1:$vf_c_script_modele_cdefou="_graal_pdf_cdefou_01.php?vl_e_action_cleunik=$vl_action_cleunik&vl_commercial_cleunik=$commercial_cleunik&vl_genre_adresse=1&";break;  //  Modele 1
  case 2:$vf_c_script_modele_cdefou="_graal_pdf_cdefou_02.php?vl_e_action_cleunik=$vl_action_cleunik&vl_commercial_cleunik=$commercial_cleunik&vl_genre_adresse=1&";break;  //  Modele 2
  case 3:$vf_c_script_modele_cdefou="_graal_pdf_cdefou_03.php?vl_e_action_cleunik=$vl_action_cleunik&vl_commercial_cleunik=$commercial_cleunik&vl_genre_adresse=1&";break;  //  Créé pour France Lampes
  case 4:$vf_c_script_modele_cdefou="_graal_pdf_cdefou_04.php?vl_e_action_cleunik=$vl_action_cleunik&vl_commercial_cleunik=$commercial_cleunik&vl_genre_adresse=1&";break;  //  Créé pour EG Diffusion
}
$js_confirmation_cdecli=<<<EOT
    case 'cdefou':
      pf_cial_pdf("$vf_c_script_modele_cdefou"+"raf_random="+Math.random()+"&");
      break;
    case 'cdefou_01':pf_cial_pdf("_graal_pdf_cdefou_01.php?vl_e_action_cleunik=$vl_action_cleunik&vl_commercial_cleunik=$commercial_cleunik&vl_genre_adresse=1&"+"raf_random="+Math.random()+"$pg");break;
    case 'cdefou_02':pf_cial_pdf("_graal_pdf_cdefou_02.php?vl_e_action_cleunik=$vl_action_cleunik&vl_commercial_cleunik=$commercial_cleunik&vl_genre_adresse=1&"+"raf_random="+Math.random()+"$pg");break;
    case 'cdefou_03':pf_cial_pdf("_graal_pdf_cdefou_03.php?vl_e_action_cleunik=$vl_action_cleunik&vl_commercial_cleunik=$commercial_cleunik&vl_genre_adresse=1&"+"raf_random="+Math.random()+"$pg");break;
    case 'cdefou_04':pf_cial_pdf("_graal_pdf_cdefou_04.php?vl_e_action_cleunik=$vl_action_cleunik&vl_commercial_cleunik=$commercial_cleunik&vl_genre_adresse=1&"+"raf_random="+Math.random()+"$pg");break;
EOT;
$js_bon_preparation="";
$pf_cial_affiche_donnees=<<<EOT
function pf_cial_affiche_donnees() {
  pf_cial_entete();
  fa_xmlhttprequest_xml("$vf_c_script_cial_adresses_01"+"raf_random="+Math.random()+"&","",pf_cial_affiche_adresse_livraison);
  fa_xmlhttprequest_xml("$vf_c_script_cial_adresses_02"+"raf_random="+Math.random()+"&","",pf_cial_affiche_adresse_facturati);
  pf_cial_affiche_lignes();
  pf_cial_affiche_montants();
  pf_cial_affiche_donnees_bonsdepreparation();
}
function pf_cial_pdf(vv_quoi){
	fa_att_set('iframe_docpdf','src',vv_quoi);
}
EOT;
$pf_cial_cdefou_cdefou=<<<EOT
function pf_cial_cdefou_cdefou() {
  if (confirm("Confirmez-vous la duplication de cette commande?")==false) {return;}
  fa_xmlhttprequest_txt("_graal_bdope_doc_cial_01.php?vf_c_action=cdefou->cdefou&vl_commercial_cleunik=$commercial_cleunik&","",pf_cial_cdefou_cdefou_fin);
}
function pf_cial_cdefou_cdefou_fin(stream) {
  var vl_c_datas=stream;
  if (vl_c_datas==-1) {
    alert("Problème lors de la duplication!!");
  } else {
    if (confirm("Voulez-vous ouvrir la nouvelle commande ?")==false) {
      return;
    } else {
      var vl_c_donnees="vf_e_action_cleunik="+fa_enc(vl_c_datas)+"&vf_c_action=modifier&genreaction=jenesaispas";
      fa_ouvre(c_cial_fen_action+vl_c_donnees,1000,700);
    }
  }
}
EOT;
$pf_cial_cdefou_demfou=<<<EOT
function pf_cial_cdefou_demfou() {
  if (confirm("Confirmez-vous la transformation de cette commande en demande ?")==false) {return;}
  fa_xmlhttprequest_txt("_graal_bdope_doc_cial_01.php?vf_c_action=cdefou->demfou&vl_commercial_cleunik=$commercial_cleunik&","",pf_cial_cdefou_demfou_fin);
}
function pf_cial_cdefou_demfou_fin(stream) {
  var vl_c_datas=stream;
  if (vl_c_datas==-1) {
    alert("Problème lors de la transformation!!");
  } else {
    if (confirm("Voulez-vous ouvrir la nouvelle demande ?")==false) {
      return;
    } else {
      var vl_c_donnees="vf_e_action_cleunik="+fa_enc(vl_c_datas)+"&vf_c_action=modifier&genreaction=jenesaispas";
      fa_ouvre(c_cial_fen_action+vl_c_donnees,1000,700);
    }
  }
}
EOT;
$pf_cial_cdefou_recfou=<<<EOT
function pf_cial_cdefou_recfou() {
  if (confirm("Confirmez-vous la réception de cette commande?")==false) {return;}
  fa_grise_fenetre("","oui");
  fa_xmlhttprequest_txt("_graal_bdope_doc_cial_01.php?vf_c_action=cdefou->recfou&vl_commercial_cleunik=$commercial_cleunik&","",pf_cial_cdefou_recfou_fin);
}
function pf_cial_cdefou_recfou_fin(stream) {
  var vl_c_datas=stream;
  if (vl_c_datas==-1) {
    alert("Problème lors de la réception!!");
  } else {
  	pf_affiche_donnees_relations();
    if (confirm("Voulez-vous ouvrir la nouvelle réception ?")==false) {
    window.location=document.location;
      return;
    } else {
      var vl_c_donnees="vf_e_action_cleunik="+fa_enc(vl_c_datas)+"&vf_c_action=modifier&genreaction=jenesaispas";
      fa_ouvre(c_cial_fen_action+vl_c_donnees,1000,700);
      window.location=document.location;
    }
  }
}
function pf_cial_cdefou_recfou_partielle() {
  if (confirm("Confirmez-vous la réception partielle de cette commande?")==false) {return;}
  fa_xmlhttprequest_txt("_graal_bdope_doc_cial_01.php?vf_c_action=cdefou->recfou_partielle&vl_commercial_cleunik=$commercial_cleunik&","",pf_cial_cdefou_recfou_partielle_fin);
}
function pf_cial_cdefou_recfou_partielle_fin(stream) {
  var vl_c_datas=stream;
  if (vl_c_datas==-1) {
    alert("Problème lors de la réception!!");
  } else {
  	pf_affiche_donnees_relations();
      var vl_c_donnees="vf_e_action_cleunik="+fa_enc(vl_c_datas)+"&vf_c_action=ajoutermodifier&genreaction=jenesaispas&specificite=recfou_partielle&doccialorigine=$commercial_cleunik&";
      fa_ouvre(c_cial_fen_action+vl_c_donnees,1000,700);
    }
  }
EOT;
$pf_cial_affiche_donnees_bonsdepreparation=<<<EOT
function pf_cial_affiche_donnees_bonsdepreparation() {
  fa_das("arbre_bonsdepreparation","$vf_c_script_cial_bonsdepreparation"+"raf_random="+Math.random()+"&");
}
function pf_cial_fin_chargement_pdf(){
	pf_cial_affiche_donnees_bonsdepreparation();
}
EOT;
$tb_cial_int=$tb_cial_int_06;
$pf_cial_transformations=$pf_cial_cdefou_cdefou.$pf_cial_cdefou_demfou.$pf_cial_cdefou_recfou.$pf_cial_affiche_donnees_bonsdepreparation;
switch ($vf_c_action) {
  case 'modifier' :
    $vl_c_ini="fa_grise_oui('bt_cial_cdefou_refou');fa_grise_oui('bt_cial_cdefou_demfou');fa_grise_oui('bt_cial_cdefou_cdefou');fa_grise_oui('bt_cial_cdefou_recfou_partielle');fa_grise_oui('bt_cial_enregistrer');";
    break; 
  case 'ajoutermodifier' :
    $vl_c_ini="fa_grise_oui('bt_cial_cdefou_refou');fa_grise_oui('bt_cial_cdefou_demfou');fa_grise_oui('bt_cial_cdefou_cdefou');fa_grise_oui('bt_cial_cdefou_recfou_partielle');fa_grise_oui('bt_cial_enregistrer');pf_cial_etat_fen('modifier');";
    break;
}
$vl_cial_etat_fen="fa_grise_non('bt_cial_cdefou_refou');fa_grise_non('bt_cial_cdefou_demfou');fa_grise_non('bt_cial_cdefou_cdefou');fa_grise_non('bt_cial_cdefou_recfou_partielle');fa_grise_non('bt_cial_enregistrer');";
?>
