<?php
echo <<<END
<script type="application/x-javascript"><![CDATA[
var vf_c_url_alimente_table;
const vf_c_script_recherche='_graal_das_rech_tel_01.php';
const vf_c_script_fen_acteur="_graal_fen_acteurs_01.php?genreacteur=";
const c_fen_interlo_tel="_graal_fen_act_interlo_tel_01.php?";
const lstn_grise = { 
	willRebuild : function(event){fa_grise_oui("bbe_tb_rechapproxima");fa_ro_oui("bbe_tb_rechapproxima");fa_grise_fenetre(event,"oui");},
	didRebuild  : function(event){fa_grise_non("bbe_tb_rechapproxima");fa_ro_non("bbe_tb_rechapproxima");fa_grise_fenetre(event,"non");} 
};
function pf_acteur_ouvre() {
  var vl_c_arbre="arbre_des_tel_interlo_act";
  var i=fa_cui(vl_c_arbre);if(i==-1){return;}
  var vl_c_param=fa_cell_get(vl_c_arbre,i,"typeacteur")+'&act_cleunik='+fa_cell_get(vl_c_arbre,i,"act_cleunik")+"&";
  fa_ouvre(vf_c_script_fen_acteur+vl_c_param,1000,600);
}
function pf_alimente_table(){
  switch (fa_value_get("bbe_ml_qui")){
    case "9":
      fa_cache_non("portee");
      break;
    default:
      fa_cache_oui("portee");
      break;
  }
  fa_das("arbre_des_tel_interlo_act",vf_c_url_alimente_table);
}
function pf_approximatif() {
	fa_grise_fenetre("","oui");
	fa_grise_oui("bbe_tb_rechapproxima");fa_ro_oui("bbe_tb_rechapproxima");
  var vl_c_texte=fa_value_get("bbe_tb_rechapproxima");
  var item=fa_gid("bao_ml_actif").selectedItem;
  vf_c_url_alimente_table =vf_c_script_recherche+'?listecles=&raisonsoc='+fa_enc(vl_c_texte)+'&typeacteur='+fa_value_get("bbe_ml_qui")+'&quoi='+fa_value_get("bbe_ml_zone")+'&vl_c_actifs='+fa_value_get("bao_ml_actif")+'&vl_e_panier='+item.getAttribute("_graal_cleunik")+"&raf="+Math.random()+'&vl_e_limit='+fa_value_get("bbe_tb_limit")+"&";
  pf_alimente_table();
}
function pf_dblclick_arbre_tel_interlo_act(){
  switch ("$vl_c_action") {
    case "raf" :
      break;
    case "emitel" :
      pf_interlo_telephone();
      break;
    case "rectel" :
      pf_interlo_rattache();
      break;
  }
}
function pf_etat_fen(vv_quoi){
	switch (vv_quoi) {
		case "ini":
			fa_badl("arbre_des_tel_interlo_act",lstn_grise);
			pf_approximatif();
			fa_focusdonne("bbe_tb_rechapproxima");
			po_change_menu();
			break;
		case "sortir":
			window.close();
			break;
	}
}
function pf_interlo_ouvre() {
  var vl_c_arbre="arbre_des_tel_interlo_act";
  var i=fa_cui(vl_c_arbre);if(i==-1){return;}
  var vl_c_param="genreacteur="+fa_cell_get(vl_c_arbre,i,"typeacteur")+"&vl_e_interlo_cleunik="+fa_cell_get(vl_c_arbre,i,"int_cleunik");
  vl_c_param+='&vl_e_act_cleunik='+fa_cell_get(vl_c_arbre,i,"act_cleunik")+"&";
  fa_ouvre_interlo(vl_c_param);
}
function pf_interlo_ouvre_tel() {
  var vl_c_arbre="arbre_des_tel_interlo_act";
  var i=fa_cui(vl_c_arbre);if(i==-1){return;}
  var vl_c_param="genreacteur="+fa_cell_get(vl_c_arbre,i,"typeacteur")+"&";
  vl_c_param+='&vl_e_intel_cleunik='+fa_cell_get(vl_c_arbre,i,"intel_cleunik")+"&";
  fa_ouvre(c_fen_interlo_tel+vl_c_param,500,480);
}
function pf_interlo_rattache() {
  var i=fa_cui("arbre_des_tel_interlo_act");if(i==-1){return;}
  var vl_e_int_cleunik=fa_cell_get("arbre_des_tel_interlo_act",i,"int_cleunik");
	var vl_e_act_cleunik=fa_cell_get("arbre_des_tel_interlo_act",i,"act_cleunik");
  window.opener.pf_rectel_interlo_rattache(vl_e_int_cleunik,vl_e_act_cleunik);
	pf_etat_fen('sortir');
}
function pf_interlo_telephone() {
  var i=fa_cui("arbre_des_tel_interlo_act");if(i==-1){return;}
  var vl_e_act_cleunik=fa_cell_get("arbre_des_tel_interlo_act",i,"act_cleunik");
  var vl_e_int_cleunik=fa_cell_get("arbre_des_tel_interlo_act",i,"int_cleunik");
  pf04_emitel(vl_e_act_cleunik,vl_e_int_cleunik,0,'raf',0);
}
function pf_onunload(){
	fa_brl("arbre_des_tel_interlo_act",lstn_grise);	
}
]]></script>  
END;
?>
