<?php
echo <<<END
<script type="application/x-javascript"><![CDATA[
const _c_url_alimente_table_01="_graal_das_nc_2009_autosuffisant.php?";
const lstn_grise = { 
	willRebuild : function(event){},
	didRebuild  : function(event){fa_grise_fenetre("","non");} 
};
function pf_aa_init(){
	fa_badl("arbre_nc_2009_autosuffisant",lstn_grise);
  	pf_alimente_table("arbre_nc_2009_autosuffisant");
}
function pf_alimente_table(vv_qui){
	if ( fa_value_get("tb_rechapproxima") == "" ) {return;}
	fa_grise_fenetre("","oui");
	var raf_random=Math.random();
  	var vl_c_url_alimente_table='sortie=das&vl_c_limit='+fa_enc(fa_value_get("tb_limit"))+'&vl_c_recherche='+fa_enc(fa_value_get("tb_rechapproxima"))+'&vl_c_type='+fa_value_get("ml_zone")+'&raf_random='+raf_random+"&";
  	fa_das("arbre_nc_2009_autosuffisant",_c_url_alimente_table_01+vl_c_url_alimente_table);
}
function pf_etat_fen(vv_quoi){
  vf_c_action=vv_quoi;
  switch(vv_quoi) {
    case "renvoyer":
      var i=fa_cui("arbre_nc_2009_autosuffisant");if(i==-1){return;}
      var vl_e_cleunik=fa_cell_get("arbre_nc_2009_autosuffisant",i,"tc_cleunik");
      var vl_c_code=fa_cell_get("arbre_nc_2009_autosuffisant",i,"tc_code");
      var vl_c_libelle=fa_cell_get("arbre_nc_2009_autosuffisant",i,"tc_libelle");
      if (window.opener!=null) {
        try {window.opener.pf_retour_deb(vl_e_cleunik,vl_c_code,vl_c_libelle);} catch(e){alert(e);}
      }
      window.close();
    case "sortir":
      window.close();
      break;
    default:
      break;
  }
}
]]></script>
END;
?>

