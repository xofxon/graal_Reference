<?php
$vl_c_ben_147=fa_recup_dico_js("ben_147");
$vl_c_ben_148=fa_recup_dico_js("ben_148");
$vl_c_ben_149=fa_recup_dico_js("ben_149");
$vl_c_ben_150=fa_recup_dico_js("ben_150");
$vl_c_ben_151=fa_recup_dico_js("ben_151");
$vl_c_ben_190=fa_recup_dico_js("ben_190");
$vl_c_ben_191=fa_recup_dico_js("ben_191");
$var_rc='\r\n';
$bloc_00=<<<EOT
const vf_c_script_xml_action='_graal_xml_actions_01.php';
const vf_c_script_bdope_action='_graal_bdope_actions_01.php?';
EOT;
echo <<<END
<script type="application/x-javascript"><![CDATA[
$bloc_00
var vf_b_commenter=false,vf_c_action="",vf_e_action_cleunik=0,vf_c_qui="",vf_nb_graal=0;
function pf_aa_init() {
  vf_e_action_cleunik=$vl_e_action_cleunik;
  fa_xmlhttprequest_xml(vf_c_script_xml_action,"vl_e_action_cleunik=$vl_e_action_cleunik&",pf_affiche_donnees_actions_infogene);
}
function pf_affiche_donnees_actions_infogene(stream) {
  var vl_c_datas=stream
  vf_e_action_cleunik=fa_xml_get(vl_c_datas,'action_cleunik');
  fa_value_set('dp_dat_deb',fa_xml_get(vl_c_datas,'datedebut'));
  fa_value_set('dp_dat_fin',fa_xml_get(vl_c_datas,'datefin'));
  fa_value_set('tb_heu_deb',fa_xml_get(vl_c_datas,'heuredebut'));
  fa_value_set('tb_heu_fin',fa_xml_get(vl_c_datas,'heurefin'));
  fa_focusdonne('dp_dat_deb');
}
function pf_etat_fen(vv_quoi) {
	switch(vv_quoi) {
			case "sortir":
	      try { window.opener.pf_approximatif_bem()} catch (e) {}
	      window.close();
	      break;
	}
}
function pf_maintenant(vv_qui) {
  var ladate_deb=new Date();
  var vl_c_date=ladate_deb.getFullYear()+"-"+(ladate_deb.getMonth()+1)+"-"+ladate_deb.getDate();
  var vl_c_heur=ladate_deb.getHours()+":"+fa_padleft('0', 2,ladate_deb.getMinutes().toString())+":"+fa_padleft('0', 2,ladate_deb.getSeconds().toString());
  switch (vv_qui) {
    case "tb_debut_maintenant" :
      fa_value_set('dp_dat_deb',vl_c_date);
      fa_value_set('tb_heu_deb',vl_c_heur);
      break;
    case "tb_debut_maintenant_fabriq" :
      fa_value_set('dp_dat_deb_fabriq',vl_c_date);
      fa_value_set('tb_heu_deb_fabriq',vl_c_heur);
      break;
    case "tb_fin_maintenant" :
      fa_value_set('dp_dat_fin',vl_c_date);
      fa_value_set('tb_heu_fin',vl_c_heur);
      break;
	case "tb_debut_maintenant_fabriq_ligne":
      fa_value_set('dp_dat_deb_fabriq_ligne',vl_c_date);
      fa_value_set('tb_heu_deb_fabriq_ligne',vl_c_heur);
      break;
  }
}
function pf_validation(vv_quoi) {
  var vl_c_donnees="";
  var vl_c_nature_action="";
  vl_c_donnees+="vl_dat_deb="+fa_enc(fa_value_get("dp_dat_deb")+" "+fa_value_get("tb_heu_deb"))+"&";
  vl_c_donnees+="vl_dat_fin="+fa_enc(fa_value_get("dp_dat_fin")+" "+fa_value_get("tb_heu_fin"))+"&";
  if ((fa_value_get("dp_dat_deb")=='') && (fa_value_get("dp_dat_fin")=='')){alert("$vl_c_ben_191");return false;}
  vl_c_nature_action="&vf_c_action=dupliquer&vl_action_cleunik="+fa_enc(vf_e_action_cleunik)+"&";
  fa_xmlhttprequest_txt(vf_c_script_bdope_action+vl_c_nature_action,vl_c_donnees,pf_validation_fin);
}
function pf_validation_fin(stream) {
  alert(stream);
  fa_focusdonne('dp_dat_deb');
}
]]></script>
END;
?>
