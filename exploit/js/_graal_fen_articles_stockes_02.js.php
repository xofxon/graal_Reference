<?php
echo <<<END
<script type="application/x-javascript"><![CDATA[
const c_script_fen_mousto="_graal_fen_art_mousto_01.php?";
const c_script_fen_mouvements="_graal_fen_art_mousto_02.php?";
const vf_c_fen_stat='_graal_fen_graphiques_stat_01.php?genre=article_un&';
const vf_c_fen_faccli="_graal_fen_lignes_actions_ciales_01.php?genreaction=faccli&";
const vf_c_fen_avocli="_graal_fen_lignes_actions_ciales_01.php?genreaction=avocli&";
var vf_c_export="";
const lstn_grise = { 
	willRebuild : function(event){},
	didRebuild  : function(event){fa_grise_fenetre("","non");} 
};
function pf_aa_init() {
  var ladate=new Date();
  fa_value_set("tb_selvalidite",ladate.getDate()+"/"+(ladate.getMonth()+1)+"/"+ladate.getFullYear());
  fa_value_set("rdg_etat",2);
fa_badl("arbre_des_articles",lstn_grise);
  fa_approximatif_bbo();
}
function pf_ouvre(vv_quoi_01) {
  var i=fa_cui("arbre_des_articles");
  if(i==-1){return;}
  var vl_e_art_cleunik=fa_cell_get("arbre_des_articles",i,"art_cleunik");
  switch (vv_quoi_01) {
    case "art":
			fa_ouvre_article('genre=tousss&vl_e_art_cleunik='+vl_e_art_cleunik+"&","");
      break;
    case "mousto":
      fa_ouvre(c_script_fen_mousto+'vl_e_art_cleunik='+vl_e_art_cleunik+'&',1000,450);
      break;
    case "mouvements":
      fa_ouvre(c_script_fen_mouvements+'vl_e_art_cleunik='+vl_e_art_cleunik+'&',1000,450);
      break;
    case "mouvements_periode":
      fa_ouvre(c_script_fen_mouvements+'vl_e_art_cleunik='+vl_e_art_cleunik+"&vl_c_dateheuredebut="+fa_enc(fa_date_formate(fa_value_get("bbo_tb_deb"),"AAAAMMJJ"))+"&vl_c_dateheurefin="+fa_enc(fa_date_formate(fa_value_get("bbo_tb_fin"),"AAAAMMJJ"))+"&selection_date="+fa_value_get("mvtart_ml_date")+"&",1000,450);
      break;
     case "stats_faccli":
     	var vl_c_param=vf_c_fen_stat+'vl_e_art_cleunik='+vl_e_art_cleunik+"&vl_c_dateheuredebut="+fa_enc(fa_value_get("bbo_tb_deb"))+"&vl_c_dateheurefin="+fa_enc(fa_value_get("bbo_tb_fin"))+"&";
		vl_c_param+='cial=faccli'
      fa_ouvre(vl_c_param,1000,800);
      break;
      case "faccli":
     	var vl_c_param=vf_c_fen_faccli+'vl_e_art_cleunik='+vl_e_art_cleunik+"&vl_c_dateheuredebut="+fa_enc(fa_value_get("bbo_tb_deb"))+"&vl_c_dateheurefin="+fa_enc(fa_value_get("bbo_tb_fin"))+"&";
		vl_c_param+='cial=faccli';
      fa_ouvre(vl_c_param,1000,800);
      break;
     case "avocli":
     	var vl_c_param=vf_c_fen_avocli+'vl_e_art_cleunik='+vl_e_art_cleunik+"&vl_c_dateheuredebut="+fa_enc(fa_value_get("bbo_tb_deb"))+"&vl_c_dateheurefin="+fa_enc(fa_value_get("bbo_tb_fin"))+"&";
		vl_c_param+='cial=faccli';
      fa_ouvre(vl_c_param,1000,800);
      break;
  }
}
function pf_recup_sql(vv_quoi){
	fa_xmlhttprequest_txt(vf_c_export,"",pf_recup_sql_fin,vv_quoi);
}
function pf_recup_sql_fin(stream,vv_quoi){
	switch (vv_quoi){
		case "ods":fa_exporte_requete_vers_ods(stream);break;
		case "rdf":fa_exporte_requete_vers_rdf(stream);break;
		case "htm":fa_exporte_requete_vers_htm(stream);break;
		case "xml":fa_exporte_requete_vers_xml(stream);break;
		case "xls":fa_exporte_requete_vers_xls(stream);break;
	}
}
]]></script>
END;
?>
