<?php
_graal_requete_charge_varlib($vl_c_id_inc_acteurs_facturation_client,$vl_e_uti_cleunik);
$vl_c_bdd_001=fa_recup_dico("bdd_001");
$vl_c_bdd_002=fa_recup_dico("bdd_002");
$vl_c_bdd_003=fa_recup_dico("bdd_003");
$vl_c_bdd_004=fa_recup_dico("bdd_004");
$vl_c_bdd_005=fa_recup_dico("bdd_005");
$vl_c_bdd_006=fa_recup_dico("bdd_006");
$vl_c_bdd_007=fa_recup_dico("bdd_007");
$vl_c_bdd_008=fa_recup_dico("bdd_008");
$vl_c_bdd_009=fa_recup_dico("bdd_009");
$vl_c_bdd_010=fa_recup_dico("bdd_010");
$vl_c_bdd_011=fa_recup_dico("bdd_011");
$vl_c_bdd_012=fa_recup_dico("bdd_012");
$vl_c_bdd_013=fa_recup_dico("bdd_013");
$vl_c_bdd_014=fa_recup_dico("bdd_014");
$vl_c_bdd_015=fa_recup_dico("bdd_015");
$vl_c_bdd_016=fa_recup_dico("bdd_016");
$vl_c_bdd_017=fa_recup_dico("bdd_017");
$vl_c_bdd_018=fa_recup_dico("bdd_018");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_context_00='<popupset><popup id="pop_arbre_rib_cli"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arbre_rib_cli\');" /></popup><popup id="pop_arbre_iban_cli"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arbre_iban_cli\');" /></popup></popupset>';
switch ($vl_c_id_inc_acteurs_facturation_client) {
  case "Div_00315": $vl_c_id_fen_rib="Fen_00352";$vl_c_id_fen_iban="Fen_00354";break;
}
echo <<<END
$vl_c_context_00
<vbox flex="3" id="bdd_acteurs_facturation_clients_01">
<vbox flex="1">
<hbox flex="1">
  <vbox flex="1">    
      <toolbar grippyhidden="true">
  		  <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_bdd_006" oncommand="pf_affiche_donnees_rib_cli();"/>
        <toolbarseparator />
        <hbox id="bloc_rib_cli" flex="1">
          <label value="$vl_c_bdd_007"/>
END;
if ($vl_c_id_fen_rib=="000000000") {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_rib,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
  if ($vl_tb_droits[1]!=0){ 
		echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="2" id="ml_rib" _graal_nombre="1"><menupopup><menuitem value="121500" label="'.$vl_c_bdd_017.'" /></menupopup></menulist>');
		echo ('<toolbarbutton class="ajouter" observes="broadcaster_01" tooltiptext="'.$vl_c_bdd_008.'" oncommand="pf_ouvre(\'rib_cli\',\'nouveau\');"/>');
	}
  echo('<toolbarbutton class="modifier" observes="broadcaster_01" tooltiptext="'.$vl_c_bdd_009.'" oncommand="pf_ouvre(\'rib_cli\',\'ouvrir\');" />');
}          
echo <<<END
        </hbox>
        <toolbarseparator />
      </toolbar>    
  <tree id="arbre_rib_cli" flex="1" hidecolumnpicker="true" flags="" ref="*" querytype="xml" datasources="" onselect="pf_sel_arbre_rib_cli(this.id);" seltype="single" enableColumnDrag="true" context="pop_arbre_rib_cli">
    <treecols>
      <treecol id="tc_rib_cleunik_cli" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_domiciliation_cli" label="$vl_c_bdd_001" sort="?domiciliation"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_etablissement_cli" label="$vl_c_bdd_002" sort="?etablissement"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_guichet_cli" label="$vl_c_bdd_003" sort="?guichet"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_compte_cli" label="$vl_c_bdd_004" sort="?compte"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_cle_cli" label="$vl_c_bdd_005" sort="?cle"/><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
    <template><query expr="*"/><action>
      <treechildren>
        <treeitem uri="?" seltype="single">
          <treerow>
            <treecell label="?rib_cleunik"/>
            <treecell label="?domiciliation"/>
            <treecell label="?etablissement"/>
            <treecell label="?guichet"/>
            <treecell label="?compte"/>
            <treecell label="?cle"/>
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
</vbox>
<splitter/>

  <vbox flex="1">    
      <toolbar grippyhidden="true">
  		  <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_bdd_010" oncommand="pf_affiche_donnees_iban_cli();"/>
        <toolbarseparator />
        <hbox id="bloc_iban_cli" flex="1">
          <label value="$vl_c_bdd_011"/>

END;
if ($vl_c_id_fen_iban=="000000000") {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_iban,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
if ($vl_tb_droits[1]!=0){
echo <<<END
          <menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' flex="2" id="ml_iban" _graal_nombre="1"><menupopup>
            <menuitem value="121500" label="$vl_c_bdd_017" />
	          <menuitem value="121625" label="$vl_c_bdd_018" />
          </menupopup></menulist>
          <toolbarbutton class="ajouter" observes="broadcaster_01" tooltiptext="$vl_c_bdd_012" oncommand="pf_ouvre('iban_cli','nouveau');"/>
          <toolbarseparator />  
END;
}
echo <<<END
          <toolbarbutton class="modifier" observes="broadcaster_01" tooltiptext="$vl_c_bdd_013" oncommand="pf_ouvre('iban_cli','ouvrir');" />
END;
}
echo <<<END
        </hbox>
        <toolbarseparator />
      </toolbar>    
  <tree id="arbre_iban_cli" flex="1" hidecolumnpicker="true" flags="" ref="*" querytype="xml" datasources="" onselect="pf_sel_arbre_iban_cli(this.id);" seltype="single" enableColumnDrag="true" context="pop_arbre_iban_cli">
    <treecols>
      <treecol id="tc_iban_cleunik_cli" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_iban_info_cli" label="$vl_c_bdd_014" sort="?iban_info"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_iban_papi_cli" label="$vl_c_bdd_015" sort="?iban_papi"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_iban_bic_cli" label="$vl_c_bdd_016" sort="?iban_bic"/><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
    <template><query expr="*"/><action>
      <treechildren>
        <treeitem uri="?" seltype="single">
          <treerow>
            <treecell label="?iban_cleunik"/>
            <treecell label="?iban_info"/>
            <treecell label="?iban_papi"/>
            <treecell label="?iban_bic"/>
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
</vbox>
</hbox>
</vbox>
</vbox>
END;
?>
