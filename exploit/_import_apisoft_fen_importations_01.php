<?php
include("_graal_header_xul.inc.php");
$vl_c_id_fenetre="Imp_00001";
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_b_acces=$vl_tb_droits[0];
if ($vl_b_acces==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);
$vl_b_import_fournisseur=true;
$vl_b_import_client=true;
$vl_b_import_transporteur=true;
$vl_b_import_representant=true;
$vl_c_zaa_101=fa_recup_dico("zaa_101");
$vl_c_zaa_101="Importation depuis le système d'information 'APISoft' vers celui 'XsOFtware'";
$vl_c_base_origine="apisoft_bar_gc";
$vl_c_base_destination="$sql_bdd";
$ml_prefixes=fa_brik_menulist_choix(66,1,4,1,'','ml_prefixe_tel_00',"broadcaster_01",121111);
include("_graal_header_winxul.inc.php");
echo <<<END
<window title="$vl_c_zaa_101" id="_graal_trad_objets_01" onload="fa_aa(this);pf_etat_fen('ini')" $c_xmlns>
$vl_c_graal_cp00
END;
include_once("js/_graal_01.js.php");
include("js/_import_apisoft_01.js.php");
echo <<<END
  <vbox flex="1" class="overflow_01">
    <groupbox>
      <description>$vl_c_zaa_101</description>
      <hbox>
        <description>Base origine <textbox id="c_base_ori" value="$vl_c_base_origine"/></description>
        <description>Base destination <textbox id="c_base_des" value="$vl_c_base_destination"/></description>
      </hbox>
      <groupbox>
        <description>Fichiers de base</description>
        <tabbox flex="1">
          <tabs>
            <tab label="Tables diverses" linkedpanel="tabpanel_diverse" id="tab_diverse"/>
            <tab label="Représentants" linkedpanel="tabpanel_representant" id="tab_representant"/>
            <tab label="Transporteurs" linkedpanel="tabpanel_transporteur" id="tab_transporteur"/>
            <tab label="Clients" linkedpanel="tabpanel_client" id="tab_client"   />
            <tab label="Fournisseurs" linkedpanel="tabpanel_fournisseur" id="tab_fournisseur"/>
            <tab label="Articles" linkedpanel="tabpanel_article" id="tab_article"/>
            
          </tabs>
          <tabpanels flex="1" >
           <tabpanel id="tabpanel_diverse">
              <groupbox>
                <description>Importations</description>
                <vbox>
                  <button label="1 Table des taxes" oncommand="pf_importation('6');" />
                  <button label="2 Table des catégories achat/vente" oncommand="pf_importation('7');" />
                  <button label="3 Table des tarifs" oncommand="pf_importation('8');"/>
                  <button label="4 Table des unités" oncommand="pf_importation('12');"/>
                  <button label="5 Table des modes de règlement" oncommand="pf_importation('14');"/>
                  <button label="6 Table des comptes comptables des articles" oncommand="pf_importation('15');"/>
                  <button hidden="true" label="" oncommand=""/>
                </vbox>
              </groupbox>   
            </tabpanel>
            <tabpanel id="tabpanel_client">
              <groupbox>
                <description>Préparation</description>
                <vbox>
                  <button label="Correspondances des pays d'adresses de livraison et de facturation" oncommand="pf_preparation('1');"/>
                  <button label="Associer les pays" oncommand="pf_ouvre_pays_apisoft();"/>
                  <button label="Correspondances des devises" oncommand="pf_preparation('10');"/>
                  <button label="Associer les devises" oncommand="pf_ouvre_devise_apisoft();"/>

                  <label value="Secteurs géographiques"/>
END;
//  On recherche Tous les genres critères supérieurs à 9999        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT critere_cleunik,critere_denomination FROM _criteres WHERE critere_actif=1 and critere_cleunik >9999 and critere_portee & 4";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs != 0) 
{
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_secteurs_geo_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
echo("<menuitem crop='none' value='Aucun !!' id='0' _graal_cleunik='0' label='Aucun' selected='true'/>");
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['critere_denomination'])). "' id='".$row['critere_cleunik'] ."' _graal_cleunik='".$row['critere_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['critere_denomination']))."' selected='true'/>");
   }
echo <<<END
  </menupopup>
</menulist>
<button label="Importer" oncommand="pf_importation_critere('ml_secteurs_geo_00')" />
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
                  <label value="Familles de clients"/>
END;
//  On recherche Tous les genres critères supérieurs à 9999        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT critere_cleunik,critere_denomination FROM _criteres WHERE critere_actif=1 and critere_cleunik >9999 and critere_portee & 4";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs != 0) 
{
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_familles_cli_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
echo("<menuitem crop='none' value='Aucun !!' id='0' _graal_cleunik='0' label='Aucun' selected='true'/>");
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['critere_denomination'])). "' id='".$row['critere_cleunik'] ."' _graal_cleunik='".$row['critere_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['critere_denomination']))."' selected='true'/>");
   }
echo <<<END
  </menupopup>
</menulist>
<button label="Importer" oncommand="pf_importation_critere('ml_familles_cli_00')" />
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END


                  <button hidden="true" label="Autre traitements" oncommand="alert('Bonjour le monde');"/>
                </vbox>
              </groupbox>   
              <groupbox>
                <description>Importation</description>
                <hbox>
END;
//  On recherche Tous les genres d'acteur client        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (80) and  choix_portee & 4";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_genre" value="Genres d\'acteurs"/>
END;
}
else
{
echo('<label control="la_genre" value="Genres d acteurs."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_genres_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;
//  On recherche Tous les civilités        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (86) and  choix_portee & 4";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_civilite" value="Civilités"/>
END;
}
else
{
echo('<label control="la_civilite" value="Civilités."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_civilite_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;
//  On recherche Tous les genres de courriel        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (84) and  choix_portee & 4";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_courriels" value="Courriels"/>
END;
}
else
{
echo('<label control="la_courriel" value="Courriel."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_courriel_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;

//  On recherche Tous les genres de fax        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (83) and  choix_portee & 4";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_fax" value="Fax"/>
END;
}
else
{
echo('<label control="la_fax" value="Fax."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_fax_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
//  On recherche Tous les préfixes internationaux        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur',_choix.choix_code as 'prefixe' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (66) and  choix_portee & 4";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_fax" value="Préfixes internationaux Fax"/>
END;
}
else
{
echo('<label control="la_fax" value="Préfixes internationaux Fax"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_prefixe_fax_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='(".fa_remplace_quotes(fa_ent_xml($row['prefixe'])) . ") ".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;

//  On recherche Tous les genres de téléphones        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (82) and  choix_portee & 4";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_tel" value="Téléphones"/>
END;
}
else
{
echo('<label control="la_tel" value="Téléphones"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_tel_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo("$ml_prefixes");
echo <<<END
</hbox>
<hbox>
END;

//  On recherche Tous les genres de portables        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (82) and  choix_portee & 4";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_por" value="Portables"/>
END;
}
else
{
echo('<label control="la_por" value="Portables"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_por_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
//  On recherche Tous les préfixes internationaux        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur',_choix.choix_code as 'prefixe' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (66) and  choix_portee & 4";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_fax" value="Préfixes internationaux Portable"/>
END;
}
else
{
echo('<label control="la_fax" value="Préfixes internationaux Portable"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_prefixe_por_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='(".fa_remplace_quotes(fa_ent_xml($row['prefixe'])) . ") ".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
END;


if ($vl_b_import_client==true)
{ echo ('<button label="Importer" oncommand="pf_importation(\'1\');"/>');}
else
{echo ('<button label="Importation impossible "/>');}
echo <<<END
             </groupbox>   
              <groupbox>
                <description>Annexes</description>
                <vbox>
                  <button label="Rattachements Représentants/clients" oncommand="pf_importation('17');"/>
                </vbox>
              </groupbox>
            </tabpanel>
            <tabpanel id="tabpanel_fournisseur">
              <groupbox>
                <description>Préparation</description>
                <vbox>
                  <button label="Correspondances des pays" oncommand="pf_preparation('2');"/>
                  <button label="Associer les pays" oncommand="pf_ouvre_pays_apisoft();"/>
                  <button label="Correspondances des devises" oncommand="pf_preparation('11');"/>
                  <button label="Associer les devises" oncommand="pf_ouvre_devise_apisoft();"/>
                  <label value="Familles des fournisseurs"/>
END;
//  On recherche Tous les genres critères supérieurs à 9999        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT critere_cleunik,critere_denomination FROM _criteres WHERE critere_actif=1 and critere_cleunik >9999 and critere_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs != 0) 
{
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_familles_fou_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
echo("<menuitem crop='none' value='Aucun !!' id='0' _graal_cleunik='0' label='Aucun' selected='true'/>");
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['critere_denomination'])). "' id='".$row['critere_cleunik'] ."' _graal_cleunik='".$row['critere_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['critere_denomination']))."' selected='true'/>");
   }
echo <<<END
  </menupopup>
</menulist>
<button label="Importer" oncommand="pf_importation_critere('ml_familles_fou_00')" />
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END

                  
                  
                </vbox>
              </groupbox>   
              <groupbox>
                <description>Importation</description>
                <hbox>
END;
//  On recherche Tous les genres d'acteur fournisseur        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (80) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_fournisseur=false;
echo <<<END
<label control="la_genre" value="Genres d\'acteurs"/>
END;
}
else
{
echo('<label control="la_genre" value="Genres d acteurs."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_genres_01" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;
//  On recherche Tous les civilités        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (86) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_fournisseur=false;
echo <<<END
<label control="la_civilite" value="Civilités"/>
END;
}
else
{
echo('<label control="la_civilite" value="Civilités."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_civilite_01" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;
//  On recherche Tous les genres de courriel        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (84) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_fournisseur=false;
echo <<<END
<label control="la_courriels" value="Courriels"/>
END;
}
else
{
echo('<label control="la_courriel" value="Courriel."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_courriel_01" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;

//  On recherche Tous les genres de fax        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (83) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_fournisseur=false;
echo <<<END
<label control="la_fax" value="Fax"/>
END;
}
else
{
echo('<label control="la_fax" value="Fax."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_fax_01" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
//  On recherche Tous les préfixes internationaux        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur',_choix.choix_code as 'prefixe' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (66) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_fax" value="Préfixes internationaux Fax"/>
END;
}
else
{
echo('<label control="la_fax" value="Préfixes internationaux Fax"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_prefixe_fax_01" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='(".fa_remplace_quotes(fa_ent_xml($row['prefixe'])) . ") ".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;

//  On recherche Tous les genres de téléphones        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (82) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_fournisseur=false;
echo <<<END
<label control="la_tel" value="Téléphones"/>
END;
}
else
{
echo('<label control="la_tel" value="Téléphones"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" class="normal" flex="15" id="ml_tel_01" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
//  On recherche Tous les préfixes internationaux        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur',_choix.choix_code as 'prefixe' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (66) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_fax" value="Préfixes internationaux Tel"/>
END;
}
else
{
echo('<label control="la_fax" value="Préfixes internationaux Tel"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_prefixe_tel_01" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='(".fa_remplace_quotes(fa_ent_xml($row['prefixe'])) . ") ".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END

</hbox>
<hbox>
END;

//  On recherche Tous les genres de portables        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (82) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_fournisseur=false;
echo <<<END
<label control="la_por" value="Portables"/>
END;
}
else
{
echo('<label control="la_por" value="Portables"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_por_01" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
//  On recherche Tous les préfixes internationaux        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur',_choix.choix_code as 'prefixe' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (66) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_fax" value="Préfixes internationaux Portables"/>
END;
}
else
{
echo('<label control="la_fax" value="Préfixes internationaux Portables"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_prefixe_por_01" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='(".fa_remplace_quotes(fa_ent_xml($row['prefixe'])) . ") ".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
END;


if ($vl_b_import_fournisseur==true)
{ echo ('<button label="Importer" oncommand="pf_importation(\'2\');"/>');}
else
{echo ('<button label="Importation impossible "/>');}
echo <<<END
              </groupbox>   
            </tabpanel>
            <tabpanel id="tabpanel_transporteur">
              <groupbox>
                <description>Préparation</description>
                <vbox>
                  <button label="Pas de préparation particulière" oncommand="alert('On vous a dit qu\'il n\'y avait rien !!');"/>
                </vbox>
              </groupbox>   
              <groupbox>
                <description>Importation</description>
                <hbox>
END;
//  On recherche Tous les genres d'acteur fournisseurs ( pour les transporteurs)        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (80) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_transporteur=false;
echo <<<END
<label control="la_genre" value="Genres d\'acteurs"/>
END;
}
else
{
echo('<label control="la_genre" value="Genres d acteurs."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_genres_02" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;
//  On recherche Tous les civilités        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (86) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_transporteur=false;
echo <<<END
<label control="la_civilite" value="Civilités"/>
END;
}
else
{
echo('<label control="la_civilite" value="Civilités."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_civilite_02" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;
//  On recherche Tous les genres de courriel        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (84) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_transporteur=false;
echo <<<END
<label control="la_courriels" value="Courriels"/>
END;
}
else
{
echo('<label control="la_courriel" value="Courriel."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_courriel_02" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;

//  On recherche Tous les genres de fax        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (83) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_transporteur=false;
echo <<<END
<label control="la_fax" value="Fax"/>
END;
}
else
{
echo('<label control="la_fax" value="Fax."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_fax_02" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
//  On recherche Tous les préfixes internationaux        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur',_choix.choix_code as 'prefixe' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (66) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_fax" value="Préfixes internationaux Fax"/>
END;
}
else
{
echo('<label control="la_fax" value="Préfixes internationaux Fax"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_prefixe_fax_02" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='(".fa_remplace_quotes(fa_ent_xml($row['prefixe'])) . ") ".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END

</hbox>
<hbox>
END;

//  On recherche Tous les genres de téléphones        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (82) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_transporteur=false;
echo <<<END
<label control="la_tel" value="Téléphones"/>
END;
}
else
{
echo('<label control="la_tel" value="Téléphones"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_tel_02" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
//  On recherche Tous les préfixes internationaux        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur',_choix.choix_code as 'prefixe' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (66) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_fax" value="Préfixes internationaux Tel"/>
END;
}
else
{
echo('<label control="la_fax" value="Préfixes internationaux Tel"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_prefixe_tel_02" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='(".fa_remplace_quotes(fa_ent_xml($row['prefixe'])) . ") ".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END

</hbox>
<hbox>
END;

//  On recherche Tous les genres de portables        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (82) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_transporteur=false;
echo <<<END
<label control="la_por" value="Portables"/>
END;
}
else
{
echo('<label control="la_por" value="Portables"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_por_02" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
//  On recherche Tous les préfixes internationaux        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur',_choix.choix_code as 'prefixe' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (66) and  choix_portee & 16";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_fax" value="Préfixes internationaux Portables"/>
END;
}
else
{
echo('<label control="la_fax" value="Préfixes internationaux Portables"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_prefixe_por_02" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='(".fa_remplace_quotes(fa_ent_xml($row['prefixe'])) . ") ".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END

</hbox>
END;


if ($vl_b_import_transporteur==true)
{ echo ('<button label="Importer" oncommand="pf_importation(\'3\');"/>');}
else
{echo ('<button label="Importation impossible "/>');}
echo <<<END
              </groupbox>   
            </tabpanel>
            <tabpanel id="tabpanel_representant">
              <groupbox>
                <description>Préparation</description>
                <vbox>
                  <button label="Pas de préparation particulière" oncommand="alert('On vous a dit qu\'il n\'y avait rien !!');"/>
                </vbox>
              </groupbox>   
              <groupbox>
                <description>Importation</description>
                <hbox>
END;
//  On recherche Tous les genres d'acteur entreprise ( pour les représentants)        
//  la condition "choix_portee & 1" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (80) and  choix_portee & 1";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_representant=false;
echo <<<END
<label control="la_genre" value="Genres d'acteurs"/>
END;
}
else
{
echo('<label control="la_genre" value="Genres d\'acteurs."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_genres_03" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;
//  On recherche Tous les civilités        
//  la condition "choix_portee & 1" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (86) and  choix_portee & 1";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_representant=false;
echo <<<END
<label control="la_civilite" value="Civilités"/>
END;
}
else
{
echo('<label control="la_civilite" value="Civilités."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_civilite_03" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;
//  On recherche Tous les genres de courriel        
//  la condition "choix_portee & 1" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (84) and  choix_portee & 1";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_representant=false;
echo <<<END
<label control="la_courriels" value="Courriels"/>
END;
}
else
{
echo('<label control="la_courriel" value="Courriel."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_courriel_03" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
</hbox>
<hbox>
END;

//  On recherche Tous les genres de fax        
//  la condition "choix_portee & 1" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (83) and  choix_portee & 1";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_representant=false;
echo <<<END
<label control="la_fax" value="Fax"/>
END;
}
else
{
echo('<label control="la_fax" value="Fax."/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_fax_03" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
//  On recherche Tous les préfixes internationaux        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur',_choix.choix_code as 'prefixe' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (66) and  choix_portee & 1";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_fax" value="Préfixes internationaux Fax"/>
END;
}
else
{
echo('<label control="la_fax" value="Préfixes internationaux Fax"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_prefixe_fax_03" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='(".fa_remplace_quotes(fa_ent_xml($row['prefixe'])) . ") ".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END

</hbox>
<hbox>
END;

//  On recherche Tous les genres de téléphones        
//  la condition "choix_portee & 1" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (82) and  choix_portee & 1";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_representant=false;
echo <<<END
<label control="la_tel" value="Téléphones"/>
END;
}
else
{
echo('<label control="la_tel" value="Téléphones"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_tel_03" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
//  On recherche Tous les préfixes internationaux        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur',_choix.choix_code as 'prefixe' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (66) and  choix_portee & 1";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_fax" value="Préfixes internationaux Tel"/>
END;
}
else
{
echo('<label control="la_fax" value="Préfixes internationaux Tel"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_prefixe_tel_03" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='(".fa_remplace_quotes(fa_ent_xml($row['prefixe'])) . ") ".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END

</hbox>
<hbox>
END;

//  On recherche Tous les genres de portables        
//  la condition "choix_portee & 1" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (82) and  choix_portee & 1";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_representant=false;
echo <<<END
<label control="la_por" value="Portables"/>
END;
}
else
{
echo('<label control="la_por" value="Portables"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_por_03" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
//  On recherche Tous les préfixes internationaux        
//  la condition "choix_portee & 16" permet d'utiliser le et binaire
$sql_req = "SELECT _choix.choix_cleunik AS choix_cleunik,_choix.choix_valeur_texte_01 AS 'valeur',_choix.choix_code as 'prefixe' FROM _choix WHERE _choix.choix_actif=1 and _choix.critere_cleunik IN (66) and  choix_portee & 1";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs == 0) 
{
$vl_b_import_client=false;
echo <<<END
<label control="la_fax" value="Préfixes internationaux Portables"/>
END;
}
else
{
echo('<label control="la_fax" value="Préfixes internationaux Portables"/>');
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_prefixe_por_03" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['valeur'])). "' id='".$row['choix_cleunik'] ."' _graal_cleunik='".$row['choix_cleunik']."' label='(".fa_remplace_quotes(fa_ent_xml($row['prefixe'])) . ") ".fa_remplace_quotes(fa_ent_xml($row['valeur']))."' selected='true'/>");
  }
echo <<<END
  </menupopup>
</menulist>
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END

</hbox>
END;


if ($vl_b_import_representant==true)
{ echo ('<button label="Importer" oncommand="pf_importation(\'4\');"/>');}
else
{echo ('<button label="Importation impossible "/>');}
echo <<<END
              </groupbox>   
            </tabpanel>
            <tabpanel id="tabpanel_article">
              <vbox>
              <groupbox>
                <description>Préparation</description>
                <vbox>
                  <button label="Millésimes" oncommand="pf_preparation('4');" />
                  <button label="Couleurs" oncommand="pf_preparation('5');" />
                  <button label="Types" oncommand="pf_preparation('6');"/>
                  <button label="Conditionnements" oncommand="pf_preparation('7');"/>
                  <button label="Contenants" oncommand="pf_preparation('8');"/>
                  <label value="Familles"/>
END;
$sql_req = "SELECT critere_cleunik,critere_denomination FROM _criteres WHERE critere_actif=1 and critere_cleunik >9999 and critere_portee & 1024";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs != 0) 
{
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_familles_art_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
echo("<menuitem value='Aucun !!' id='0' _graal_cleunik='0' label='Aucun' selected='true'/>");
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['critere_denomination'])). "' id='".$row['critere_cleunik'] ."' _graal_cleunik='".$row['critere_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['critere_denomination']))."' selected='true'/>");
   }
echo <<<END
  </menupopup>
</menulist>
<button label="Importer" oncommand="pf_preparation('9');" />
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END

<label value="Conditionnements"/>
END;
$sql_req = "SELECT critere_cleunik,critere_denomination FROM _criteres WHERE critere_actif=1 and critere_cleunik >9999 and critere_portee & 1024";
$sql_result = _graal_requete_bd($sql_req);
$vl_e_nombre_valeurs=mysql_num_rows($sql_result);
if ($vl_e_nombre_valeurs != 0) 
{
echo('<menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="15" class="normal" id="ml_conditionnements_art_00" _graal_nombre="'.$vl_e_nombre_valeurs.'">');
echo('<menupopup>');
echo("<menuitem value='Aucun !!' id='0' _graal_cleunik='0' label='Aucun' selected='true'/>");
while ($row = mysql_fetch_assoc($sql_result))
  {
  echo("<menuitem crop='none' value='" .fa_remplace_quotes(fa_ent_xml($row['critere_denomination'])). "' id='".$row['critere_cleunik'] ."' _graal_cleunik='".$row['critere_cleunik']."' label='".fa_remplace_quotes(fa_ent_xml($row['critere_denomination']))."' selected='true'/>");
   }
echo <<<END
  </menupopup>
</menulist>
<button label="Importer" oncommand="pf_preparation('13');" />
END;
}
_graal_libere_requete_bd($sql_result);
echo <<<END
                  
                  
                  
                </vbox>
              </groupbox>   
              <groupbox>
                <description>1 Importation des articles</description>
                <button label="Importer" oncommand="pf_importation('5');"/>
              </groupbox>
              <groupbox>
                <description>1 Importation des famille d'articles (si elles n'ont pas encore été importées.)</description>
                <button label="Importer" oncommand="pf_importation('18');"/>
              </groupbox>    
              <groupbox>
                <description>2 Importation des tarifs</description>
                <button label="Importer" oncommand="pf_importation('9');"/>
              </groupbox>   
              <groupbox>
                <description>3 Importation des nomenclatures</description>
                <button label="Importer" oncommand="pf_importation('10');"/>
              </groupbox>   
              <groupbox>
                <description>4 Importation des tarifs particuliers</description>
                <button label="Importer" oncommand="pf_importation('11');"/>
              </groupbox>   
              <groupbox>
                <description>5 Importation des mouvements de stock</description>
                <groupbox>
                  <description>Préparation</description>
                    <vbox>
                      <button label="Correspondances des origines de mouvement" oncommand="pf_preparation('12');"/>
                      <button label="Associer les origines" oncommand="pf_ouvre_orimou_apisoft();"/>
                    </vbox>
                </groupbox>
                <groupbox>
                  <description>Importation</description>
                  <button label="Importer" oncommand="pf_importation('13');"/>
                </groupbox>
              </groupbox>
             </vbox>   
             <vbox>
              <groupbox>
              <description>6 Importation des comptes comptables</description>
                <button label="Importer" oncommand="pf_importation('16');"/>
              </groupbox>   
             </vbox> 
            </tabpanel>
          </tabpanels>
        </tabbox>
      </groupbox>
    </groupbox>
  </vbox>
</window>
END;
?>
<?php
?>
