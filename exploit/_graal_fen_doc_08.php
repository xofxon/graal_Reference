<?php
include("_graal_header_xul.inc.php");
include("_graal_fonctions_documents.php");
$vl_c_quelsdocs=fa_recup_param('quelsdocs','??');
$vl_e_nomcomplet=fa_recup_session('vs_nomcomplet','tesquiconnard?');
$vs_envaa=fa_recup_session('vs_envaa','0');	//	Nombre d'utilisateurs
$vl_e_doc_cleunik=fa_recup_param('doc_cleunik','A');
/*
echo "aaa";
$toto=fa_verif_droit($vl_e_doc_cleunik);
echo($toto);
echo "bbb";
*/
if ($vl_e_doc_cleunik!='A') {if (fa_verif_droit($vl_e_doc_cleunik)==false){fa_redirige("document_interdit");}}
$vl_e_portee_cleunik=fa_recup_param('portee_cleunik','0');
$vl_c_genre=fa_recup_param('genre','utilis');
switch ($vl_c_quelsdocs){
  case "appli"   : $vl_c_id_fenetre="Fen_01155";$vl_c_id_graal_inc_doc_07="Div_00024";$v_c_tabimage_collapsed="false";$class_tabedition="aa01";break;   //  Une image article
  case "client"  : $vl_c_id_fenetre="Fen_01156";$vl_c_id_graal_inc_doc_07="Div_00024";$v_c_tabimage_collapsed="false";$class_tabedition="aa01";break;   //  Une image article
  default : fa_redirige("acces_bizar");break;
}
$id_inc_ged="Div_00514";
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
$vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=1;
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_aak_100=fa_recup_dico("aak_100");
$vl_c_aak_101=fa_recup_dico("aak_101");
$vl_c_aak_102=fa_recup_dico("aak_102");
$vl_c_aak_103=fa_recup_dico("aak_103");
$vl_c_aak_104=fa_recup_dico("aak_104");
$vl_c_aak_105=fa_recup_dico("aak_105");
$vl_c_aak_106=fa_recup_dico("aak_106");
$vl_c_aak_107=fa_recup_dico("aak_107");
$vl_c_aak_108=fa_recup_dico("aak_108");
$vl_c_aak_110=fa_recup_dico("aak_110");
$vl_c_aak_111=fa_recup_dico("aak_111");
$vl_c_aak_112=fa_recup_dico("aak_112");
$vl_c_aak_113=fa_recup_dico("aak_113");
$vl_c_aak_114=fa_recup_dico("aak_114");
$vl_c_aak_115=fa_recup_dico("aak_115");
$vl_c_aak_116=fa_recup_dico("aak_116");
$vl_c_aak_117=fa_recup_dico("aak_117");
$vl_c_aak_118=fa_recup_dico("aak_118");
$vl_c_aak_120=fa_recup_dico("aak_120");
$vl_c_aak_121=fa_recup_dico("aak_121");
$vl_c_aak_122=fa_recup_dico("aak_122");
$vl_c_aak_123=fa_recup_dico("aak_123");
$vl_c_aak_124=fa_recup_dico("aak_124");
$vl_c_aak_125=fa_recup_dico("aak_125");
$vl_c_aak_126=fa_recup_dico("aak_126");
$vl_c_aak_127=fa_recup_dico("aak_127");
$vl_c_aak_128=fa_recup_dico("aak_128");
$vl_c_aak_129=fa_recup_dico("aak_129");
$vl_c_aak_130=fa_recup_dico("aak_130");
$vl_c_aak_131=fa_recup_dico("aak_131");
$vl_c_aak_132=fa_recup_dico("aak_132");
$vl_c_aak_133=fa_recup_dico("aak_133");
$vl_c_aak_134=fa_recup_dico("aak_134");
$vl_c_aak_135=fa_recup_dico("aak_135");
$vl_c_aak_136=fa_recup_dico("aak_136");
$vl_c_aak_137=fa_recup_dico("aak_137");
$vl_c_aak_138=fa_recup_dico("aak_138");
$vl_c_aak_139=fa_recup_dico("aak_139");
$vl_c_aak_140=fa_recup_dico("aak_140");
$vl_c_aak_141=fa_recup_dico("aak_141");
$vl_c_aak_142=fa_recup_dico("aak_142");
$vl_c_aak_143=fa_recup_dico("aak_143");
$vl_c_aak_144=fa_recup_dico("aak_144");
$vl_c_aak_145=fa_recup_dico("aak_145");
$vl_c_aak_146=fa_recup_dico("aak_146");
$vl_c_aak_147=fa_recup_dico("aak_147");
$vl_c_aak_148=fa_recup_dico("aak_148");
$vl_c_aak_149=fa_recup_dico("aak_149");
$vl_c_aak_150=fa_recup_dico("aak_150");
$vl_c_aak_151=fa_recup_dico("aak_151");$vl_c_aak_151="Ajouter Ã  un dossier";
$vl_c_dico_00013=fa_recup_dico("dico_00013");
$vl_c_dico_00014=fa_recup_dico("dico_00014");
$vl_c_dico_00058=fa_recup_dico("dico_00058");
$vl_c_dico_00059=fa_recup_dico("dico_00059");
$vl_c_dico_00073=fa_recup_dico("dico_00073");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$v_c_tabimage_collapsed="false";
$vl_c_aak_118.=" ".$vl_c_qui;
$vl_c_context_00=<<<EOT
<popupset>
<popup id="pop_arbre_icones">
<menuitem class="menuitem-iconic ad09" label="$vl_c_dico_00106" oncommand="fa_infos_colonnes_arbre_recup('$vl_c_id_fenetre','arbre_icones');" />
</popup>
</popupset>
EOT;
$vl_b_infos_01_hidden="true";
include("_graal_header_winxul.inc.php");
echo <<<END
<window context="graal_cp00" id="_graal_fen_doc_08" title="$vl_c_aak_100" onload="fa_aa(this);pf_etat_fen('ini')" _graal_typedoc="3" _graal_lesquels="$vl_c_quelsdocs" $c_xmlns>
$vl_c_graal_cp00
$vl_c_context_00
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_doc_08.js.php");
include("js/_graal_03.js.php");
include_once("js/_graal_07_ged.js.php");
echo <<<END
<broadcasterset><broadcaster id="broadcaster_01" /></broadcasterset>
  <vbox flex="10" id="vb_tableau">  
  <tree id="arbre_icones" flex="1" hidecolumnpicker="false" flags="" ref="*" querytype="xml" datasources="" enableColumnDrag="true" onselect="pf_sel_ligne(this.id);" context="pop_arbre_icones">
    <treecols>
      <treecol id="tc_ficones_cleunik" hidden="true" label="$vl_c_xxx_100" tooltiptext="$vl_c_xxx_100" sort="?ficones_cleunik" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_ficones_designation" label="$vl_c_aak_134" tooltiptext="$vl_c_aak_134" sort="?ficones_designation" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_ficones_cheminorigine" label="$vl_c_aak_133" tooltiptext="$vl_c_aak_133" sort="?ficones_cheminorigine" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_ficones_infos" label="$vl_c_aak_135" tooltiptext="$vl_c_aak_135" sort="?ficones_infos" /><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
     <template><query expr="*"/><action>
      <treechildren>
        <treeitem uri="?" seltype="single">
          <treerow>
            <treecell label="?ficones_cleunik"/>
            <treecell label="?ficones_designation"/>
            <treecell label="?ficones_cheminorigine"/>
            <treecell label="?ficones_infos"/>
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
  </vbox>
  <splitter ondblclick="pf_cache_tab();"/>
<hbox flex="1">
	<vbox flex="1">    
<hbox >
    <label control="la_emplacement" value="$vl_c_aak_133" />
                      <hbox >
                        <toolbarbutton observes="broadcaster_01" class="al02" tooltiptext="$vl_c_aak_115" id="tb_ouvre_fichier" oncommand="pf_ouvre_fichier('disque');"/>
                        <toolbarbutton hidden="true" observes="broadcaster_01" class="ai03" tooltiptext="$vl_c_aak_130" id="tb_ouvre_fichier_ged" oncommand="pf_ouvre_fichier('ged');"/>
                       </hbox>
                       <hbox flex="1">
                        <textbox flex="7" observes="broadcaster_01" id="tb_emplacement"   maxlenght="260"/>
                       </hbox> 
    </hbox>
    
        <vbox flex="1">
          
            <vbox flex="1">
              <grid flex="1">
                <columns flex="1">
                 <column/>
                 <column />
                 <column flex="1"/>
                </columns>
                  <rows>
                      <row>
                       <label control="la_titre" value="$vl_c_aak_101"/>
                       <flex/>
                       <textbox observes="broadcaster_01" id="tb_titre"  />
                      </row>
                      <row flex="2" >
                        <label control="la_descriptif_sommaire" value="$vl_c_aak_102"/>
                        <flex/>
                        <textbox observes="broadcaster_01" multiline="true" id="tb_descriptif_sommaire"   />
                      </row>
                  </rows>
              </grid>
            </vbox>
        
      </vbox>
      <vbox flex="1">
        <button id="bt_affiche_image" label="$vl_c_aak_125" oncommand="pf_affiche_image();"/>
        <iframe flex="1" onload="event.stopPropagation();" id="ifr_image" src=""/>
  </vbox>
  </vbox>
            <vbox id="boutons_standards">
END;
include("_graal_inc_boutons_01.php");
echo <<<END
			</vbox>
            
</hbox>
 </window>
END;
?>
