<?php
echo <<<END
/*
********************************************************************************************************************************
**********  Squelette de script     ********
********************************************************************************************************************************
*/
var vf_o_tree_01;
var vf_c_url_alimente_table_01;
var vf_c_script_bdope_fen;
var vf_c_action;
  
function pf_alimente_table(vv_qui)
{
  var raf_random=Math.random();
  switch (vv_qui)
  {
    case "arbre_receptacle":
      vf_o_tree_01.setAttribute('datasources', '');
      vf_o_tree_01.setAttribute('datasources', vf_c_url_alimente_table_01+"raf="+raf_random);
      break;
    case "autres...":
      break;
    default:
      break;
  }
}
function pf_etat_fen(vv_quoi)
  {
   vf_c_action=vv_quoi;
   switch(vv_quoi) {
     case "selectionner": 
        var rowIndex = vf_o_tree_01.currentIndex;
        if(rowIndex == -1){alert("Il faut selectionner un élément dans la liste.");return;}
        fa_grise_non("bt_supprimer");
        fa_grise_non("bt_modifier");
        fa_grise_oui("bt_enregistrer");
        fa_grise_oui("bt_ajouter");
        fa_grise_oui("bt_detailler");
        fa_grise_oui("bt_sortir");
        fa_grise_non("bt_annuler");
        break;
     case "modifier":
        fa_grise_oui("bt_supprimer");
        fa_grise_oui("bt_modifier");
        fa_grise_oui("bt_ajouter");
        fa_grise_oui("bt_detailler");
        fa_grise_oui("bt_sortir");
        fa_grise_non("bt_annuler");
        fa_grise_non("bt_enregistrer");
        fa_focusdonne('tb_titre');
        break;
     case "ajouter":
        fa_grise_oui("bt_supprimer");
        fa_grise_oui("bt_modifier");
        fa_grise_oui("bt_ajouter");
        fa_grise_oui("bt_detailler");
        fa_grise_oui("bt_sortir");
        fa_grise_non("bt_annuler");
        fa_grise_non("bt_enregistrer");
        pf_raz_fiche();
        pf_alimente_defaut();
        fa_focusdonne('tb_titre');
        break;
     case "annuler":
        fa_grise_oui("bt_modifier");
        fa_grise_oui("bt_annuler");
        fa_grise_oui("bt_supprimer");
        fa_grise_oui("bt_enregistrer");
        fa_grise_non("bt_sortir");
        fa_grise_non("bt_ajouter");
        fa_grise_non("bt_detailler");
        pf_raz_fiche();
        vf_o_tree_01.focus();
        break;
     case "sortir":
        window.close();  //  Ne fonctionne que si c'est une nouvelle fenêtre
        //window.history.back(); //  Ne fonctionne que si cette fenetre est une fenetre appellée dans la même fenêtre
        break;   
     default:
        break;
}
  }
function pf_fin_requete(stream)
{
var vl_datas = stream;
if (vl_datas=='ok') {pf_alimente_table("arbre_receptacle");} else {alert(vl_datas)}
pf_etat_fen('annuler');
}
END;
?>
