<?php
include("_graal_header_xul.inc.php");
$vl_c_genre=fa_recup_param('genre','');
switch ($vl_c_genre) {
	case "page":$vl_c_id_fenetre="xxxxxxxxx";break;
	case "fich":$vl_c_id_fenetre="xxxxxxxxx";break;
	case "text":$vl_c_id_fenetre="Fen_01072";break;
}
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);
$vl_b_acces=$vl_tb_droits[0];
$vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=1;
if ($vl_b_acces==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_dico_00005=fa_recup_dico('dico_00005');
$vl_c_dico_00013=fa_recup_dico('dico_00013');
$vl_c_dico_00014=fa_recup_dico('dico_00014');
$vl_c_dico_00028=fa_recup_dico('dico_00028');
$vl_c_dico_00006=fa_recup_dico("dico_00006");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_bsl_100=fa_recup_dico("bsl_100");
$vl_c_bsl_101=fa_recup_dico("bsl_101");
$vl_c_bsl_102=fa_recup_dico("bsl_102");
$vl_c_bsl_103=fa_recup_dico("bsl_103");
$vl_c_bsl_106=fa_recup_dico("bsl_106");
$vl_c_bsl_115=fa_recup_dico("bsl_115");
$vl_c_bsl_137=fa_recup_dico("bsl_137");
$vl_c_bsl_138=fa_recup_dico("bsl_138");
$vl_c_bsl_139=fa_recup_dico("bsl_139");
$vl_c_bsl_140=fa_recup_dico("bsl_140");
$vl_c_bsl_141=fa_recup_dico("bsl_141");
$vl_c_bsl_142=fa_recup_dico("bsl_142");
$vl_c_bsl_143=fa_recup_dico("bsl_143");
$vl_c_bsl_144=fa_recup_dico("bsl_144");
$vl_c_bsl_145=fa_recup_dico("bsl_145");
$vl_c_bsl_146=fa_recup_dico("bsl_146");
$vl_c_bsl_147=fa_recup_dico("bsl_147");
$vl_c_dico_00149=fa_recup_dico('dico_00149');
switch ($vl_c_genre) {
	case "page":
$vl_c_bloc_recherche=<<<EOT
<html:div id="contenu" style="border:0px;font-style:italic;
	background-color:#FFDDFF;
	border-bottom:1px solid #ED23AD;
	border-top:1px solid #ED23AD;
	border-right:1px solid #ED23AD;
	border-left:8px solid #ED23AD;
	padding:10px 10px 10px 44px;
	background-image:url('css/PanneauInfo.png');
	background-repeat:no-repeat;
	background-position:10px 10px;
	color:#000000;
	margin:10px 20px 10px 10px;
	height:150px;
">
<html:blockquote class="sty01" >
      <html:br/><html:br/><html:br/>
      <html:div style="margin:10px 20px 10px 100px;"><html:h3>Assurez vous d'avoir le droit de récupérer les adresses de courriel sur les pages auxquelles vous tentez d'accéder.</html:h3></html:div>
      <html:br/>
    </html:blockquote>
	</html:div>
	<hbox>
		<button readonly="true" label="$vl_c_bsl_137"/>
		<textbox flex="1" id="tb_recupera" value=""/>
		<button id="bt_recupera" class="ad02" label="$vl_c_bsl_138" crop="end" dir="normal" oncommand="pf_recupera();"  />
	</hbox>
EOT;
		break;
	case "fich":
$vl_c_bloc_recherche=<<<EOT
<html:div id="contenu" style="border:0px;font-style:italic;
	background-color:#FFDDFF;
	border-bottom:1px solid #ED23AD;
	border-top:1px solid #ED23AD;
	border-right:1px solid #ED23AD;
	border-left:8px solid #ED23AD;
	padding:10px 10px 10px 44px;
	background-image:url('css/PanneauInfo.png');
	background-repeat:no-repeat;
	background-position:10px 10px;
	color:#000000;
	margin:10px 20px 10px 10px;
	height:150px;
">
<html:blockquote class="sty01" >
      <html:br/><html:br/><html:br/>
      <html:div style="margin:10px 20px 10px 100px;"><html:h3>Assurez vous d'avoir le droit de récupérer les adresses de courriel sur les pages auxquelles vous tentez d'accéder.</html:h3></html:div>
      <html:br/>
    </html:blockquote>
	</html:div>
<hbox>
	<button readonly="true" label="$vl_c_bsl_103"/>
   <hbox>
    <toolbarbutton observes="broadcaster_01" class="al02" tooltiptext="$vl_c_bsl_101" id="tb_ouvre_fichier" oncommand="pf_ouvre_fichier('disque');"/>
    <toolbarbutton observes="broadcaster_01" class="ai03" tooltiptext="$vl_c_bsl_102" id="tb_ouvre_fichier_ged" oncommand="pf_ouvre_fichier('ged');" collapsed="true"/>
   </hbox>
   <hbox flex="1">
    <textbox flex="7" observes="broadcaster_01" id="tb_recupera"   maxlenght="260"/>
    <button id="bt_recupera" class="ad02" label="$vl_c_bsl_138" crop="end" dir="normal" oncommand="pf_recupera();" />
   </hbox> 
</hbox>
EOT;
	break;
	case "text":
$vl_c_bloc_recherche=<<<EOT
<hbox flex="1">
	<hbox flex="1">
    <textbox flex="10" observes="broadcaster_01" id="tb_recupera"   multiline="true" row="10"/>
    <button id="bt_recupera" class="ad02" label="$vl_c_bsl_138" crop="end" dir="normal" oncommand="pf_recupera();" />
   </hbox> 
</hbox>
EOT;
	break;
}
include("_graal_header_winxul.inc.php");
echo <<<END
<window title="$vl_c_bsl_100" onload="fa_aa(this);pf_etat_fen('ini')" onunload="pf_onunload();" $c_xmlns>
$vl_c_graal_cp00 
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_import_adresses_courriel_04.js.php");
include("js/_graal_03.js.php");
echo <<<END
<popupset>
	<popup id="pop_recupera">
    <menuitem class="menuitem-iconic ad09" label="$vl_c_dico_00106" oncommand="fa_infos_colonnes_arbre_recup('$vl_c_id_fenetre','arbre_recupera_courriels');" />
    <menuitem label="$vl_c_bsl_139" class="menuitem-iconic al17" oncommand="pf_recupera_panier_ajoute();" />
		<menuitem label="$vl_c_bsl_140" class="menuitem-iconic al17" oncommand="fa_gid('deck01').selectedIndex=1;" />
  </popup>
	<popup id="pop_recupera_panier">
    <menuitem class="menuitem-iconic ad09" label="$vl_c_dico_00106" oncommand="fa_infos_colonnes_arbre_recup('$vl_c_id_fenetre','arbre_recupera_panier');" />
    <menuitem label="$vl_c_bsl_142" class="menuitem-iconic al17" oncommand="pf_recupera_panier_supprime();" />
		<menuitem label="$vl_c_bsl_141" class="menuitem-iconic al17" oncommand="fa_gid('deck01').selectedIndex=0;" />
  </popup>
</popupset>
<deck id="deck01" flex="1">
<vbox flex="1">
<vbox flex="1">
	$vl_c_bloc_recherche
	<hbox>
        <groupbox>
          <caption>
            <label control="la_vide" value="Lors de l'analyse, effacer les valeurs présentes dans la table"/>
          </caption>
          <radiogroup id='rdg_vide' flex="1" value="2">
          <hbox>
            <radio class="af16" dir="reverse" observes="broadcaster_01" id='ra_vide_oui' label="$vl_c_dico_00013" value='1' />
            <radio class="ae15" dir="reverse" observes="broadcaster_01" id='ra_vide_non' label="$vl_c_dico_00014" value='2'/>
            <spacer flex="1"/>
           </hbox>
         </radiogroup>
        </groupbox>
      </hbox>
  <tree id="arbre_recupera_das_courriel" collapsed="true" ignoreincolumnpicker="true" flex="1" flags="" ref="*" querytype="xml" datasources="" seltype="multiple" enableColumnDrag="true" context="pop_recupera" ondblclick="pf_ouvre('courriel');">
    <treecols>
      <treecol id="tc_recupera_das_refweb" label="$vl_c_bsl_106" sort="?refweb"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_recupera_das_controle_01" label="$vl_c_bsl_115" class="centre" sort="?controle_01"/><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
    <template><query expr="*"/><action>
      <treechildren>
        <treeitem uri="?" seltype="single">
          <treerow>
            <treecell label="?refweb"/>
            <treecell label="?controle_01"/>
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
	<tree id="arbre_recupera_courriel" ignoreincolumnpicker="true" flex="1" seltype="multiple" enableColumnDrag="true" context="pop_recupera" ondblclick="pf_ouvre('courriel');">
    <treecols>
      <treecol id="tc_recupera_refweb" label="$vl_c_bsl_106" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_recupera_controle_01" label="$vl_c_bsl_106" /><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
		<treechildren id="fils_recupera_destination"/>
  </tree>
</vbox>
<button id="bt_info_fen" class="ab19" label="$vl_c_dico_00149"  crop="end" dir="normal" oncommand="fa_infos_fenetre('$vl_c_win_id')" />
</vbox>
<vbox flex="1">
<vbox flex="1">
	<tree id="arbre_recupera_panier" ignoreincolumnpicker="true" flex="1" seltype="multiple" enableColumnDrag="true" context="pop_recupera_panier">
    <treecols>
      <treecol id="tc_recupera_panier_refweb" label="$vl_c_bsl_106" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_recupera_panier_controle_01" label="$vl_c_bsl_115" class="centre" /><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
		<treechildren id="fils_recupera_panier_destination"/>
  </tree>

      <groupbox>
			
			<hbox>
				
			<hbox flex= "1">
        <groupbox>
          <caption>
            <label control="la_emailing_autorise" value="$vl_c_bsl_144"/>
          </caption>
          <hbox>
            <radiogroup id='rdg_veuxpasdemail' flex="1" value="3">
          <hbox>
            <radio class="ak16" dir="reverse" observes="broadcaster_01" id='ra_veuxpasdemail_oui' label="$vl_c_dico_00013" value='1' />
            <radio class="ak17" dir="reverse" observes="broadcaster_01" id='ra_veuxpasdemail_non' label="$vl_c_dico_00014" value='2'/>
            <radio class="ak18" dir="reverse" observes="broadcaster_01" id='ra_veuxpasdemail_nsp' label="$vl_c_dico_00028" value='3'/>
            <spacer flex="1"/>
           </hbox>
         </radiogroup>
          </hbox>
        </groupbox>
      </hbox>
      <hbox flex= "1" collapsed="true">
        <groupbox>
          <caption>
            <label control="la_valide" value="$vl_c_bsl_145"/>
          </caption>
          <radiogroup id='rdg_valide' flex="1" value="3">
          <hbox>
            <radio class="af16" dir="reverse" observes="broadcaster_01" id='ra_valide_oui' label="$vl_c_dico_00013" value='1' />
            <radio class="ae15" dir="reverse" observes="broadcaster_01" id='ra_valide_non' label="$vl_c_dico_00014" value='2'/>
            <radio class="af15" dir="reverse" observes="broadcaster_01" id='ra_valide_nsp' label="$vl_c_dico_00028" value='3'/>
            <spacer flex="1"/>
           </hbox>
         </radiogroup>
        </groupbox>
      </hbox>
			</hbox>
			<button id="bt_valider_dans_fichier" label="$vl_c_bsl_147" oncommand="pf_validation();" />
		</groupbox>
  
</vbox>
<button id="bt_info_fen" class="ab19" label="$vl_c_dico_00149"  crop="end" dir="normal" oncommand="fa_infos_fenetre('$vl_c_win_id')" />
</vbox>
</deck>
</window>
END;
?>
