<?php
_graal_requete_charge_varlib($vl_c_id_article_dep_emp,$vl_e_uti_cleunik);
$vl_c_bbr_001=fa_recup_dico("bbr_001");
$vl_c_bbr_002=fa_recup_dico("bbr_002");
$vl_c_bbr_003=fa_recup_dico("bbr_003");
$vl_c_bbr_004=fa_recup_dico("bbr_004");
$vl_c_bbr_005=fa_recup_dico("bbr_005");
$vl_c_bbr_019=fa_recup_dico("bbr_019");
$vl_c_bbr_020=fa_recup_dico("bbr_020");
$vl_c_bbr_021=fa_recup_dico("bbr_021");
$vl_c_bbr_022=fa_recup_dico("bbr_022");$vl_c_bbr_022="Transfert inter-dépôts";
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_id_fen_relation="Fen_00230";
$vl_c_id_fen_cession="Fen_01130";
echo <<<END
<vbox id="bbr_article_dep_emp_01" flex="1" >
END;
if ($vl_c_barre_presente_dep_emp=='ok'){
echo <<<END
      <toolbar grippyhidden="true">
  		  <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_bbr_019" oncommand="pf_affiche_donnees_dep_emp();"/>
        <toolbarseparator />
        <hbox id="bloc_relations">
END;
if ($vl_c_id_fen_relation=="000000000") {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_relation,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
if ($vl_tb_droits[1]!=0){
echo <<<END
          <toolbarbutton class="aa01" observes="broadcaster_01" id="tb_relation_01" tooltiptext="$vl_c_bbr_020" oncommand="pf_ouvre('dep_emp','nouveau');"/>
END;
}
echo <<<END
          <toolbarbutton class="aa01" observes="broadcaster_01" id="tb_relation_02" tooltiptext="$vl_c_bbr_021" oncommand="pf_ouvre('dep_emp','ouvrir');" />
END;
}
if ($vl_c_id_fen_cession=="000000000") {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_cession,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
echo <<<END
          <toolbarbutton class="ag08" observes="broadcaster_01" id="tb_cession_01" tooltiptext="$vl_c_bbr_022" oncommand="pf_ouvre('dep_emp','cession');"/>
END;
}





echo <<<END
        </hbox>
        <toolbarseparator />
      </toolbar>
END;
}
$vl_c_context_00='<popupset><popup id="pop_tr_arbre_dep_emp"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arbre_dep_emp\');" /></popup></popupset>';
echo <<<END
$vl_c_context_00
  <tree id="arbre_dep_emp" flex="1" hidecolumnpicker="true" flags="" ref="*" querytype="xml" datasources="" onselect="pf_sel_arbre_dep_emp();" context="pop_tr_arbre_dep_emp">
    <treecols>
      <treecol hidden="true" ignorecolumnpicker="true" id="tc_art_depemp_cleunik" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol hidden="true" ignorecolumnpicker="true" id="tc_art_cleunik" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol hidden="true" ignorecolumnpicker="true" id="tc_choix_depot" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol hidden="true" ignorecolumnpicker="true" id="tc_choix_empla" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_depot" label="$vl_c_bbr_001" sort="?depot"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_emplacement" label="$vl_c_bbr_002" sort="?emplacement"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_qte_stock" class="droite" label="$vl_c_bbr_003" sort="?qte_stock"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_qte_inven" class="droite" label="$vl_c_bbr_004" sort="?qte_inven"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_dateheure_invent" label="$vl_c_bbr_005" sort="?dateheure_invent"/><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
    <template><query expr="*"/><action>
      <treechildren>
        <treeitem uri="?" seltype="single">
          <treerow>
            <treecell label="?art_depemp_cleunik"/>
            <treecell label="?art_cleunik"/>
            <treecell label="?choix_depot"/>
            <treecell label="?choix_empla"/>
            <treecell label="?depot"/>
            <treecell label="?emplacement"/>
            <treecell label="?qte_stock"/>
            <treecell label="?qte_inven"/>
            <treecell label="?dateheure_invent"/>
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
  </vbox>
END;
?>
