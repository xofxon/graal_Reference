<?php
include("_graal_header_xul.inc.php");
$vl_e_uti_cleunik =intval(fa_recup_session("vs_uti_cleunik","0"));
$vl_c_id_fenetre="Fen_00938";
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_b_acces=$vl_tb_droits[0];
$vl_b_ajout=$vl_tb_droits[1];
$vl_b_modif=$vl_tb_droits[2];
$vl_b_suppr=$vl_tb_droits[3];
$vl_b_impri=$vl_tb_droits[4];
$vl_b_detai=true;
if ($vl_b_acces==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);
$vl_c_bqx_100=fa_recup_dico("bqx_100");
$vl_c_bqx_101=fa_recup_dico("bqx_101");
$vl_c_bqx_102=fa_recup_dico("bqx_102");
$vl_c_bqx_103=fa_recup_dico("bqx_103");
$vl_c_bqx_104=fa_recup_dico("bqx_104");
$vl_c_bqx_105=fa_recup_dico("bqx_105");
$vl_c_bqx_106=fa_recup_dico("bqx_106");
$vl_c_bqx_107=fa_recup_dico("bqx_107");
$vl_c_bqx_108=fa_recup_dico("bqx_108");
$vl_c_bqx_109=fa_recup_dico("bqx_109");
$vl_c_bqx_110=fa_recup_dico("bqx_110");
$vl_c_bqx_111=fa_recup_dico("bqx_111");
$vl_c_dico_00013=fa_recup_dico("dico_00013");
$vl_c_dico_00014=fa_recup_dico("dico_00014");
include("_graal_header_winxul.inc.php");
echo <<<END
<window title="$vl_c_bqx_100" id="_win_fen_treso_journal" onload="fa_aa(this);pf_aa_init();" $c_xmlns>
<broadcasterset><broadcaster id="broadcaster_01" /></broadcasterset>
$vl_c_graal_cp00
END;
include_once("js/_graal_01.js.php");
include("js/_graal_treso_journal_01.js.php");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_context_00='<popupset><popup id="pop_arbre_journal"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arbre_journal\');" /></popup></popupset>';
echo <<<END
$vl_c_context_00
<vbox id="hbox_panneaudegauche" flex="1">
<vbox id="box_boite_outils_xof_01" flex="1">
  <tree id="arbre_journal" flex="1" hidecolumnpicker="false" flags="" ref="*" querytype="xml" datasources="" enableColumnDrag="true" onselect="pf_sel_ligne(this.id);" context="pop_arbre_journal">
    <treecols>
      <treecol id="tc_journal_cleunik" sort="?journal_cleunik" ignoreincolumnpicker="true" hidden="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_code" label="$vl_c_bqx_101" sort="?code" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_nom" label="$vl_c_bqx_102" sort="?nom" /><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
    <template><query expr="*"/><action>
      <treechildren>
        <treeitem uri="?" seltype="single">
          <treerow>
            <treecell label="?journal_cleunik"/>
            <treecell label="?code"/>
            <treecell label="?nom"/>
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
</vbox>
<splitter />
<hbox> 
<vbox id="box_boite_outils_xof_03" flex="1">
  <grid flex="1">
    <columns>
      <column flex="1"/>
      <column flex="10"/>
    </columns>
    <rows>
      <row>
        <label control="la_code" value="$vl_c_bqx_101"/>
        <textbox id="tb_code" observes="broadcaster_01"/>
      </row>
      <row>
        <label control="la_nom" value="$vl_c_bqx_102"/>
        <textbox id="tb_nom" observes="broadcaster_01"/>
      </row>
			<row collapsed="true">
        <label control="la_type" value="Type"/>
        <textbox id="tb_type" value="T"/>
      </row>
			<row >
	      <label control="la_refdom" value="$vl_c_bqx_103"/>
        <textbox observes="broadcaster_01" maxlength="25" id="tb_domiciliation"  />
      </row>
      <row >
        <label control="la_rib" value="$vl_c_bqx_104"/>
        <hbox >
          <textbox flex="1" observes="broadcaster_01" width ="50" id="tb_etablissement" _graal_suivant="tb_guichet" maxlength="5" oninput="pf_gere_suivant(this.id)"  />
          <textbox flex="1" observes="broadcaster_01" width ="50" id="tb_guichet" _graal_suivant="tb_compte" maxlength="5" oninput="pf_gere_suivant(this.id)"  />
          <textbox flex="1" observes="broadcaster_01" width ="110" id="tb_compte" _graal_suivant="tb_cle" maxlength="11" oninput="pf_gere_suivant(this.id)"  />
          <textbox flex="1" observes="broadcaster_01" width ="20" id="tb_cle" _graal_suivant="tb_verif_rib" maxlength="2" oninput="pf_gere_suivant(this.id)"  />
          <toolbarbutton class="modifier" observes="broadcaster_01" id="tb_verif_rib" tooltiptext="$vl_c_bqx_105" oncommand="pf_verif_rib()" />
        </hbox>
      </row>
      <row>
        <label control="la_compte" value="$vl_c_bqx_106"/>
        <hbox>
          <toolbarbutton class="al02" observes="broadcaster_01" tooltiptext="$vl_c_bqx_007" oncommand="pf_ouvre('pc_journal');"/>
          <textbox id="tb_code_compte" readonly="true" compte_comptable="-1"/>
          <textbox id="tb_intitule_compte" readonly="true" flex="1"/>
        </hbox>
      </row>
      <row>
        <label control="la_caisse" value="$vl_c_bqx_108"/>
        <radiogroup id='rdg_caisse_oui_non' flex="1">
          <hbox>
            <radio observes="broadcaster_01" id='ra_caisse_non' label="$vl_c_dico_00014" value='1' />
            <spacer flex="1"/>
            <radio observes="broadcaster_01" id='ra_caisse_oui' label="$vl_c_dico_00013" value='2'/>
          </hbox>
        </radiogroup>

      </row>
    </rows>
  </grid>
</vbox>
<vbox>
     <vbox id="boutons_standards" />
END;
include("_graal_inc_boutons_01.php");
echo <<<END
    </vbox>
  </hbox>
</vbox>
</window>
END;
?>
