<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<window  onload="fa_gid('arbre').view.selection.select(0);pf_sel_ligne('arbre',0);" title="test XsOFtware" orient="vertical" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:html="http://www.w3.org/1999/xhtml" >
<script type="application/x-javascript"><![CDATA[
function pf_sel_ligne(vv_objet,vv_noligne){
	var rowIndex =-1;
	if (vv_noligne!="undefined"){
		rowIndex=vv_noligne;
	} else {
		rowIndex=vv_objet.currentIndex;
	}
  	if(rowIndex == -1){return;}
	fa_gid(vv_objet).startEditing(rowIndex,fa_gid(vv_objet).columns.getNamedColumn("col01"));
}
function pf_ligne_suivante(vv_objet){
var vl_e_nb=fa_gid(vv_objet).view.rowCount;
  var rowIndex = fa_gid(vv_objet).currentIndex;
  if(rowIndex == -1){return;}
  if (vl_e_nb-1<=rowIndex){
  	fa_gid(vv_objet).view.selection.select(rowIndex);
	fa_gid(vv_objet).startEditing(rowIndex,fa_gid(vv_objet).columns.getNamedColumn("col01"));
  	return;
  }
  rowIndex++;
  fa_gid(vv_objet).view.selection.select(rowIndex)
	fa_gid(vv_objet).startEditing(rowIndex,fa_gid(vv_objet).columns.getNamedColumn("col01"));
}
function pf_ligne_précedente(vv_objet){
var vl_e_nb=fa_gid(vv_objet).view.rowCount;
  var rowIndex = fa_gid(vv_objet).currentIndex;
  if(rowIndex == -1){return;}
  if (rowIndex == 0){
  	fa_gid(vv_objet).view.selection.select(0);
	fa_gid(vv_objet).startEditing(0,fa_gid(vv_objet).columns.getNamedColumn("col01"));
  	return;
  }
  rowIndex--;
  fa_gid(vv_objet).view.selection.select(rowIndex);
	fa_gid(vv_objet).startEditing(rowIndex,fa_gid(vv_objet).columns.getNamedColumn("col01"));
}
function fa_gid(vv_quoi){
  try {
    return document.getElementById(vv_quoi);
    } catch (e) {
		return null;
	}
}
function pf_clavier(e,vv_objet) {
	try {
		switch(e.keyCode){
      case 13: // 'Enter'	//	Surtout pas enter !!!
      case 9: // 'Tab'
      case 40: // 'flèche basse'
      pf_ligne_suivante(vv_objet);
      	break;
      case 38:	//	flèche précédente
        pf_ligne_précedente(vv_objet)
        break;
      default:
        break;
    }
 	} catch (e) {
    alert("erreur"+e)
  }
}
]]></script>
<tree editable="true" flex="1" id="arbre" disableKeyNavigation="true" onkeyup="pf_clavier(event,this.id);">
   <treecols>
     <treecol id="col01" label="Débit" flex="1" editable="true"/>
     <treecol id="col02" label="Crédit" flex="2" editable="false"/>
   </treecols>
   <treechildren>
     <treeitem>
       <treerow>
         <treecell label="" />
         <treecell label="Ligne 1" />
       </treerow>

     </treeitem>
<treeitem>
       <treerow>
         <treecell label=""/>
         <treecell label="Ligne 2" editable="false"/>
       </treerow>

     </treeitem>
     <treeitem>
       <treerow>
         <treecell label=""/>
         <treecell label="Ligne 3" editable="false"/>
       </treerow>

     </treeitem>
   </treechildren>
 </tree>

</window>
 