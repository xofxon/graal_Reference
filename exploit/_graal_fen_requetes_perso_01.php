<?php
include("_graal_header_xul.inc.php");
include("_graal_var_portee.php");
$vl_c_quelsdocs=fa_recup_param('quelsdocs','?');
$vl_c_type=fa_recup_param("type","");
$vl_c_genre=fa_recup_param("genre","");
switch ($vl_c_quelsdocs){
  case "medoc"   : $vl_c_id_fenetre="Fen_00100";$vl_c_id_inc_reqperso_01="Div_00027";$vl_c_id_inc_reqperso_02="Fen_00105";break;  //Mes requêtes personnelles
  case "nosdocs" : $vl_c_id_fenetre="Fen_00101";$vl_c_id_inc_reqperso_01="Div_00028";$vl_c_id_inc_reqperso_02="Fen_00105";break;  // Nos requêtes personnelles 
  case "leurdocs": $vl_c_id_fenetre="Fen_00102";$vl_c_id_inc_reqperso_01="Div_00029";$vl_c_id_inc_reqperso_02="Fen_00105";break; //  Leurs requêtes personnelles
  case "standard":
    switch ($vl_c_type) {
      case "1"  : //  acteurs
        switch ($vl_c_genre) {
          case "999999" : $vl_c_id_fenetre="Fen_00634";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Tous les acteurs
          case "110003" : $vl_c_id_fenetre="Fen_00556";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Clients
          case "110001" : $vl_c_id_fenetre="Fen_00557";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Prospects Clients
          case "110004" : $vl_c_id_fenetre="Fen_00558";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Fournisseurs
          case "110002" : $vl_c_id_fenetre="Fen_00559";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Prospects fournisseurs
          case "110005" : $vl_c_id_fenetre="Fen_00560";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Autres acteurs
          case "110006" : $vl_c_id_fenetre="Fen_00561";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Acteurs indéterminés
          default : fa_redirige("acces_interdit");break;
        }
        break;
      case "2"  : //  articles
        $vl_c_id_fenetre="Fen_00555";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break;
        break;
/*
      case "3"  : //  ged
        $vl_c_id_fenetre="Fen_00555";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break;
        break;
*/				
			case "4"  : //  interlocuteurs
        switch ($vl_c_genre) {
          case "999999" : $vl_c_id_fenetre="Fen_00634";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Tous les acteurs
          case "110003" : $vl_c_id_fenetre="Fen_00556";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Clients
          case "110001" : $vl_c_id_fenetre="Fen_00557";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Prospects Clients
          case "110004" : $vl_c_id_fenetre="Fen_00558";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Fournisseurs
          case "110002" : $vl_c_id_fenetre="Fen_00559";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Prospects fournisseurs
          case "110005" : $vl_c_id_fenetre="Fen_00560";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Autres acteurs
          case "110006" : $vl_c_id_fenetre="Fen_00561";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break; //  Acteurs indéterminés
          default : fa_redirige("acces_interdit");break;
        }
        break;
      case "5"  : //  critères (le 29 juin 2009) : les paramètres ci-dessous sont ceux des articles et sont donc à changer ...
        $vl_c_id_fenetre="Fen_00555";$vl_c_id_inc_reqperso_01="Div_00484";$vl_c_id_inc_reqperso_02="Fen_00562";break;
        break;
								
      default : fa_redirige("acces_interdit");break;
    }
    break;
  
  default : fa_redirige("acces_interdit");break;
}
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
switch ($vl_c_quelsdocs){
  case "medoc"   : $vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=1;break;  //Mes requêtes personnelles
  case "nosdocs" : $vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=1;break;  // Nos requêtes personnelles 
  case "leurdocs": $vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=0;break; //  Leurs requêtes personnelles
  case "standard": $vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=1;break; //  Requêtes standard
  default : fa_redirige("acces_interdit");break;
}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_aak_101=fa_recup_dico("aak_101");
$vl_c_aak_102=fa_recup_dico("aak_102");
$vl_c_aak_103=fa_recup_dico("aak_103");
$vl_c_aak_104=fa_recup_dico("aak_104");
$vl_c_aak_105=fa_recup_dico("aak_105");
$vl_c_aak_106=fa_recup_dico("aak_106");
$vl_c_aak_107=fa_recup_dico("aak_107");
$vl_c_aak_109=fa_recup_dico("aak_109");
$vl_c_aak_110=fa_recup_dico("aak_110");
$vl_c_aak_111=fa_recup_dico("aak_111");
$vl_c_aak_112=fa_recup_dico("aak_112");
$vl_c_aak_113=fa_recup_dico("aak_113");
$vl_c_aak_114=fa_recup_dico("aak_114");
$vl_c_aak_116=fa_recup_dico("aak_116");
$vl_c_aak_117=fa_recup_dico("aak_117");
$vl_c_aak_118=fa_recup_dico("aak_118");
$vl_c_aak_119=fa_recup_dico("aak_119");
$vl_c_aak_120=fa_recup_dico("aak_120");$vl_c_aak_120="Droits";
include("_graal_header_winxul.inc.php");
$vl_tc_composants=array($vl_c_id_fenetre,$vl_c_id_inc_reqperso_01,$vl_c_id_inc_reqperso_02);
echo <<<END
<window context="graal_cp00" id="_graal_req_perso_01" onload="fa_aa(this);pf_etat_fen('ini')" $c_xmlns>
$vl_c_graal_cp00
<broadcasterset><broadcaster id="broadcaster_01" /></broadcasterset>
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_req_perso_01.js.php");
echo <<<END
<keyset id="_graal_ks_01" />
<popup id="pp_actions">
  <menuitem label="$vl_c_aak_118" oncommand="pf_voir_plein_ecran()"/>
</popup>
<hbox>
<label id="la_genre" _graal_typedoc="8" _graal_genre ="docs" _graal_lesquels="$vl_c_quelsdocs" value="$vl_c_aak_119"/>
</hbox>
END;
include("_graal_inc_req_perso_01.php");
echo <<<END
<hbox hidden="true">  
<menubar id="menu_menus" flex="1">
<toolbarseparator />
  <menu id="menu_02" label="$vl_c_aak_106" accesskey="C" >
   <menupopup>
  <menuitem id="menu_02_01" disabled="true" label="$vl_c_aak_107" oncommand="pf_action('droits')" />
  <menuseparator id="menu_02_08"/>
  <menuitem id="menu_02_02" disabled="true" label="$vl_c_aak_109" />
  <menuitem id="menu_02_03" disabled="true" label="$vl_c_aak_110" />
   </menupopup>
 </menu>
<toolbarseparator />
  <menu id="menu_04" label="?" accesskey="?" >
   <menupopup>
  <menuitem id="menu_04_01" disabled="true" label="$vl_c_aak_111" accesskey="VK_F1"/>
  <menuseparator id="menu_04_02"/>
  <menuitem id="menu_04_03" disabled="true" label="$vl_c_aak_112" acceskey="S"/>
  <menuitem id="menu_04_04" disabled="true" label="$vl_c_aak_113" acceskey="D"/>
  <menuseparator id="menu_04_05"/>
  <menuitem id="menu_04_08" disabled="true" label="$vl_c_aak_114" tooltiptext="$vl_c_aak_116"/>
   </menupopup>
 </menu>
</menubar>
</hbox>  
<splitter></splitter>  
      <hbox flex="3">
      <vbox flex="1">
        <tabbox flex="1"  orient="horizontal" dir="reverse">
          <tabpanels id="tabpan_01" flex="1" >
END;
include("_graal_inc_req_perso_02.php");
echo <<<END
          </tabpanels>
        </tabbox>
      </vbox>
      <vbox id="boutons_standards">
END;
include("_graal_inc_boutons_01.php");
echo <<<END
      <button id="bt_manu_execute" label="$vl_c_aak_117" oncommand="pf_lance();" context="pp_actions"/>
      <button flex="1" label="$vl_c_aak_120" id="bt_droits" oncommand="pf_droits();" observes="broadcaster_01"/>
      </vbox>
      
      </hbox>
 </window>
END;
?>
