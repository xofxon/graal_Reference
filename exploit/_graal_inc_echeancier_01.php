<?php
_graal_requete_charge_varlib($vl_c_id_tab_echeancier,$vl_e_uti_cleunik);
$vl_c_brb_001=fa_recup_dico("brb_001");
$vl_c_brb_002=fa_recup_dico("brb_002");
$vl_c_brb_003=fa_recup_dico("brb_003");
$vl_c_brb_004=fa_recup_dico("brb_004");
$vl_c_brb_005=fa_recup_dico("brb_005");
$vl_c_brb_006=fa_recup_dico("brb_006");
$vl_c_brb_007=fa_recup_dico("brb_007");
$vl_c_brb_008=fa_recup_dico("brb_008");
$vl_c_brb_009=fa_recup_dico("brb_009");
$vl_c_brb_010=fa_recup_dico("brb_010");
$vl_c_brb_011=fa_recup_dico("brb_011");
$vl_c_brb_012=fa_recup_dico("brb_012");
$vl_c_brb_013=fa_recup_dico("brb_013");
$vl_c_brb_014=fa_recup_dico("brb_014");
$vl_c_brb_015=fa_recup_dico("brb_015");
$vl_c_brb_016=fa_recup_dico("brb_016");
$vl_c_brb_017=fa_recup_dico("brb_017");
$vl_c_brb_018=fa_recup_dico("brb_018");$vl_c_brb_018="Ajouter au panier";
$vl_c_dico00051=fa_recup_dico('dico_00051');
$vl_c_dico_00106=fa_recup_dico("dico_00106");
switch ("$vl_c_id_tab_echeancier"){
	case "Div_00551":
	case "Div_00552":
	case "Div_00553":
	case "Div_00554":
	case "Div_00555":
	case "Div_00556":
	case "Div_00557":
	case "Div_00558":
	case "Div_00559":
	case "Div_00563":
		$vl_c_menucontext_arbre_01='<menuitem class="menuitem-iconic" id="menu_02_03" label="'.$vl_c_brb_016.'" oncommand="pf_ouvre(\'echeance_solde\');"/>';
		$vl_c_menucontext_arbre_02='<menuitem class="menuitem-iconic" id="menu_02_04" label="'.$vl_c_brb_017.'" oncommand="pf_ouvre(\'echeance_modif\');"/>';
		break;
	case "Div_00561":
	case "Div_00562":
		$vl_c_menucontext_arbre_01='<menuitem class="menuitem-iconic" id="menu_02_03" label="'.$vl_c_brb_016.'" oncommand="pf_ouvre(\'echeance_solde\');"/>';
		$vl_c_menucontext_arbre_02="";
		break;
}
if ($vl_c_multiple=="oui"){
	$vl_c_menucontext_arbre_03='<menuitem class="menuitem-iconic" id="menu_02_05" label="'.$vl_c_brb_018.'" oncommand="pf_panier_ajoute();"/>';
}
$vl_c_context_00='<menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arbre_echeancier\');" />';
$vl_c_menucontext_arbre='<popupset><popup id="menu_contexte_echeancier">'.$vl_c_context_00;
$vl_c_menucontext_arbre.='<menuitem id="menu_02_02" label="'.$vl_c_brb_014.'" class="menuitem-iconic af08" oncommand="pf_ouvre(\'action\');" />';
$vl_c_menucontext_arbre.='<menuitem class="menuitem-iconic ai15" id="menu_02_02" label="'.$vl_c_brb_015.'" oncommand="pf_ouvre(\'acteur\');"/>';
$vl_c_menucontext_arbre.=$vl_c_menucontext_arbre_01;
$vl_c_menucontext_arbre.=$vl_c_menucontext_arbre_02;
$vl_c_menucontext_arbre.=$vl_c_menucontext_arbre_03;
$vl_c_menucontext_arbre.='<menuitem class="menuitem-iconic ak05" dir="reverse" id="menu_03_01" label="'.$vl_c_dico00051.'" oncommand="pf_ouvre(\'excel_01\');"/>';
$vl_c_menucontext_arbre.='</popup></popupset>';
echo <<<END
<vbox flex="1" class="overflow_01">
$vl_c_menucontext_arbre
  <tree id="arbre_echeancier" flex="10" hidecolumnpicker="false" flags="" ref="*" querytype="xml" datasources="" enableColumnDrag="true" context="menu_contexte_echeancier" seltype="single">
    <treecols>
      <treecol id="tc_echeance_cleunik"  hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_commercial_cleunik"  hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_pc_cleunik"  hidden="true" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_noligne" hidden="true" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_date_paiement" hidden="true" ignoreincolumnpicker="true" sort="?date_paiement"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_date_echeance" hidden="true" ignoreincolumnpicker="true" sort="?date_echeance"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_date_paiement_clair" label="$vl_c_brb_001" tooltiptext="$vl_c_brb_001" sort="?date_paiement"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_date_echeance_clair" label="$vl_c_brb_002" tooltiptext="$vl_c_brb_002" sort="?date_echeance"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_libelle" hidden="true" ignoreincolumnpicker="true" sort="?libelle"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_montant_du" label="$vl_c_brb_003" tooltiptext="$vl_c_brb_003" sort="?val_montant_du" class="droite"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_montant_paye" label="$vl_c_brb_004" tooltiptext="$vl_c_brb_004" sort="?val_montant_paye" class="droite"/><splitter class="tree-splitter" resizeafter="grow"/>
			<treecol id="tc_montant_regle_treso" label="$vl_c_brb_010" tooltiptext="$vl_c_brb_010" sort="?val_montant_regle_treso" class="droite"/><splitter class="tree-splitter" resizeafter="grow"/>
			<treecol id="tc_montant_restant" label="$vl_c_brb_011" tooltiptext="$vl_c_brb_011" sort="?val_montant_restant" class="droite"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_devise_du" label="$vl_c_brb_005" tooltiptext="$vl_c_brb_005" sort="?devise_du"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_devise_paye" label="$vl_c_brb_006" tooltiptext="$vl_c_brb_006" sort="?devise_paye"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_taux_de_change" hidden="true" ignoreincolumnpicker="true" sort="?taux_de_change"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_mode_paiement" label="$vl_c_brb_007" tooltiptext="$vl_c_brb_007" sort="?mode_paiement"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_blocnotebrut" label="$vl_c_brb_008" tooltiptext="$vl_c_brb_008" sort="?blocnotebrut"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_dateheurecreation" hidden="true" ignoreincolumnpicker="true" sort="?dateheurecreation"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_dateheuremodif" hidden="true" ignoreincolumnpicker="true" sort="?dateheuremodif"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_etat" label="$vl_c_brb_009" tooltiptext="$vl_c_brb_009" sort="?etat"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_val_montant_du" hidden="true" ignoreincolumnpicker="true" sort="?val_montant_du" class="droite"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_val_montant_paye" hidden="true" ignoreincolumnpicker="true" sort="?val_montant_paye" class="droite"/><splitter class="tree-splitter" resizeafter="grow"/>
			<treecol id="tc_code_document" label="$vl_c_brb_012" tooltiptext="$vl_c_brb_012" sort="?code_document"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_nomcommercial" label="$vl_c_brb_013" tooltiptext="$vl_c_brb_013" sort="?nomcommercial"/><splitter class="tree-splitter" resizeafter="grow"/>
			<treecol id="tc_val_montant_restant" hidden="true" ignoreincolumnpicker="true" sort="?val_montant_restant" class="droite"/><splitter class="tree-splitter" resizeafter="grow"/>
			<treecol id="tc_date_fact" hidden="true" ignoreincolumnpicker="true" sort="?date_fact"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_date_fact_clair" label="Date de facture" tooltiptext="Date de facture" sort="?date_fact"/><splitter class="tree-splitter" resizeafter="grow"/>
			<treecol id="tc_properties_document" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
			<treecol id="tc_action_cleunik" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
			<treecol id="tc_act_cleunik" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
			<treecol id="tc_val_montant_regle_treso" hidden="true" ignoreincolumnpicker="true" sort="?val_montant_regle_treso" class="droite"/><splitter class="tree-splitter" resizeafter="grow"/>
		<treecol id="tc_fichier_echeance" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
     <template><query expr="*"/><action>
      <treechildren>
        <treeitem uri="?" seltype="single">
          <treerow>
            <treecell label="?echeance_cleunik"/>
            <treecell label="?commercial_cleunik"/>
            <treecell label="?pc_cleunik"/>
            <treecell label="?noligne"/>
            <treecell label="?date_paiement"/>
            <treecell label="?date_echeance"/>
			<treecell label="?date_paiement_clair"/>
            <treecell label="?date_echeance_clair"/>						
            <treecell label="?libelle"/>
            <treecell label="?montant_du"/>
            <treecell label="?montant_paye"/>
			<treecell properties="?properties_paye" label="?montant_regle_treso"/>	
            <treecell properties="?properties_restant" label="?montant_restant"/>
            <treecell label="?devise_du"/>
            <treecell label="?devise_paye"/>
            <treecell label="?taux_de_change"/>
            <treecell properties="?prop_type" label="?mode_paiement"/>
            <treecell label="?blocnotebrut"/>
            <treecell label="?dateheurecreation"/>
            <treecell label="?dateheuremodif"/>
            <treecell label="?etat"/>
            <treecell label="?val_montant_du"/>
            <treecell label="?val_montant_paye"/>
			<treecell properties="?properties_document" label="?code_document"/>
            <treecell properties="?properties_acteur" label="?nomcommercial"/>
			<treecell label="?val_montant_restant"/>
			<treecell label="?date_fact"/>
            <treecell label="?date_fact_clair"/>
			<treecell label="?properties_document"/>
			<treecell label="?action_cleunik"/>
			<treecell label="?act_cleunik"/>	
			<treecell label="?val_montant_regle_treso"/>
			<treecell label="?fichier_echeance"/>			
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
</vbox>
END;
?>