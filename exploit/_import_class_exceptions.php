<?php
$_graal_message_erreur="";
function myErrorHandler($errno, $errstr, $errfile, $errline,&$_graal_message_erreur)
{
    switch ($errno) {
    case E_USER_ERROR:
        $_graal_message_erreur="<b>Mon ERREUR</b> [$errno] $errstr\n";
        $_graal_message_erreur.="  Erreur fatale sur la ligne $errline dans le fichier $errfile";
        $_graal_message_erreur.=", PHP " . PHP_VERSION . " (" . PHP_OS . ")<br />\n";
        $_graal_message_erreur.="Arrêt...<br />\n";
        exit(1);
        break;

    case E_USER_WARNING:
        $_graal_message_erreur="<b>Mon ALERTE</b> [$errno] $errstr\n";
        break;

    case E_USER_NOTICE:
        $_graal_message_erreur="<b>Mon AVERTISSEMENT</b> [$errno] $errstr\n";
        break;

    default:
        $_graal_message_erreur="Type d'erreur inconnu : [$errno] $errstr\n";
        break;
    }

    /* Ne pas exécuter le gestionnaire interne de PHP */
    return true;
}
$old_error_handler = set_error_handler("myErrorHandler");
?>
