<?php
function fa_brik_menulist_categorie_compta($vv_flex="1",$vv_id="ml_categorie_compta",$vv_observer="broadcaster_01",$vv_except=""){
  //$sql_req = "SELECT catcompta_cleunik,intitule,code FROM _param_categories_compta where catcompta_cleunik not in(-1)";
  $sql_req = "SELECT catcompta_cleunik,intitule,code FROM _param_categories_compta where 1=1";
  if ($vv_except!='') {$sql_req.=" and catcompta_cleunik not in($vv_except)";}
  $sql_req.=" order by code;";
  $sql_result = _graal_requete_bd($sql_req);
  $vl_e_nombre=mysql_num_rows($sql_result);
  $classe="normal";
  if (trim($vv_observer)!="") {
    $vv_brik="<menulist sizetopopup='none' crop='end' onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' class='sans_icone' flex='$vv_flex' id='$vv_id' _graal_nombre='$vl_e_nombre' observes='$vv_observer'><menupopup>";
  } else {
    $vv_brik="<menulist sizetopopup='none' crop='end' onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' class='sans_icone' flex='$vv_flex' id='$vv_id' _graal_nombre='$vl_e_nombre'><menupopup>";
  }
  
  if ($vl_e_nombre == 0){
    $vv_brik.="<menuitem value='Aucun Régime fiscal !!!' _graal_cleunik='-2' label='Aucun régime fiscal !!!' selected='true'/>";
  } else {
    while ($row = mysql_fetch_assoc($sql_result)){
      $classe="";
      $intitule=fa_remplace_quotes(fa_ent_xml($row['intitule']));
      $vv_brik.="<menuitem class='.$classe.' value='" .$intitule. "' _graal_cleunik='".$row['catcompta_cleunik']."' label='".$intitule."' tooltiptext='".$intitule."' selected='true'/>";
    }
  }
  $vv_brik.="</menupopup></menulist>";
  _graal_libere_requete_bd($sql_result);
  return $vv_brik; 
}
function fa_brik_menulist_tpf($vv_flex="1",$vv_id="ml_categorie_compta",$vv_observer="broadcaster_01",$vv_except=""){
  //$sql_req = "SELECT catcompta_cleunik,intitule,code FROM _param_categories_compta where catcompta_cleunik not in(-1)";
  $sql_req = "SELECT tpf_cleunik,denomination,code FROM _param_tpf where 1=1";
  if ($vv_except!='') {$sql_req.=" and tpf_cleunik not in($vv_except)";}
  $sql_req.=" order by code;";
  $sql_result = _graal_requete_bd($sql_req);
  $vl_e_nombre=mysql_num_rows($sql_result);
  $classe="normal";
  if (trim($vv_observer)!="") {
    $vv_brik="<menulist sizetopopup='none' crop='end' onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' class='sans_icone' flex='$vv_flex' id='$vv_id' _graal_nombre='$vl_e_nombre' observes='$vv_observer'><menupopup>";
  } else {
    $vv_brik="<menulist sizetopopup='none' crop='end' onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' class='sans_icone' flex='$vv_flex' id='$vv_id' _graal_nombre='$vl_e_nombre'><menupopup>";
  }
  
  if ($vl_e_nombre == 0){
    $vv_brik.="<menuitem value='Aucun Régime fiscal !!!' _graal_cleunik='-2' label='Aucune tpf !!!' selected='true'/>";
  } else {
    while ($row = mysql_fetch_assoc($sql_result)){
      $classe="";
      $intitule=fa_remplace_quotes(fa_ent_xml($row['denomination']."(".$row['code'].")"));
      $vv_brik.="<menuitem class='.$classe.' value='" .$intitule. "' _graal_cleunik='".$row['tpf_cleunik']."' label='".$intitule."' tooltiptext='".$intitule."' selected='true'/>";
    }
  }
  $vv_brik.="</menupopup></menulist>";
  _graal_libere_requete_bd($sql_result);
  return $vv_brik; 
}
function fa_brik_menulist_tva($vv_flex="1",$vv_id="ml_categorie_compta",$vv_observer="broadcaster_01",$vv_except=""){
  $sql_req = "SELECT taxes_cleunik,denomination,code FROM _param_taxes where 1=1";
  if ($vv_except!='') {$sql_req.=" and taxes_cleunik not in($vv_except)";}
  $sql_req.=" order by code;";
  $sql_result = _graal_requete_bd($sql_req);
  $vl_e_nombre=mysql_num_rows($sql_result);
  $classe="normal";
  if (trim($vv_observer)!="") {
    $vv_brik="<menulist sizetopopup='none' crop='end' onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' class='sans_icone' flex='$vv_flex' id='$vv_id' _graal_nombre='$vl_e_nombre' observes='$vv_observer'><menupopup>";
  } else {
    $vv_brik="<menulist sizetopopup='none' crop='end' onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' class='sans_icone' flex='$vv_flex' id='$vv_id' _graal_nombre='$vl_e_nombre'><menupopup>";
  }
  
  if ($vl_e_nombre == 0){
    $vv_brik.="<menuitem value='Aucun Régime fiscal !!!' _graal_cleunik='-2' label='Aucune taxe !!!' selected='true'/>";
  } else {
    while ($row = mysql_fetch_assoc($sql_result)){
      $classe="";
      $intitule=fa_remplace_quotes(fa_ent_xml($row['denomination']."(".$row['code'].")"));
      $vv_brik.="<menuitem class='.$classe.' value='" .$intitule. "' _graal_cleunik='".$row['taxes_cleunik']."' label='".$intitule."' tooltiptext='".$intitule."' selected='true'/>";
    }
  }
  $vv_brik.="</menupopup></menulist>";
  _graal_libere_requete_bd($sql_result);
  return $vv_brik; 
}
?>
