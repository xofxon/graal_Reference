<?php 
include("_graal_header_txt.inc.php");
$t_origines_ok=array();
$t_origines_ok[0]="_graal_fen_objets_autres_01";
$t_origines_ok[1]="_graal_fen_objets_dictionnaire_01";
$t_origines_ok[2]="_graal_fen_objets_fenetres_01";
$t_origines_ok[3]="_graal_fen_regles_application_01";
$t_origines_ok[4]="_graal_fen_objets_traitements_01";
fa_acces_script();
$vf_c_action=fa_recup_param('vf_c_action','??????');
$vl_e_fen_cleunik=intval(fa_recup_param('vl_e_fen_cleunik','0'));
$vl_c_titre=fa_recup_param('vl_c_titre','');
$vl_c_descriptif=fa_recup_param('vl_c_descriptif','');
$vl_c_source=fa_recup_param('vl_c_source','');
$vl_e_acces=intval(fa_recup_param('vl_e_acces','0'));
$vl_e_ajout=intval(fa_recup_param('vl_e_ajout','0'));
$vl_e_modif=intval(fa_recup_param('vl_e_modif','0'));
$vl_e_suppr=intval(fa_recup_param('vl_e_suppr','0'));
$vl_e_type=intval(fa_recup_param('vl_e_type','1'));
$vl_e_langue=120131;  // français par défaut
$vl_e_uti_cleunik=0;  
$vl_c_prefixe=fa_recup_param('vl_c_prefixe','');
$vf_c_echo='';
switch (TRUE) 
{
  case $vf_c_action=='supprimer': 
    $sql_req = "DELETE FROM _objets WHERE _objets.fen_cleunik = $vl_e_fen_cleunik";
    $vf_c_echo=_graal_exec_requete($sql_req);
    break;
  case $vf_c_action=='ajouter':
    $vl_e_fen_cleunik=_graal_requete_max("fen_cleunik","_objets");
    $sql_req = "INSERT INTO _objets set fen_cleunik=$vl_e_fen_cleunik,titre='$vl_c_titre',source_principal='$vl_c_source',fen_acces=$vl_e_acces,fen_ajout=$vl_e_ajout,fen_modif=$vl_e_modif,fen_suppr=$vl_e_suppr,type_objet=$vl_e_type,prefixe='$vl_c_prefixe'";
    $vf_c_echo=_graal_exec_requete($sql_req);
    $sql_req = "INSERT INTO _objets_libelle set fen_cleunik=$vl_e_fen_cleunik,descriptif='$vl_c_descriptif',langue=$vl_e_langue,uti_cleunik=$vl_e_uti_cleunik";
    $vf_c_echo=_graal_exec_requete($sql_req);
    break;
  case $vf_c_action=='modifier':
    $sql_req = "update _objets set titre='$vl_c_titre',source_principal='$vl_c_source',fen_acces=$vl_e_acces,fen_ajout=$vl_e_ajout,fen_modif=$vl_e_modif,fen_suppr=$vl_e_suppr,prefixe='$vl_c_prefixe' WHERE _objets.fen_cleunik = $vl_e_fen_cleunik";
    $vf_c_echo=_graal_exec_requete($sql_req);
    $sql_req = "REPLACE INTO _objets_libelle set fen_cleunik=$vl_e_fen_cleunik,descriptif='$vl_c_descriptif',langue=$vl_e_langue,uti_cleunik=$vl_e_uti_cleunik";
    $vf_c_echo=_graal_exec_requete($sql_req);
    break;
  case $vf_c_action=='??????':
    exit;
    break;    
} 
_graal_ferme_connexion();
echo $vf_c_echo;       
?>
