<?php
include("_graal_header_xml.inc.php");
define('EOL', "\r\n");
$vl_c_lesquelles=fa_recup_param('vf_c_lesquelles','toutes');
$vf_c_selection_genres=fa_recup_param('vf_c_selection_genres','0');
$sql_req = "SELECT _actions.idactions as idaction,_actions.action_cleunik as action_cleunik,_actions.choix_cleunik as choix_cleunik,_actions.dateheuredebut as dateheuredebut,_actions.dateheurefin as dateheurefin,_actions.dateheurecreation as dateheurecreation,_actions.dateheuremodif as dateheuremodif,_actions.blocnote_brut as blocnote_brut,_actions.blocnote_riche as blocnote_riche,_actions.position as position,_actions.description as description,_actions.hash as hash,_choix.choix_valeur_texte_01 as choix_valeur_texte_01 from _actions,_choix where _choix.choix_cleunik=_actions.choix_cleunik";
switch (TRUE)
{
  case $vl_c_lesquelles=='toutes':
    break;
  case $vl_c_lesquelles=='selgenre':
    $sql_req.=" and _actions.choix_cleunik in($vf_c_selection_genres)";
    break;
}
$sql_req.=" ORDER BY `dateheuredebut` DESC LIMIT 0, 100";
$result = _graal_requete_bd($sql_req);
echo(fa_xcree_entete_rdf());
  while ($row = mysql_fetch_assoc($result))
    {
      echo('<RDF:li>'.EOL);
      echo('<RDF:Description>');
      // parseType = indication pour le type des donn√©es, utile pour le tri sur la colonne
      echo('<row:idaction NC:parseType="Integer">'.fa_ent_xml($row['idaction']).'</row:idaction>');
      echo('<row:action_cleunik NC:parseType="Integer">'.fa_ent_xml($row['action_cleunik']).'</row:action_cleunik>');
      echo('<row:choix_cleunik NC:parseType="Integer">'.fa_ent_xml($row['choix_cleunik']).'</row:choix_cleunik>');
      echo('<row:dateheuredebut>'.fa_ent_xml($row['dateheuredebut']).'</row:dateheuredebut>');
      echo('<row:dateheurefin>'.fa_ent_xml($row['dateheurefin']).'</row:dateheurefin>');
      echo('<row:dateheurecreation>'.fa_ent_xml($row['dateheurecreation']).'</row:dateheurecreation>');
      echo('<row:dateheuremodif>'.fa_ent_xml($row['dateheuremodif']).'</row:dateheuremodif>');
      echo('<row:blocnote_brut>'.fa_ent_xml($row['blocnote_brut']).'</row:blocnote_brut>');
      echo('<row:blocnote_riche>'.fa_ent_xml($row['blocnote_riche']).'</row:blocnote_riche>');
      echo('<row:position>'.fa_ent_xml($row['position']).'</row:position>');
      echo('<row:description>'.fa_ent_xml($row['description']).'</row:description>');
      echo('<row:hash>'.fa_ent_xml($row['hash']).'</row:hash>');
      echo('<row:choix_valeur_texte_01>'.fa_ent_xml($row['choix_valeur_texte_01']).'</row:choix_valeur_texte_01>');
      echo('</RDF:Description>'.EOL);
      echo('</RDF:li>'.EOL);
    }
echo('</RDF:Bag>'.EOL);
echo('</RDF:RDF>'.EOL);
_graal_libere_requete_bd($result);
_graal_ferme_connexion();
?>
