<?php
include("_graal_header_xul.inc.php");
$vl_e_uti_cleunik =intval(fa_recup_session("vs_uti_cleunik","0"));
$vl_c_genreacteur=fa_recup_param('genreacteur','0');
$vl_e_act_cleunik_gauche=intval(fa_recup_param("vl_e_act_cleunik_gauche","-1"));
switch ($vl_c_genreacteur){
  case "110001": $vl_c_id_fenetre="Fen_00465";$vl_e_choix_portee="02";$vl_c_id_inc_acteurs_representants="Div_00437";break;  //  Représentants des prospects clients
  case "110002": $vl_c_id_fenetre="Fen_00466";$vl_e_choix_portee="08";$vl_c_id_inc_acteurs_representants="Div_00438";break;  //  Représentants des prospects fournisseurs
  case "110003": $vl_c_id_fenetre="Fen_00467";$vl_e_choix_portee="04";$vl_c_id_inc_acteurs_representants="Div_00439";break;  //  Représentants des clients
  case "110004": $vl_c_id_fenetre="Fen_00468";$vl_e_choix_portee="16";$vl_c_id_inc_acteurs_representants="Div_00440";break;  //  Représentants des fournisseurs
  case "110005": $vl_c_id_fenetre="Fen_00469";$vl_e_choix_portee="32";$vl_c_id_inc_acteurs_representants="Div_00441";break;  //  Représentants des autres acteurs
  case "110006": $vl_c_id_fenetre="Fen_00470";$vl_e_choix_portee="64";$vl_c_id_inc_acteurs_representants="Div_00442";break;  //  Représentants des acteurs indéterminés
  default:
    fa_redirige("acces_interdit");  
}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_b_acces=$vl_tb_droits[0];if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_bfh_100=fa_recup_dico("bfh_100");
$vl_c_bfh_101=fa_recup_dico("bfh_101");
$vl_c_bfh_102=fa_recup_dico("bfh_102");
$vl_c_bfh_103=fa_recup_dico("bfh_103");
$vl_c_bfh_104=fa_recup_dico("bfh_104");
$vl_c_bfh_105=fa_recup_dico("bfh_105");
$vl_c_bfh_106=fa_recup_dico("bfh_106");

$vl_c_bfh_107=fa_recup_dico("bfh_107");
$vl_c_bfh_108=fa_recup_dico("bfh_108");
$vl_c_bfh_109=fa_recup_dico("bfh_109");
$vl_c_dico_00002=fa_recup_dico('dico_00002');
$vl_c_dico_00004=fa_recup_dico('dico_00004');
$vl_c_dico_00007=fa_recup_dico('dico_00007');
$vl_c_dico_00010=fa_recup_dico('dico_00010');
$vl_c_dico_00013=fa_recup_dico("dico_00013");
$vl_c_dico_00014=fa_recup_dico("dico_00014");
//  On recherche les informations sur l'acteur 
if ($vl_e_act_cleunik_gauche!=-1){$vl_c_qui=_graal_requete_acteur($vl_e_act_cleunik_gauche);}
if ($vl_e_nombre_valeurs_genres==0){$vl_tb_droits[1]=0;$vl_tb_droits[2]=0;$vl_tb_droits[3]=0;}
$vl_c_id_inc_acteurs_recherche="Div_00443";
$vl_c_inactif_acteurs_recherche='true';
$vl_c_qui_acteurs_recherche='11';
$ml_rel_gauche=fa_brik_menulist_choix('xxx',1,-1,-1,'-28','ml_rel_gauche',"broadcaster_01",0);
$ml_rel_droite=fa_brik_menulist_choix('xxx',1,-1,-1,'-27','ml_rel_droite',"broadcaster_01",0);
include("_graal_header_winxul.inc.php"); 
echo <<<END
<window context="graal_cp00" title="$vl_c_bfh_100" id="_win_fen_act_representants" onload="fa_aa(this);pf_aa_init();" $c_xmlns>
$vl_c_graal_cp00
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_act_representant_01.js.php");
include("_graal_inc_acteurs_recherche_01.php");
echo <<<END
  <splitter/>
  <groupbox >
  <textbox id="tb_qui_gauche" value="$vl_c_qui" disabled="true" />
  <hbox>
  <label control="la_prefixe_choix_cleunik" value="$vl_c_bfh_101"/>
  $ml_rel_gauche
  <label control="la_prefixe_choix_cleunik" value="$vl_c_bfh_101"/>
  $ml_rel_droite
  </hbox>
  <textbox id="tb_qui_droite" value="" _graal_act_cleunik="0" disabled="true" />
  <hbox>
        <label control="la_blocnotebrut" value="$vl_c_bfh_102"/>
        <textbox flex="1" id="tb_blocnotebrut"   multiline="true"/>
  </hbox>
  <hbox>
    <vbox flex="1">
      <label flex="1"/>
      <menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" flex="2" id="ml_commission_typ" _graal_nombre="3">
        <menupopup>
          <menuitem value="1" label="$vl_c_bfh_104"/>
          <menuitem value="2" label="$vl_c_bfh_105"/>
          <menuitem value="3" label="$vl_c_bfh_106"/>
        </menupopup>
      </menulist>
    </vbox>
    <vbox>
        <label control="la_taux" value="$vl_c_bfh_104"/>
        <textbox flex="1" id="tb_taux" type="number" hidespinbuttons="true" decimalplaces="2"   />
    </vbox>
    <vbox>

        <label control="la_montant" value="$vl_c_bfh_105"/>
        <textbox flex="1" id="tb_montant" type="number" hidespinbuttons="true" decimalplaces="2"   />
    </vbox>
      <vbox flex="2">
      <label value="$vl_c_bfh_107"/>
      <menulist sizetopopup="none" onfocus="setTimeout(fa_focus_gere_menulist, 0, this);" observes="broadcaster_01" flex="2" id="ml_commission_regle" _graal_nombre="2">
        <menupopup>
          <menuitem value="1" label="$vl_c_bfh_108"/>
          <menuitem value="2" label="$vl_c_bfh_109"/>
        </menupopup>
      </menulist>
    </vbox>    

  </hbox>
  <hbox> 
    <button width="40" flex="1" id="bt_ajouter" label="$vl_c_dico_00002" crop="end" dir="normal" oncommand="pf_validation('enregistrer')" />
    <button width="40" flex="1" id="bt_sortir" label="$vl_c_dico_00007" crop="end" dir="normal" oncommand="pf_etat_fen('sortir')" />
  </hbox>
  </groupbox>
<splitter/>
END;
$vl_c_barre_presente_acteurs_representants="pasok";
include("_graal_inc_acteurs_representants_01.php");
echo <<<END
<button width="40" id="bt_supprimer" label="$vl_c_dico_00004" crop="end" dir="normal" oncommand="pf_validation('supprimer')" />
</window>
END;
?>
