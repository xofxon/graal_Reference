<?php
_graal_requete_charge_varlib($vl_c_id_inc_acteurs_facturation_fournisseur,$vl_e_uti_cleunik);
$vl_c_bde_001=fa_recup_dico("bde_001");
$vl_c_bde_002=fa_recup_dico("bde_002");
$vl_c_bde_003=fa_recup_dico("bde_003");
$vl_c_bde_004=fa_recup_dico("bde_004");
$vl_c_bde_005=fa_recup_dico("bde_005");
$vl_c_bde_006=fa_recup_dico("bde_006");
$vl_c_bde_007=fa_recup_dico("bde_007");
$vl_c_bde_008=fa_recup_dico("bde_008");
$vl_c_bde_009=fa_recup_dico("bde_009");
$vl_c_bde_010=fa_recup_dico("bde_010");
$vl_c_bde_011=fa_recup_dico("bde_011");
$vl_c_bde_012=fa_recup_dico("bde_012");
$vl_c_bde_013=fa_recup_dico("bde_013");
$vl_c_bde_014=fa_recup_dico("bde_014");
$vl_c_bde_015=fa_recup_dico("bde_015");
$vl_c_bde_016=fa_recup_dico("bde_016");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_context_00='<popupset><popup id="pop_arbre_rib_fou"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arbre_rib_fou\');" /></popup><popup id="pop_arbre_iban_fou"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arbre_iban_fou\');" /></popup></popupset>';
switch ($vl_c_id_inc_acteurs_facturation_fournisseur){
  case "Div_00316": $vl_c_id_fen_rib="Fen_00353";$vl_c_id_fen_iban="Fen_00355";break;
}
echo <<<END
$vl_c_context_00
<vbox flex="3" id="bde_acteurs_facturation_fournis_01">
<vbox flex="1">
<hbox flex="1">
  <vbox flex="1">    
      <toolbar grippyhidden="true">
  		  <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_bde_006" oncommand="pf_affiche_donnees_rib_fou();"/>
        <toolbarseparator />
        <hbox id="bloc_rib_fou">
          <label value="$vl_c_bde_007"/>

END;
if ($vl_c_id_fen_rib=="000000000") {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_rib,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
if ($vl_tb_droits[1]!=0){
echo <<<END
          <toolbarbutton class="ajouter" observes="broadcaster_01" tooltiptext="$vl_c_bde_008" oncommand="pf_ouvre('rib_fou','nouveau');"/>
END;
}
echo <<<END
          <toolbarbutton class="modifier" observes="broadcaster_01" tooltiptext="$vl_c_bde_009" oncommand="pf_ouvre('rib_fou','ouvrir');" />
END;
}
echo <<<END
        </hbox>
        <toolbarseparator />
      </toolbar>    
  <tree id="arbre_rib_fou" flex="1" hidecolumnpicker="true" flags="" ref="*" querytype="xml" datasources="" onselect="pf_sel_arbre_rib_fou(this.id);" seltype="single" enableColumnDrag="true" context="pop_arbre_rib_fou">
    <treecols>
      <treecol id="tc_rib_cleunik_fou" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_domiciliation_fou" label="$vl_c_bde_001" sort="?domiciliation"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_etablissement_fou" label="$vl_c_bde_002" sort="?etablissement" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_guichet_fou" label="$vl_c_bde_003" sort="?guichet" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_compte_fou" label="$vl_c_bde_004" sort="?compte" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_cle_fou" label="$vl_c_bde_005" sort="?cle" /><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
    <template><query expr="*"/><action>
      <treechildren>
        <treeitem uri="?" seltype="single">
          <treerow>
            <treecell label="?rib_cleunik"/>
            <treecell label="?domiciliation"/>
            <treecell label="?etablissement"/>
            <treecell label="?guichet"/>
            <treecell label="?compte"/>
            <treecell label="?cle"/>
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
</vbox>
<splitter/>

  <vbox flex="1">    
      <toolbar grippyhidden="true">
  		  <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_bde_010" oncommand="pf_affiche_donnees_iban_fou();"/>
        <toolbarseparator />
        <hbox id="bloc_iban_fou" flex="1">
          <label value="$vl_c_bde_011"/>

END;
if ($vl_c_id_fen_iban=="000000000") {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_iban,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
if ($vl_tb_droits[1]!=0){
echo <<<END
          <menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' flex="2" id="ml_iban" _graal_nombre="1"><menupopup>
            <menuitem value="1" label="France" />
          </menupopup></menulist>
          <toolbarbutton class="ajouter" observes="broadcaster_01" tooltiptext="$vl_c_bde_012" oncommand="pf_ouvre('iban_cli','nouveau');"/>
          <toolbarseparator />  
END;
}
echo <<<END
          <toolbarbutton class="modifier" observes="broadcaster_01" tooltiptext="$vl_c_bde_013" oncommand="pf_ouvre('iban_cli','ouvrir');" />
END;
}
echo <<<END
        </hbox>
        <toolbarseparator />
      </toolbar>    
  <tree id="arbre_iban_fou" flex="1" hidecolumnpicker="true" flags="" ref="*" querytype="xml" datasources="" onselect="pf_sel_arbre_iban_fou(this.id);" seltype="single" enableColumnDrag="true" context="pop_arbre_iban_fou">
    <treecols>
      <treecol id="tc_iban_cleunik_fou" flex="1" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_iban_info_fou" label="$vl_c_bde_014" sort="?iban_info" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_iban_papi_fou" label="$vl_c_bde_015" sort="?iban_papi" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_iban_bic_fou" label="$vl_c_bdd_016" sort="?iban_bic" /><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
    <template><query expr="*"/><action>
      <treechildren>
        <treeitem uri="?" seltype="single">
          <treerow>
            <treecell label="?iban_cleunik"/>
            <treecell label="?iban_info"/>
            <treecell label="?iban_papi"/>
            <treecell label="?iban_bic"/>
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
</vbox>
</hbox>
</vbox>
</vbox>
END;
?>
