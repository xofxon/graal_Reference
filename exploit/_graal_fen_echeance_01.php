<?php
include("_graal_header_xul.inc.php");
$vl_e_uti_cleunik =intval(fa_recup_session("vs_uti_cleunik","0"));
$vl_c_genre=fa_recup_param('genre','???');
$vl_c_type=fa_recup_param('type','1');
$vl_e_echeance_cleunik=fa_recup_param('echeance_cleunik','-1');
$vl_c_fichier_echeance=fa_recup_param('fichier_echeance','_faccli_echeancier');
switch ($vl_c_type){
	case 'cli':	//Echéancier client
		switch ($vl_c_genre){
		  case "solde": $vl_c_id_fenetre="Fen_00955";break;  //  Solde échéance
		  case "modif": $vl_c_id_fenetre="Fen_00957";break;  //  Modification échéance
		  default:fa_redirige("acces_interdit");break;
		}
		break;
	case 'fou':	//Echéancier fournisseur
		switch ($vl_c_genre){
		  case "solde": $vl_c_id_fenetre="Fen_00956";break;  //  Solde échéance
		  case "modif": $vl_c_id_fenetre="Fen_00958";break;  //  Modification échéance
		  default:fa_redirige("acces_interdit");break;
		}
		break;
	default:fa_redirige("acces_interdit");break;
}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_b_acces=$vl_tb_droits[0];
$vl_b_ajout=0;
$vl_b_modif=$vl_tb_droits[2];
$vl_b_suppr=0;
$vl_b_impri=0;
if ($vl_b_acces==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);
$vl_c_brf_100=fa_recup_dico("brf_100");
$vl_c_brf_101=fa_recup_dico("brf_101");
$vl_c_brf_102=fa_recup_dico("brf_102");
$vl_c_brf_103=fa_recup_dico("brf_103");
$vl_c_brf_104=fa_recup_dico("brf_104");
$vl_c_brf_105=fa_recup_dico("brf_105");
$vl_c_brf_106=fa_recup_dico("brf_106");
$vl_c_brf_107=fa_recup_dico("brf_107");
$vl_c_brf_108=fa_recup_dico("brf_108");
include("_graal_header_winxul.inc.php");
echo <<<END
<window context="graal_cp00" title="$vl_c_brf_100" id="_win_fen_echeance" onload="fa_aa(this);pf_aa_init();" onunload="pf_onunload();" flex="1" $c_xmlns>
<broadcasterset><broadcaster id="broadcaster_01" /></broadcasterset>
$vl_c_graal_cp00
END;
include_once("js/_graal_01.js.php");
include("js/_graal_echeance_01.js.php");
echo <<<END
<hbox flex="1" class="overflow_01">
<vbox flex="1">
	<vbox>
    <hbox>
			<label control="la_nodoc" value="$vl_c_brf_101"/>
	  	<textbox id="tb_nodoc"   observes="broadcaster_01"/>
			<label control="la_nom_acteur" value="$vl_c_brf_102"/>
    	<textbox id="tb_nom_acteur" observes="broadcaster_01" flex="1"/>
		</hbox>
	</vbox>
  <vbox>
    <hbox>
			<label control="la_date_paiement" value="$vl_c_brf_103"/>
	  	<textbox id="tb_date_paiement"   observes="broadcaster_01"/>
			<label control="la_date_echeance" value="$vl_c_brf_104"/>
    	<textbox id="tb_date_echeance"   observes="broadcaster_01" flex="1"/>
		</hbox>
	</vbox>
  <vbox>
    <label control="la_libelle" value="$vl_c_brf_105"/>
    <textbox id="tb_libelle"   observes="broadcaster_01"/>
  </vbox>
  <vbox>
    <hbox>
			<label control="la_montant_du" value="$vl_c_brf_106"/>
  	  <textbox id="tb_montant_du" observes="broadcaster_01" type="number" decimalplaces="2" hidespinbuttons="true" />
			<label control="la_montant_paye" value="$vl_c_brf_107"/>
    	<textbox id="tb_montant_paye"   observes="broadcaster_01" flex="1" type="number" decimalplaces="2" hidespinbuttons="true" />
		</hbox>
	</vbox>
  <vbox flex="1">
    <label control="la_blocnotebrut" value="$vl_c_brf_108"/>
    <textbox id="tb_blocnotebrut" observes="broadcaster_01" multiline="true" rows="5" flex="1"/>
  </vbox>
</vbox>

<vbox id="boutons_standards">
END;
include("_graal_inc_boutons_01.php");
echo <<<END
    </vbox>
</hbox>
</window>
END;
?>
