<?php
_graal_requete_charge_varlib($vl_c_id_inc_reqperso_01,$vl_e_uti_cleunik);
$vl_c_baf_001=fa_recup_dico("baf_001");
$vl_c_baf_002=fa_recup_dico("baf_002");
$vl_c_baf_003=fa_recup_dico("baf_003");
$vl_c_baf_004=fa_recup_dico("baf_004");
$vl_c_baf_005=fa_recup_dico("baf_005");
$vl_c_baf_006=fa_recup_dico("baf_006");
$vl_c_baf_007=fa_recup_dico("baf_007");
$vl_c_baf_008=fa_recup_dico("baf_008");
$vl_c_baf_009=fa_recup_dico("baf_009");
switch ($vl_c_id_inc_reqperso_01){
  case "Div_00027":$vl_b_hidden_01="true";$vl_b_hidden_02="true";break;  // Mes requêtes personnelles
  case "Div_00028":$vl_b_hidden_01="false";$vl_b_hidden_02="false";break;  // Nos requêtes personnelles
  case "Div_00029":$vl_b_hidden_01="false";$vl_b_hidden_02="false";break;  // Leurs requêtes personnelles
  case "Div_00484":$vl_b_hidden_01="true";$vl_b_hidden_02="true";break;  // Requêtes standard
}  
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_context_00='<popupset><popup id="pop_arbre_des_requetes"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arbre_des_requetes\');" /></popup></popupset>';
echo <<<END
$vl_c_context_00
  <vbox id="aak_req_perso_01" flex="4">
   <tree id="arbre_des_requetes" enableColumnDrag="true" flex="1" flags="" ref="*" querytype="xml" datasources="" onselect="pf_sel_ligne(this.id);" context="pop_arbre_des_requetes">
     <treecols>
       <treecol id="panier_cleunik" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
       <treecol id="uti_cleunik" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="titre" label="$vl_c_baf_004" sort="?panier_titre"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="dateheurecreation" label="$vl_c_baf_005" sort="?dateheurecreation"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol hidden="$vl_b_hidden_01" ignoreincolumnpicker="$vl_b_hidden_02" id="prenom" label="$vl_c_baf_008" flex="1" sort="?prenom"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol hidden="$vl_b_hidden_02" ignoreincolumnpicker="$vl_b_hidden_02" id="patronyme" label="$vl_c_baf_009" flex="1" sort="?patronyme"/><splitter class="tree-splitter" resizeafter="grow"/>
     </treecols>
     <template><query expr="*"/><action>
       <treechildren>
         <treeitem uri="?">
           <treerow>
             <treecell label="?panier_cleunik" properties="?prop_actif"/>
             <treecell label="?uti_cleunik" properties="?prop_actif"/>
             <treecell label="?panier_titre" properties="?prop ?prop_actif"/>
             <treecell label="?dateheurecreation" properties="?prop_actif"/>
             <treecell label="?prenom" properties="?prop_actif"/>
             <treecell label="?patronyme" properties="?prop_actif"/>
           </treerow>
         </treeitem>
       </treechildren>
     </action></template>
   </tree>
  </vbox>
END;
?>
