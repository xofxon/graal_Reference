<?php
$vl_c_xml=simplexml_load_string(fa_recup_session("vs_param_environ",""));
if (isset($vl_c_xml->selection_fax)){$selection_fax=$vl_c_xml->selection_fax->attributes();}else{$selection_fax='1';}
$vl_c_selqui_01="false";
$vl_c_selqui_02="false";
$vl_c_selqui_03="false";
$vl_c_selqui_04="false";
$vl_c_selqui_05="false";
$vl_c_selqui_06="false";
$vl_c_selqui_07="false";
$vl_c_selqui_08="false";
$vl_c_selqui_09="false";
$vl_c_inactif="true";
switch ($vl_c_id_inc_inc_rech_fax){
  case "Div_00279";$vl_c_selqui_09="true";$vl_c_inactif="false";break;  //Recherche de tous les courriels
  case "Div_00280";$vl_c_selqui_02="true";break; //  Entreprise
  case "Div_00281";$vl_c_selqui_03="true";break; //  Prospects Clients
  case "Div_00282";$vl_c_selqui_05="true";break; //  Prospects Fournisseurs
  case "Div_00283";$vl_c_selqui_04="true";break; //  Clients
  case "Div_00284";$vl_c_selqui_06="true";break; //  Fournisseurs
  case "Div_00285";$vl_c_selqui_07="true";break; //  Autres
  case "Div_00286";$vl_c_selqui_08="true";break; //  Indéterminés
}
_graal_requete_charge_varlib($vl_c_id_inc_inc_rech_fax,$vl_e_uti_cleunik);
$vl_c_dico_00018=fa_recup_dico("dico_00018");
$vl_c_dico_00019=fa_recup_dico("dico_00019");
$vl_c_dico_00020=fa_recup_dico("dico_00020");
$vl_c_dico_00021=fa_recup_dico("dico_00021");
$vl_c_dico_00022=fa_recup_dico("dico_00022");
$vl_c_dico_00023=fa_recup_dico("dico_00023");
$vl_c_dico_00024=fa_recup_dico("dico_00024");
$vl_c_dico_00025=fa_recup_dico("dico_00025");
$vl_c_dico_00026=fa_recup_dico("dico_00026");
$vl_c_dico_00046=fa_recup_dico("dico_00046");
$vl_c_dico_00047=fa_recup_dico("dico_00047");
$vl_c_mes_00007=fa_recup_dico("mess_00007");
$vl_c_bcl_010=fa_recup_dico("bcl_010");
$vl_c_bcl_011=fa_recup_dico("bcl_011");
$vl_c_bcl_012=fa_recup_dico("bcl_012");
$vl_c_bcl_013=fa_recup_dico("bcl_013");
$vl_c_bcl_014=fa_recup_dico("bcl_014");
$vl_c_bcl_015=fa_recup_dico("bcl_015");
$vl_c_bcl_016=fa_recup_dico("bcl_016");
$vl_c_bcl_017=fa_recup_dico("bcl_017");
$vl_c_bcl_018=fa_recup_dico("bcl_018");
$vl_c_bcl_019=fa_recup_dico("bcl_019");
$vl_c_bcl_020=fa_recup_dico("bcl_020");
$vl_c_bcl_021=fa_recup_dico("bcl_021");
$vl_c_bcl_022=fa_recup_dico("bcl_022");
$vl_c_bcl_023=fa_recup_dico("bcl_023");
$vl_c_bcl_024=fa_recup_dico("bcl_024");
$vl_c_bcl_025=fa_recup_dico("bcl_025");
$vl_c_bcl_026=fa_recup_dico("bcl_026");
$vl_c_bcl_027=fa_recup_dico("bcl_027");
$vl_c_bcl_028=fa_recup_dico("bcl_028");
$vl_c_bcl_029=fa_recup_dico("bcl_029");
$vl_c_bcl_030=fa_recup_dico("bcl_030");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
if ($vl_c_reftel=='azertyuiop'){
	$vl_c_recherche_ini=$vl_c_bcl_011;
	$vl_c_bao_ml_actif=1;
} else {
	$vl_c_recherche_ini=$vl_c_reftel;
	$selection_fax=4;
	$vl_c_bao_ml_actif=0;
}
echo <<<END
<_graal_inc_01 id="bcl_ove_01" flex="1">
  <vbox flex="1" class='overflow_01'>
  <hbox id="bcl_courriel_01" hidden="$vl_c_cache_id_bloc_sel_rech_fax">
    <menulist sizetopopup="none" minwidth="60" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' disabled="$vl_c_inactif" flex="1" id="bcl_ml_qui" oncommand="pf_approximatif();">
      <menupopup>
        <menuitem label="$vl_c_dico_00019" tooltiptext="$vl_c_dico_00019" selected="$vl_c_selqui_02" value="2"/>
        <menuitem label="$vl_c_dico_00020" tooltiptext="$vl_c_dico_00020" selected="$vl_c_selqui_03" value="3"/>
        <menuitem label="$vl_c_dico_00021" tooltiptext="$vl_c_dico_00021" selected="$vl_c_selqui_04" value="4"/>
        <menuitem label="$vl_c_dico_00022" tooltiptext="$vl_c_dico_00022" selected="$vl_c_selqui_05" value="5"/>
        <menuitem label="$vl_c_dico_00023" tooltiptext="$vl_c_dico_00023" selected="$vl_c_selqui_06" value="6"/>
        <menuitem label="$vl_c_dico_00024" tooltiptext="$vl_c_dico_00024" selected="$vl_c_selqui_07" value="7"/>
        <menuitem label="$vl_c_dico_00025" tooltiptext="$vl_c_dico_00025" selected="$vl_c_selqui_08" value="8"/>
        <menuitem label="$vl_c_dico_00026" tooltiptext="$vl_c_dico_00026" selected="$vl_c_selqui_09" value="9"/>
      </menupopup>
    </menulist>
        <menulist sizetopopup="none" minwidth="60" value="$vl_c_bao_ml_actif" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' flex="1" id="bao_ml_actif" oncommand="pf_approximatif();">
      <menupopup>
        <menuitem label="$vl_c_dico_00046" tooltiptext="$vl_c_dico_00046" value="1" /> <!--  Actifs-->
        <menuitem label="$vl_c_dico_00047" tooltiptext="$vl_c_dico_00047" value="2" /> <!--  Inactifs-->
        <menuitem label="$vl_c_dico_00026" tooltiptext="$vl_c_dico_00026" value="0" /> <!--  Tous-->
      </menupopup>
    </menulist>
    <label flex="0" value="$vl_c_bcl_010"/>
    <textbox minwidth="60" flex="1" value="$vl_c_recherche_ini" id="bcl_tb_rechapproxima" oninput="pf_approximatif();"/>
    <label flex="0" value="$vl_c_bcl_012"/>
    <menulist sizetopopup="none" minwidth="60" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' flex="1" id="bcl_ml_zone" oncommand="pf_approximatif();" value="$selection_fax">
      <menupopup>
        <menuitem label="$vl_c_bcl_013" tooltiptext="$vl_c_bcl_013" value="1"/> <!--  Nom de la société-->
        <menuitem label="$vl_c_bcl_014" tooltiptext="$vl_c_bcl_014" value="2"/> <!--  Nom commercial-->
        <menuitem label="$vl_c_bcl_015" tooltiptext="$vl_c_bcl_015" value="3"/> <!--  Interlocuteur-->
        <menuitem label="$vl_c_bcl_016" tooltiptext="$vl_c_bcl_016" value="4"/> <!--  Fax-->
      </menupopup>
    </menulist>
    <label flex="0" value="$vl_c_bcl_029"/>
		<textbox flex="0"   value="$vl_c_bcl_030" id="bcl_tb_limit" size="4" type="number" hidespinbuttons="true"/>
		<keyset id="_graal_ks_02">
    <key id="k-recherche" modifiers="alt" keycode="VK_F3" oncommand="pf_approximatif();"/>
	</keyset>
    <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_mes_00007" oncommand="pf_approximatif();" id="tb_rafraichir_table"/>
    <toolbarbutton id="bt_info_fen" class="ab19" label="$vl_c_dico_00149"  crop="end" dir="normal" oncommand="fa_infos_fenetre('$vl_c_win_id')" />
  </hbox>
    <vbox flex="1">
  <vbox flex="1" class='overflow_01'>
   <tree id="arbre_des_fax_interlo_act" enableColumnDrag="true" flex="1" flags="" ref="*" querytype="xml" datasources="" seltype="single" context="pop_selections">
     <treecols>
      <treecol hidden="true" id="act_cleunik" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol hidden="true" id="int_cleunik" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol hidden="true" id="intel_cleunik" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="portee" sort="?portee" label="$vl_c_bcl_022"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="raisonsoc" sort="?raisonsoc" label="$vl_c_bcl_023"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="nc" sort="?nc" label="$vl_c_bcl_024"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="civilite" sort="?civilite" label="$vl_c_bcl_025"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="qui" sort="?qui" label="$vl_c_bcl_026" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="genretel" sort="?genretel" label="$vl_c_bcl_027"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="notel" sort="?notel" label="$vl_c_bcl_028" /><splitter class="tree-splitter" resizeafter="grow"/>
		<treecol id="typeacteur" hidden="true" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
			</treecols>
     <template><query expr="*"/><action>
       <treechildren>

         <treeitem container="true" uri="?" seltype="single">
           <treerow>
             <treecell label="?act_cleunik"/>
             <treecell label="?int_cleunik"/>
             <treecell label="?intel_cleunik"/>
             <treecell label="?portee"/>
             <treecell label="?raisonsoc" properties="?prop_act"/>
             <treecell label="?nc"/>
             <treecell label="?civilite"/>
             <treecell label="?qui" properties="?prop_int"/>
             <treecell label="?genretel"/>
             <treecell label="?notel"/>
             <treecell label="?typeacteur"/>
           </treerow>
         </treeitem>
       </treechildren>
     </action></template>
   </tree>
  
  </vbox>
  </vbox>
  </vbox>
</_graal_inc_01>
END;
?>
