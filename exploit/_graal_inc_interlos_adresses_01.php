<?php
_graal_requete_charge_varlib($vl_c_id_inc_interlos_adresses_01,$vl_e_uti_cleunik);
$vl_c_bbg_006=fa_recup_dico("bbg_006");
$vl_c_bbg_007=fa_recup_dico("bbg_007");
$vl_c_bbg_008=fa_recup_dico("bbg_008");
$vl_c_bbg_009=fa_recup_dico("bbg_009");
$vl_c_bbg_010=fa_recup_dico("bbg_010");
$vl_c_bbg_011=fa_recup_dico("bbg_011");
$vl_c_bbg_012=fa_recup_dico("bbg_012");
$vl_c_bbg_013=fa_recup_dico("bbg_013");
$vl_c_bbg_014=fa_recup_dico("bbg_014");
$vl_c_bbg_015=fa_recup_dico("bbg_015");
$vl_c_bbg_016=fa_recup_dico("bbg_016");
$vl_c_bbg_017=fa_recup_dico("bbg_017");
$vl_c_bbg_018=fa_recup_dico("bbg_018");
$vl_c_bbg_019=fa_recup_dico("bbg_019");
$vl_c_bbg_020=fa_recup_dico("bbg_020");
$vl_c_bbg_021=fa_recup_dico("bbg_021");
switch ($vl_c_id_inc_interlos_adresses_01){
  case "Div_00056": $vl_c_id_fen_adresse="00000000000";break;  //  Interlocuteurs de tous les acteurs On considère dans ce cas qu'il n'y a pas de test de gestion des droits
  case "Div_00167": $vl_c_id_fen_adresse="00000000000";break;  //  Interlocuteurs des acteurs favoris On considère dans ce cas qu'il n'y a pas de test de gestion des droits
  case "Div_00179": $vl_c_id_fen_adresse="Fen_00185";break;  //  Entreprise
  case "Div_00180": $vl_c_id_fen_adresse="Fen_00186";break;  //  prospects clients
  case "Div_00181": $vl_c_id_fen_adresse="Fen_00187";break;  //  prospects fournisseurs
  case "Div_00182": $vl_c_id_fen_adresse="Fen_00188";break;  //  clients
  case "Div_00183": $vl_c_id_fen_adresse="Fen_00189";break;  //  fournisseurs
  case "Div_00184": $vl_c_id_fen_adresse="Fen_00190";break;  //  autres acteurs
  case "Div_00185": $vl_c_id_fen_adresse="Fen_00191";break;  //  acteurs indéterminés
  default:die;  
}
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_context_00='<popupset><popup id="pop_adressespostales_des_interlo"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'adressespostales_des_interlo\');" /></popup></popupset>';
echo <<<END
$vl_c_context_00
<vbox id="bbg_interlo_adresses_01" flex="1">
      <toolbar grippyhidden="true">
  		  <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_bbg_019" oncommand="pf_affiche_donnees_adresses();"/>
        <toolbarseparator />
        <hbox id="bloc_sites">
END;
if ($vl_c_id_fen_adresse=="000000000") {$vl_tb_droits[0]=1;$vl_tb_droits[1]=1;} else {$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_adresse,$vl_e_uti_cleunik);}
if ($vl_tb_droits[0]!=0){
if ($vl_tb_droits[1]!=0){
echo <<<END
          <toolbarbutton id="tb_adrpos_01" class="aj11" observes="broadcaster_01" tooltiptext="$vl_c_bbg_020" oncommand="pf_ouvre('adresse','nouveau');"/>
END;
}
echo <<<END
          <toolbarbutton id="tb_adrpos_02" class="aj12" observes="broadcaster_01" tooltiptext="$vl_c_bbg_021" oncommand="pf_ouvre('adresse','ouvrir');" />
END;
}
echo <<<END
        </hbox>
        <toolbarseparator />
      </toolbar>    
   <tree id="adressespostales_des_interlo" onselect="pf_sel_arbre_adresses();" enableColumnDrag="true" flex="3" flags="" ref="*" querytype="xml" datasources="" seltype="single" context="pop_adressespostales_des_interlo">
     <treecols>
      <treecol id="adr_act_cleunik" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_choix_cleunik" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_cleunik" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="portee" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_raison_soc" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_typeacteur"  hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_typecoordonnees" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_typecoordonnees_enclair" sort="?adr_typecoordonnees_enclair" label="$vl_c_bbg_006" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="complementnom" sort="?complementnom" label="$vl_c_bbg_007" hidden="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_ligne1" sort="?adr_ligne1" label="$vl_c_bbg_008" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_ligne2" sort="?adr_ligne2" label="$vl_c_bbg_009" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_ligne3" sort="?adr_ligne3" label="$vl_c_bbg_010" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_cp" sort="?adr_cp" label="$vl_c_bbg_011" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="departement" hidden="true" label="$vl_c_bbg_012" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_ville" sort="?adr_ville" label="$vl_c_bbg_013" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_pays" sort="?adr_pays" label="$vl_c_bbg_018" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_latitude" sort="?adr_latitude" label="$vl_c_bbg_014" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="adr_longitude" sort="?adr_longitude" label="$vl_c_bbg_015" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="nomcommercial" sort="?nomcommercial" label="$vl_c_bbg_017" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
     </treecols>
     <template><query expr="*"/><action>
       <treechildren>
         <treeitem uri="?" seltype="single">
           <treerow>
             <treecell label="?act_cleunik"/>
             <treecell label="?choix_cleunik"/>
             <treecell label="?adr_cleunik"/>
             <treecell label="?portee"/>
             <treecell label="?raison_soc"/>
             <treecell label="?type_acteur"/>
             <treecell label="?adr_typecoordonnees"/>
             <treecell label="?adr_typecoordonnees_enclair"/>
             <treecell label="?complementnom"/>
             <treecell label="?adr_ligne1"/>
             <treecell label="?adr_ligne2"/>
             <treecell label="?adr_ligne3"/>
             <treecell label="?adr_cp"/>
             <treecell label=""/>
             <treecell label="?adr_ville"/>
             <treecell label="?adr_pays"/>
             <treecell label="?adr_latitude"/>
             <treecell label="?adr_longitude"/>
             <treecell label="?nomcommercial"/>
           </treerow>
         </treeitem>
       </treechildren>
     </action></template>
   </tree>
				  </vbox>
END;
?>
