<?php
include("_graal_header_txt.inc.php");
$t_origines_ok=array();
$t_origines_ok[0]="_graal_fen_act_interlo_relation_01";
$t_origines_ok[1]="_graal_fen_act_interlo_relation_02";
fa_acces_script();
$vf_c_echo="";
$vf_c_action=fa_recup_param("vf_c_action","??????");
$vl_int_cleunik_gauche=intval(fa_recup_param("vl_interlo_cleunik_gauche",""));
$vl_choix_cleunik_gauche=intval(fa_recup_param("vl_choix_cleunik_gauche",""));
$vl_choix_cleunik_droite=intval(fa_recup_param("vl_choix_cleunik_droite",""));
$vl_blocnotebrut=fa_recup_param("vl_blocnotebrut","");
$vl_int_cleunik_droite=intval(fa_recup_param("vl_interlo_cleunik_droite",""));
switch (TRUE){
  case $vf_c_action=="supprimer":
    $sql_req = "DELETE FROM _act_interlo_relations WHERE int_cleunik_gauche=$vl_int_cleunik_gauche AND choix_cleunik_gauche=$vl_choix_cleunik_gauche AND choix_cleunik_droite=$vl_choix_cleunik_droite AND int_cleunik_droite=$vl_int_cleunik_droite";
    $vf_c_echo=_graal_exec_requete($sql_req);
    if($vf_c_echo=='ok') {$vf_c_echo=0;} else {$vf_c_echo=-1;}
    break;
  case $vf_c_action=="ajouter":
    $sql_req = "INSERT INTO _act_interlo_relations set int_cleunik_gauche=$vl_int_cleunik_gauche,choix_cleunik_gauche=$vl_choix_cleunik_gauche,choix_cleunik_droite=$vl_choix_cleunik_droite,blocnotebrut='$vl_blocnotebrut',int_cleunik_droite=$vl_int_cleunik_droite";
    $vf_c_echo=_graal_exec_requete($sql_req);
    if($vf_c_echo=='ok') {$vf_c_echo=0;} else {$vf_c_echo=-1;}
    break;
  case $vf_c_action=="modifier":
    $sql_req = "UPDATE _act_interlo_relations set blocnotebrut='$vl_blocnotebrut' WHERE int_cleunik_gauche=$vl_int_cleunik_gauche AND choix_cleunik_gauche=$vl_choix_cleunik_gauche AND choix_cleunik_droite=$vl_choix_cleunik_droite AND int_cleunik_droite=$vl_int_cleunik_droite";
    $vf_c_echo=_graal_exec_requete($sql_req);
    if($vf_c_echo=='ok') {$vf_c_echo=0;} else {$vf_c_echo=-1;}
    break;
  case $vf_c_action=="??????":
    exit;
    break;
}
_graal_ferme_connexion();
echo $vf_c_echo;
echo $sql_req;
?>
