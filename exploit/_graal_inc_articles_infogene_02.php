<?php
_graal_requete_charge_varlib($vl_c_id_article_info_gene,$vl_e_uti_cleunik);
$vl_c_bbp_001=fa_recup_dico("bbp_001");
$vl_c_bbp_002=fa_recup_dico("bbp_002");
$vl_c_bbp_003=fa_recup_dico("bbp_003");
$vl_c_bbp_004=fa_recup_dico("bbp_004");
$vl_c_bbp_005=fa_recup_dico("bbp_005");
$vl_c_bbp_006=fa_recup_dico("bbp_006");
$vl_c_bbp_007=fa_recup_dico("bbp_007");
$vl_c_bbp_008=fa_recup_dico("bbp_008");
$vl_c_bbp_009=fa_recup_dico("bbp_009");
$vl_c_bbp_010=fa_recup_dico("bbp_010");
$vl_c_bbp_011=fa_recup_dico("bbp_011");
$vl_c_bbp_012=fa_recup_dico("bbp_012");
$vl_c_bbp_013=fa_recup_dico("bbp_013");
$vl_c_bbp_014=fa_recup_dico("bbp_014");
$vl_c_bbp_015=fa_recup_dico("bbp_015");
$vl_c_bbp_016=fa_recup_dico("bbp_016");
$vl_c_bbp_017=fa_recup_dico("bbp_017");
$vl_c_bbp_018=fa_recup_dico("bbp_018");
$vl_c_bbp_019=fa_recup_dico("bbp_019");
$vl_c_bbp_020=fa_recup_dico("bbp_020");
$vl_c_bbp_021=fa_recup_dico("bbp_021");
$vl_c_bbp_022=fa_recup_dico("bbp_022");
$vl_c_bbp_023=fa_recup_dico("bbp_023");
$vl_c_bbp_024=fa_recup_dico("bbp_024");
$vl_c_bbp_025=fa_recup_dico("bbp_025");
$vl_c_bbp_026=fa_recup_dico("bbp_026");$vl_c_bbp_026="Ajouter à un dossier";
$vl_c_dico_00013=fa_recup_dico("dico_00013");
$vl_c_dico_00014=fa_recup_dico("dico_00014");
$vl_tb_droits_dupliq=_graal_requete_droits_fenetre("Fen_00657",$vl_e_uti_cleunik);
$param_generaux_graal_167=intval(fa_recup_session('vs_param_generaux_graal_167','0'));
$vs_envan=intval(fa_recup_session('vs_envan','0'));
switch ($vs_envan){
	case 0:
		$tpf_hidden="true";
		$tpf_01_hidden="true";
		break;
	case 1:
		$tpf_01_hidden="true";
		break;
	case 2:
	default:
		break;
}
if ($vl_tb_droits_dupliq[0]==false) {
  $vl_c_dupliq="";
} else {
  $vl_c_dupliq="<menuitem id='menu_02_05' label='$vl_c_bbp_025' oncommand='pf_action(\"duplication\");'/>";
}
echo <<<END
<vbox flex="1">
<vbox flex="1" id="bbp_articles_01">
  <hbox>  
<menubar id="menu_menus" flex="1">
  <menu observes="broadcaster_01" id="menu_02" label="$vl_c_bbp_014" accesskey="C" >
   <menupopup>
  <menuitem id="menu_02_01" label="$vl_c_bbp_015" class="menuitem-iconic ak08" oncommand="pf_action('favoris_ajout')" />
  <menuitem id="menu_02_02" label="$vl_c_bbp_023" class="menuitem-iconic ak09" oncommand="pf_action('favoris_supprimer')" />
  <menuitem id="menu_02_05" label="$vl_c_bbp_026" class="menuitem-iconic aj01" oncommand="pf_action('dossier_ajouter')" />
  <menuseparator id="menu_02_03"/>
  <menuitem id="menu_02_04" disabled="true" label="$vl_c_bbp_016" />
  $vl_c_dupliq
   </menupopup>
 </menu>
<toolbarseparator />
  <menu id="menu_04" label="$vl_c_bbp_017" accesskey="?" >
   <menupopup>
  <menuitem id="menu_04_01" disabled="true" label="$vl_c_bbp_018" accesskey="VK_F1"/>
  <menuseparator id="menu_04_02"/>
  <menuitem id="menu_04_03" disabled="true" label="$vl_c_bbp_019" acceskey="S"/>
  <menuitem id="menu_04_04" disabled="true" label="$vl_c_bbp_020" acceskey="D"/>
  <menuseparator id="menu_04_05"/>
  <menuitem id="menu_04_08" disabled="true" label="$vl_c_bbp_021" tooltiptext="$vl_c_bbp_022"/>
   </menupopup>
 </menu>
</menubar>
</hbox>  

  <grid flex="1">
    <columns flex="1">
     <column/>
     <column flex="1"/>
    </columns>
    <rows>
      <row flex= "1">
       <label control="la_mnemotechnique" value="$vl_c_bbp_001"/>
       <hbox flex="1">
			 <textbox observes="broadcaster_01" id="tb_mnemotechnique" maxlength="20"   />
			 <label control="la_code" value="$vl_c_bbp_002"/>
       <textbox flex="1" observes="broadcaster_01" id="tb_code" maxlength="20"   />
			 </hbox>
      </row>
      <row flex= "1">
			 <label control="la_description" value="$vl_c_bbp_003"/>
       <hbox flex="1">
				 <textbox flex="5" observes="broadcaster_01" id="tb_description"   />
				 <hbox flex="1">
			    <menulist sizetopopup="none" observes="broadcaster_01" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' flex="1" id="ml_lib_art" oncommand="pf_libart();" flags="" ref="*" querytype="xml" datasources="" class="normal" _graal_cleunik="??">
			      <menupopup>
			        <menuitem label="Liste des libellés" selected="true" _graal_langue="" _graal_genre=""/> <!--  Pas d'action'-->
			        <menuitem label="Ajouter un libellé" _graal_langue="-1" _graal_genre="-1"/> <!--  ajouter-->
			      </menupopup>
			      <template><query expr="*"/><action>
			        <menupopup>
			          <menuseparator/>
			          <menuitem uri="?" label="?langue_genre" _graal_langue="?langue" _graal_genre="?genre"/> <!-- les différents libellés articles -->
			        </menupopup>
			      </action></template>
			    </menulist>
			  	</hbox>
				</hbox>
      </row>
     <row flex= "10">
       <label control="la_blocnotebrut" value="$vl_c_bbp_004"/>
       <textbox observes="broadcaster_01" id="tb_blocnotebrut"   multiline="true"/>
     </row>
      <row flex= "1">
        <label control="la_dates" value="$vl_c_bbp_005"/>
        <groupbox>
          <hbox flex="1">
         <groupbox flex="1">
          <caption><label value="$vl_c_bbp_024" /></caption>
          <radiogroup id='rdg_acteur_actif' flex="1" name='name'>
            <hbox>
              <radio observes="broadcaster_01" id='ra_actif_oui' label="$vl_c_dico_00013" value='1' />
              <spacer flex="1"/>
              <radio observes="broadcaster_01" id='ra_actif_non' label="$vl_c_dico_00014" value='2'/>
             </hbox>
           </radiogroup>
           <hbox>
            <label control="la_dateheurevalidite" value="$vl_c_bbp_006"/>
            <hbox>
      				<spacer flex="1"/>
					<datepicker type="popup" monthLeadingZero="true" dateLeadingZero="true" observes="broadcaster_01" flex="1" id="tb_dateheurevalidite"/>
      				<spacer flex="1"/>
      			</hbox>                  
           </hbox> 

        </groupbox>

           <spacer flex= "2"/>
           <label control="la_dateheurecreation" value="$vl_c_bbp_007"/>
           <label id="la_dateheurecreation" />
           <spacer flex= "2"/>
           <label control="la_dateheuremodif" value="$vl_c_bbp_008"/>
           <label id="la_dateheuremodif" />
          </hbox>
        </groupbox>
      </row>
      <row flex= "1">
        <label control="la_types_gestion" value="$vl_c_bbp_009"/>
        <vbox>
          <groupbox>
            <hbox>
              <checkbox observes="broadcaster_01" id="ch_n01" value="1"   label="$vl_c_bbp_010" />
              <spacer flex= "1"/>
              <checkbox observes="broadcaster_01" id="ch_n02" value="2"   label="$vl_c_bbp_011" />
              <spacer flex= "1"/>
              <checkbox collapsed="true" id="ch_n03" value="4"   label="$vl_c_bbp_012" />
              <spacer flex= "1"/>
              <checkbox collapsed="true" id="ch_n04" value="8"   label="$vl_c_bbp_013" />
            </hbox>
          </groupbox>
        </vbox>
      </row>
  </rows>
</grid>
</vbox>
END;
_graal_requete_charge_varlib($vl_c_id_article_divers,$vl_e_uti_cleunik);
$vl_c_bom_001=fa_recup_dico("bom_001");
$vl_c_bom_002=fa_recup_dico("bom_002");
$vl_c_bom_003=fa_recup_dico("bom_003");
$vl_c_bom_004=fa_recup_dico("bom_004");
$vl_c_bom_005=fa_recup_dico("bom_005");
$vl_c_bom_006=fa_recup_dico("bom_006");
$vl_c_bom_007=fa_recup_dico("bom_007");
$vl_c_bom_008=fa_recup_dico("bom_008");
$vl_c_bom_009=fa_recup_dico("bom_009");
$vl_c_bom_010=fa_recup_dico("bom_010");
$vl_c_bom_011=fa_recup_dico("bom_011");
$vl_c_bom_012=fa_recup_dico("bom_012");
$vl_c_bom_013=fa_recup_dico("bom_013");
$vl_c_bom_014=fa_recup_dico("bom_014");
$vl_c_bom_015=fa_recup_dico("bom_015");
$vl_c_bom_021=fa_recup_dico("bom_021");
$vl_c_bom_023=fa_recup_dico("bom_023");
$vl_c_bom_024=fa_recup_dico("bom_024");
$vl_c_id_fen_art_compta="Fen_00656";
$tb_compta=<<<EOT
      <toolbar grippyhidden="true">
  		  <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_bom_008" oncommand="pf_affiche_donnees_compta();"/>
EOT;
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_art_compta,$vl_e_uti_cleunik);
if ($vl_tb_droits[0]!=0) {
  if ($vl_tb_droits[1]!=0) {
    $tb_compta.=('<toolbarbutton observes="broadcaster_01" class="ajouter" tooltiptext="'.$vl_c_bom_009.'" oncommand="pf_ouvre(\'compta\',\'nouveau\');"/>');
  }
  $tb_compta.=('<toolbarbutton observes="broadcaster_01" class="modifier" tooltiptext="'.$vl_c_bom_010.'" oncommand="pf_ouvre(\'compta\',\'ouvrir\');"/>');
  if ($vl_tb_droits[1]!=0) {
    $tb_compta.=('<toolbarbutton observes="broadcaster_01" class="ajouter" tooltiptext="'.$vl_c_bom_023.'" oncommand="pf_ouvre(\'compta\',\'dupliquer_reference\');"/>');
  }
}
$tb_compta.=("<toolbarseparator /></toolbar>");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_context_00='<popupset><popup id="pop_arbre_compta"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arbre_compta\');" /></popup></popupset>';
echo <<<END
$vl_c_context_00
<vbox flex="1" id="bom_articles_01">
<hbox>
  <label control="la_nbdec_prix" value="$vl_c_bom_001"/>
  <menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' observes="broadcaster_01" flex="1" id="ml_nbdec_prix" _graal_nombre='5'>
    <menupopup>
      <menuitem label="0" value="0"/>  
      <menuitem label="1" value="1"/>
      <menuitem label="2" value="2" selected="true"/>
      <menuitem label="3" value="3"/>
      <menuitem label="4" value="4"/>
    </menupopup>
  </menulist>
	<label control="la_nbdec_qte" value="$vl_c_bom_015"/>
  <menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' observes="broadcaster_01" flex="1" id="ml_nbdec_qte" _graal_nombre='5' value="$param_generaux_graal_167">
    <menupopup>
      <menuitem label="0" value="0"/>  
      <menuitem label="1" value="1"/>
      <menuitem label="2" value="2"/>
      <menuitem label="3" value="3"/>
      <menuitem label="4" value="4"/>
    </menupopup>
  </menulist>
  <label control="la_pr_generique" value="$vl_c_bom_002"/>
  <textbox decimalplaces="2" label="$vl_c_bom_002" type="number" hidespinbuttons="true" observes="broadcaster_01" id="tb_pr_generique"   />
</hbox>

<vbox id="box_compte_compta" flex="1" class='overflow_01'>
  $tb_compta
  <tree id="arbre_compta" hidecolumnpicker="false" flags="" ref="*" querytype="xml" datasources="" enableColumnDrag="true" rows="6" context="pop_arbre_compta">
    <treecols>
      <treecol id="tc_art_cleunik" ignoreincolumnpicker="true" hidden="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_catcompta_cleunik" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_pc_cleunik_vente" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_pc_cleunik_achat" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_intitule_vente" label="$vl_c_bom_005" sort="?intitule_vente" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_intitule_achat" label="$vl_c_bom_006" sort="?intitule_achat" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_intitule_categorie" label="$vl_c_bom_004" sort="?intitule_categorie" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_intitule_taxe" label="$vl_c_bom_007" sort="?intitule_taxe" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_intitule_tpf" label="$vl_c_bom_021" sort="?intitule_tpf" hidden="$tpf_hidden" ignoreincolumnpicker="$tpf_hidden"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_tpf_cleunik" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_intitule_tpf_01" label="$vl_c_bom_024" sort="?intitule_tpf_01" hidden="$tpf_01_hidden" ignoreincolumnpicker="$tpf_01_hidden"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="tc_tpf_cleunik_01" ignoreincolumnpicker="true" hidden="true"/><splitter class="tree-splitter" resizeafter="grow"/>
    </treecols>
    <template><query expr="*"/><action>
      <treechildren>
        <treeitem uri="?" seltype="single">
          <treerow>
            <treecell label="?art_cleunik"/>
            <treecell label="?catcompta_cleunik"/>
            <treecell label="?pc_cleunik_vente"/>
            <treecell label="?pc_cleunik_achat"/>
            <treecell label="?intitule_vente"/>
            <treecell label="?intitule_achat"/>
            <treecell label="?intitule_categorie"/>
            <treecell label="?intitule_taxe"/>
            <treecell label="?intitule_tpf"/>
            <treecell label="?tpf_cleunik"/>
            <treecell label="?intitule_tpf_01"/>
            <treecell label="?tpf_cleunik_01"/>
          </treerow>
        </treeitem>
      </treechildren>
    </action></template>
  </tree>
</vbox>


</vbox>
</vbox>


END;
?>
