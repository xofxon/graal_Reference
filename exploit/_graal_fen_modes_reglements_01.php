<?php
include("_graal_header_xul.inc.php");
$vl_e_uti_cleunik =intval(fa_recup_session("vs_uti_cleunik","0"));
$vl_c_id_fenetre="Fen_00649";
$vl_c_codecache="false";
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
$vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=1;
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_bos_100=fa_recup_dico("bos_100");
$vl_c_bos_101=fa_recup_dico("bos_101");
$vl_c_bos_102=fa_recup_dico("bos_102");
$vl_c_bos_103=fa_recup_dico("bos_103");
$vl_c_bos_104=fa_recup_dico("bos_104");
$vl_c_bos_105=fa_recup_dico("bos_105");
$vl_c_bos_106=fa_recup_dico("bos_106");
$vl_c_bos_107=fa_recup_dico("bos_107");
$vl_c_bos_108=fa_recup_dico("bos_108");
$vl_c_bos_109=fa_recup_dico("bos_109");
$vl_c_bos_110=fa_recup_dico("bos_110");
$vl_c_bos_111=fa_recup_dico("bos_111");
$vl_c_bos_112=fa_recup_dico("bos_112");
$vl_c_dico_00013=fa_recup_dico("dico_00013");
$vl_c_dico_00014=fa_recup_dico("dico_00014");
$ml_mode_paiement=fa_brik_menulist_choix(137,1,-1,-1,'','ml_mode_paiement',"broadcaster_01",0);
$ml_type_paiement=fa_brik_menulist_choix(138,1,-1,-1,'','ml_type_paiement',"broadcaster_01",0);
include("_graal_header_winxul.inc.php");
$c_id_windows=$vl_c_id_fenetre;
//$c_id_windows=""; 
echo <<<END
<window context="graal_cp00" title="$vl_c_bos_100" id="$c_id_windows" onload="fa_aa(this);pf_aa_init();" $c_xmlns>
$vl_c_graal_cp00
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_modes_reglements_01.js.php");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_context_00='<popupset><popup id="pop_arb_modesreglements"><menuitem class="menuitem-iconic ad09" label="'.$vl_c_dico_00106.'" oncommand="fa_infos_colonnes_arbre_recup(\''.$vl_c_id_fenetre.'\',\'arb_modesreglements\');" /></popup></popupset>';
echo <<<END
$vl_c_context_00
<broadcasterset><broadcaster id="broadcaster_01" /></broadcasterset>
  <vbox flex="2">
   <tree flex="40" id="arb_modesreglements" enableColumnDrag="true" flags="" ref="*" querytype="xml" datasources="" onselect="pf_sel_ligne(this.id);" seltype="single" context="pop_arb_modesreglements">
     <treecols> 
      <treecol id="reg_cleunik" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="codealphanum15" hidden="$vl_c_codecache" label="$vl_c_bos_101" sort="?codealphanum15"/><splitter class="tree-splitter" resizeafter="grow"/>
      <treecol id="description" label="$vl_c_bos_102" sort="?description" sortActive="true" sortDirection="ascending"/><splitter class="tree-splitter" resizeafter="grow"/>
     </treecols>
     <template><query expr="*"/><action>
       <treechildren >
         <treeitem uri="?" seltype="single">
           <treerow >
             <treecell properties="?properties" label="?reg_cleunik"/>
             <treecell properties="?properties" label="?codealphanum15"/>
             <treecell properties="?properties" label="?description"/>
           </treerow>
         </treeitem>
       </treechildren>
     </action></template>
   </tree>
</vbox>
<splitter />

<hbox flex="1">
  <vbox flex="1">
  <grid flex="1">
    <columns flex="1">
      <column flex="1" id="col01" />
      <column flex="20" id="col02" />
    </columns>
    <rows>
      <row>
        <label control="la_codealphanum15" value="$vl_c_bos_103"/>
        <textbox observes="broadcaster_01" id="tb_codealphanum15" maxlength="15"  />
      </row>
      <row>
        <label control="la_description" value="$vl_c_bos_104"/>
        <textbox observes="broadcaster_01" id="tb_description"  />
      </row>
      <row>
        <label control="la_mode_paiement" value="$vl_c_bos_105"/>
        $ml_mode_paiement
      </row>
      <row>
        <label control="la_type_paiement" value="$vl_c_bos_106"/>
        $ml_type_paiement
      </row>
      <row>
        <box />
        <hbox>
          <textbox observes="broadcaster_01" type="number" hidespinbuttons="true" decimalplaces="0" id="tb_nbjour"  />
          <label value="$vl_c_bos_107"/>
          <label value="$vl_c_bos_108"/>
          <textbox observes="broadcaster_01" type="number" hidespinbuttons="true" decimalplaces="0" id="tb_jour"  />
        </hbox>
      </row>
      <row>
        <box />
          <groupbox flex="1" orient="horizontal">
            <caption><label value="$vl_c_bos_109" /></caption>
            <radiogroup id='rdg_moisentier' flex="1">
              <hbox>
                <radio observes="broadcaster_01" id='ra_moisentier_oui' label="$vl_c_dico_00013" value='1' />
                <spacer flex="1"/>
                <radio observes="broadcaster_01" id='ra_moisentier_non' label="$vl_c_dico_00014" value='2'/>
              </hbox>
            </radiogroup>
            <menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' id="ml_base" class="normal" observes="broadcaster_01" _graal_nombre="2" flex="1" value="1">
    			<menupopup>
    				<menuitem value="1" label="n jours puis la fin du mois" tooltiptext="n jours puis la fin du mois" crop="none"  />
              		<menuitem value="2" label="Fin du mois de facture puis n jours" tooltiptext="Fin du mois de facture puis n jours" crop="none" />
    			</menupopup>
    		</menulist>
          </groupbox>
      </row>
      
      <row flex="1">
        <label control="la_description" value="$vl_c_bos_110"/>
        <textbox observes="broadcaster_01" id="tb_blocnotebrut"   multiline="true" rows="20"/>
      </row>
      <row>
        <box />
          <groupbox flex="1">
            <caption><label value="$vl_c_bos_111" /></caption>
            <radiogroup id='rdg_mode_reglement_actif' flex="1">
              <hbox>
                <radio observes="broadcaster_01" id='ra_actif_oui' label="$vl_c_dico_00013" value='1' />
                <spacer flex="1"/>
                <radio observes="broadcaster_01" id='ra_actif_non' label="$vl_c_dico_00014" value='2'/>
              </hbox>
            </radiogroup>
            <label value="$vl_c_bos_112" id="la_utilisations"/>
          </groupbox>
      </row>
      <row id="id_calcule_echeance" collapsed="true">
        <box />
			<hbox flex="1"  >
            	<datepicker type="popup" monthLeadingZero="true" dateLeadingZero="true" flex="1" id="tb_cial_date_facture"/>
            	<toolbarbutton flex="1" label="VÃ©rifier le calcul" oncommand="pf_verifier();" />
	      	</hbox>
	  </row>
    </rows>
  </grid>
</vbox>
  <vbox flex="0" id="boutons_standards"> 
END;
include("_graal_inc_boutons_01.php");
echo <<<END
  </vbox>    
</hbox>

</window>
END;
?>
