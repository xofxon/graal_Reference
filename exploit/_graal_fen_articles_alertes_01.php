<?php
include("_graal_header_xul.inc.php");
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
$vl_c_genre=fa_recup_param('genre','tousss');
switch ($vl_c_genre){
  case "tousss": $vl_c_id_fenetre="Fen_00571";$vl_c_id_article_recherche="Div_00487";break;  //  Tous les articles
  case "favori": $vl_c_id_fenetre="Fen_00572";$vl_c_id_article_recherche="Div_00488";break;  //  Favoris
  case "achats": $vl_c_id_fenetre="Fen_00573";$vl_c_id_article_recherche="Div_00489";break;  //  Articles d'achats
  case "ventes": $vl_c_id_fenetre="Fen_00574";$vl_c_id_article_recherche="Div_00490";break;  //  Articles de vente
  case "fabric": $vl_c_id_fenetre="Fen_00575";$vl_c_id_article_recherche="Div_00491";break;  //  Articles de fabrication
  default: fa_redirige("acces_interdit");break; 
}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_bca_100=fa_recup_dico("bca_100");
$vl_c_boc_101=fa_recup_dico("boc_101");
$vl_c_boc_102=fa_recup_dico("boc_102");
$vl_c_boc_103=fa_recup_dico("boc_103");
$vl_c_boc_104=fa_recup_dico("boc_104");
$vl_c_boc_105=fa_recup_dico("boc_105");
$vl_c_boc_106=fa_recup_dico("boc_106");
$vl_c_boc_107=fa_recup_dico("boc_107");
$vl_c_boc_108=fa_recup_dico("boc_108");
$vl_c_boc_109=fa_recup_dico("boc_109");
$vl_c_boc_110=fa_recup_dico("boc_110");
$vl_c_boc_111=fa_recup_dico("boc_111");
$vl_c_boc_112=fa_recup_dico("boc_112");
$vl_c_boc_113=fa_recup_dico("boc_113");
$vl_c_boc_114=fa_recup_dico("boc_114");
$vl_c_boc_115=fa_recup_dico("boc_115");
$vl_c_boc_116=fa_recup_dico("boc_116");
$vl_c_boc_117=fa_recup_dico("boc_117");
$vl_c_boc_118=fa_recup_dico("boc_118");
$vl_c_boc_119=fa_recup_dico("boc_119");
$vl_c_boc_120=fa_recup_dico("boc_120");
$vl_c_dico_00106=fa_recup_dico("dico_00106");
$vl_c_dico_00149=fa_recup_dico('dico_00149');
$vl_c_type_article_recherche="4";
$vl_c_menu_context="<popup id='pop_art'>";
$vl_c_menu_context.="<menuitem class='menuitem-iconic ad09' label='$vl_c_dico_00106' oncommand='fa_infos_colonnes_arbre_recup(\"$vl_c_id_fenetre\",\"arbre_des_articles\");'/>";
$vl_c_menu_context.="<menuitem class='menuitem-iconic ai07' label='$vl_c_boc_108' oncommand='pf_ouvre(\"art\");' />";
$vl_tb_droits_mousto=_graal_requete_droits_fenetre("Fen_00565",$vl_e_uti_cleunik);
if ($vl_tb_droits_mousto[1]!=0){$vl_c_menu_context.="<menuitem class='menuitem-iconic ai07' label='$vl_c_boc_107' oncommand='pf_ouvre(\"mousto\");' />";}
$vl_tb_droits_mousto=_graal_requete_droits_fenetre("Fen_00569",$vl_e_uti_cleunik);
if ($vl_tb_droits_mousto[0]!=0){$vl_c_menu_context.="<menuitem class='menuitem-iconic ai07' label='$vl_c_boc_114' oncommand='pf_ouvre(\"mouvements\");' />";}
$vl_c_menu_context.="<menuitem class='menuitem-iconic ai07' label='$vl_c_boc_115' disabled='true' />";
$vl_c_menu_context.="<menuitem class='menuitem-iconic ai07' label='$vl_c_boc_116' disabled='true' />";
$vl_c_menu_context.="<menuitem class='menuitem-iconic ai07' label='$vl_c_boc_117' disabled='true' />";
$vl_c_menu_context.="</popup>";
include("_graal_header_winxul.inc.php");
$vl_tc_composants=array($vl_c_id_article_recherche);
echo <<<END
<window context="graal_cp00" _graal_toto="$vl_c_id_fenetre" _graal_genre="$vl_c_genre" title="$vl_c_boc_100" id="_win_fen_articles_alertes_01" onload="fa_aa(this);pf_aa_init()" $c_xmlns>
$vl_c_graal_cp00
$vl_c_menu_context
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_fen_articles_alertes_01.js.php");
include("js/_graal_articles_selection_01.js.php");
include("_graal_inc_articles_recherche_01.php");
echo <<<END

<vbox id="bbb_ove_01" >
<hbox flex="1">
  <groupbox flex="1">
  <hbox>
    <radiogroup id="rdg_etat" onclick="fa_approximatif_bbo();" flex="1">
       <hbox flex="1">
       <radio label="$vl_c_boc_109" value="1" />
       <spacer flex="1"/>
       <radio label="$vl_c_boc_110" selected="true" value="2"/>
       <spacer flex="1" />
       <radio label="$vl_c_boc_112" value="3"/>
       <spacer flex="1" />
       <radio label="$vl_c_boc_120" value="4"/>

       </hbox>
     </radiogroup>
    </hbox>
  </groupbox>
</hbox>
</vbox>
  <hbox flex="100" class="overflow_01">
  
  <tree id="arbre_des_articles" enableColumnDrag="true" flex="1" flags="" ref="*" querytype="xml" datasources="" seltype="single" context="pop_art">
<treecols>
 <treecol id="code" sort="?code" label="$vl_c_boc_101"  /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="mnemotech" sort="?mnemotechnique" label="$vl_c_boc_102"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="art_cleunik" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="description" sort="?description" label="$vl_c_boc_103"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="qte_alerte" class="droite" sort="?val_qte_alerte" label="$vl_c_boc_111"/><splitter class="tree-splitter" />
 <treecol id="qte_securite" class="droite" sort="?val_qte_securite" label="$vl_c_boc_113"/><splitter class="tree-splitter" />
 <treecol id="qte_mini" class="droite" sort="?val_qte_mini" label="$vl_c_boc_118"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="qte_maxi" class="droite" sort="?val_qte_maxi" label="$vl_c_boc_119"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="qte_stock" class="droite" sort="?val_qte_stock" label="$vl_c_boc_104"/><splitter class="tree-splitter" />
 <treecol id="unite" class="centre" sort="?unite" label="$vl_c_boc_106"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="dateheure_dermvt" sort="?dateheure_dermvt_tri" label="$vl_c_boc_105"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="dateheure_dermvt_tri" sort="?dateheure_dermvt_tri" hidden="true" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="val_qte_stock" class="droite" sort="?val_qte_stock" hidden="true" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="val_qte_alerte" class="droite" sort="?val_qte_alerte" hidden="true" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="val_qte_securite" class="droite" sort="?val_qte_securite" hidden="true" ignoreincolumnpicker="true"/>
 <treecol id="val_qte_mini" class="droite" sort="?val_qte_mini" hidden="true" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
 <treecol id="val_qte_maxi" class="droite" sort="?val_qte_maxi" hidden="true" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>


 </treecols>
 <template><query expr="*"/><action>
 <treechildren>

 <treeitem container="true" uri="?" seltype="single">
 <treerow>
 <treecell properties="?properties" label="?code" />
 <treecell properties="?properties" label="?mnemotechnique"/>
 <treecell properties="?properties" label="?art_cleunik"/>
 <treecell properties="?properties" label="?description"/>
 
 <treecell properties="?properties" label="?qte_alerte"/>
 <treecell properties="?properties" label="?qte_securite"/>
 <treecell properties="?properties" label="?qte_mini"/>
 <treecell properties="?properties" label="?qte_maxi"/>
 
 <treecell properties="?properties" label="?qte_stock"/>
 <treecell properties="?properties" label="?unite"/>
 <treecell properties="?properties" label="?dateheure_dermvt"/>
 <treecell properties="?properties" label="?dateheure_dermvt_tri"/>
 <treecell properties="?properties" label="?val_qte_stock"/>
 <treecell properties="?properties" label="?val_qte_alerte"/>
 <treecell properties="?properties" label="?val_qte_securite"/>
 <treecell properties="?properties" label="?val_qte_mini"/>
 <treecell properties="?properties" label="?val_qte_maxi"/>

 </treerow>
 </treeitem>
 </treechildren>
 </action></template>
 </tree>
  
  
  </hbox> 
 </window>
END;
?>
