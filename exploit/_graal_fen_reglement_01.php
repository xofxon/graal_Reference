<?php
include("_graal_header_xul.inc.php");
include("_graal_fonctions_echeances.php");
$vl_e_uti_cleunik =intval(fa_recup_session("vs_uti_cleunik","0"));
$vl_c_genre=fa_recup_param('genre','???');
$vl_e_echeance_cleunik=intval(fa_recup_param('echeance_cleunik','-1'));
$vl_e_journal_cleunik=intval(fa_recup_param('journal_cleunik','-1'));
$vl_c_fichier_echeance=fa_recup_param('fichier_echeance','???');
$vf_t_panier_echeancier=fa_recup_param('vf_t_panier_echeancier','');	//	utilisation dans javascript pour multiples factures
switch ($vl_c_genre){
	case "5": $vl_c_type="cli";$vl_c_id_fenetre="Fen_00959";$vl_c_inc_reglement_01="_graal_inc_reglement_01.php";$vl_c_inc_reglement_02="_graal_inc_reglement_02.php";break;  //  Réglement client 1 chèque -> une facture
	case "7": $vl_c_type="cli";$vl_c_id_fenetre="Fen_01005";$vl_c_inc_reglement_01="";$vl_c_inc_reglement_02="_graal_inc_reglement_02.php";break;  //  Réglement client 1 chèque -> n factures		  
	case "8": $vl_c_type="cli";$vl_c_id_fenetre="Fen_00962";$vl_c_inc_reglement_01="_graal_inc_reglement_01.php";$vl_c_inc_reglement_02="_graal_inc_reglement_03.php";break;  //  Réglement client 1 virement/traite/LCR -> une facture
	case "C8": $vl_c_type="cli";$vl_c_id_fenetre="Fen_01144";$vl_c_inc_reglement_01="_graal_inc_reglement_01.php";$vl_c_inc_reglement_02="_graal_inc_reglement_03.php";break;  //  Réglement client 1 virement/traite/LCR -> une commande client
	case "10":$vl_c_type="cli";$vl_c_id_fenetre="Fen_01006";$vl_c_inc_reglement_01="";$vl_c_inc_reglement_02="_graal_inc_reglement_03.php";break;  //  Réglement client 1 virement/traite/LCR -> n factures		  
	case "12": $vl_c_type="fou";$vl_c_id_fenetre="Fen_01124";$vl_c_inc_reglement_01="_graal_inc_reglement_01.php";$vl_c_inc_reglement_02="_graal_inc_reglement_02.php";break;  //  Réglement fournisseur 1 chèque -> une facture
	case "14": $vl_c_type="fou";$vl_c_id_fenetre="Fen_01127";$vl_c_inc_reglement_01="";$vl_c_inc_reglement_02="_graal_inc_reglement_02.php";break;  //  Réglement fournisseur 1 chèque -> n factures		  
	case "15": $vl_c_type="fou";$vl_c_id_fenetre="Fen_01126";$vl_c_inc_reglement_01="_graal_inc_reglement_01.php";$vl_c_inc_reglement_02="_graal_inc_reglement_03.php";break;  //  Réglement fournisseur 1 virement/traite/LCR -> une facture
	case "17": $vl_c_type="fou";$vl_c_id_fenetre="Fen_01125";$vl_c_inc_reglement_01="";$vl_c_inc_reglement_02="_graal_inc_reglement_03.php";break;  //  Réglement fournisseur 1 virement/traite/LCR -> n factures		  
	default:fa_redirige("acces_interdit");break;
}
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_b_acces=$vl_tb_droits[0];
$vl_b_ajout=0;
$vl_b_modif=$vl_tb_droits[2];
$vl_b_suppr=0;
$vl_b_impri=0;
if ($vl_b_acces==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);
$ml_journal=fa_brik_menulist_journaux("","ml_journal","",$vl_e_journal_cleunik,"tous");
$vl_c_brg_100=fa_recup_dico("brg_100");
$vl_c_brg_101=fa_recup_dico("brg_101");
$vl_c_brg_102=fa_recup_dico("brg_102");
$vl_c_brg_103=fa_recup_dico("brg_103");
$vl_c_brg_104=fa_recup_dico("brg_104");
$vl_c_brg_105=fa_recup_dico("brg_105");
$vl_c_brg_106=fa_recup_dico("brg_106");
$vl_c_brg_107=fa_recup_dico("brg_107");
$vl_c_brg_108=fa_recup_dico("brg_108");
$vl_c_brg_109=fa_recup_dico("brg_109");
$vl_c_brg_110=fa_recup_dico("brg_110");
$vl_c_brg_111=fa_recup_dico("brg_111");
$vl_c_brg_112=fa_recup_dico("brg_112");
$vl_c_brg_113=fa_recup_dico("brg_113");
$vl_c_brg_114=fa_recup_dico("brg_114");
$vl_c_brg_115=fa_recup_dico("brg_115");
$vl_c_brg_116=fa_recup_dico("brg_116");
$vl_c_brg_117=fa_recup_dico("brg_117");
$vl_c_brg_118=fa_recup_dico("brg_118");
$vl_c_brg_119=fa_recup_dico("brg_119");
$vl_c_brg_120=fa_recup_dico("brg_120");
$vl_c_brg_121=fa_recup_dico("brg_121");
$vl_c_brg_122=fa_recup_dico("brg_122");
$vl_c_brg_123=fa_recup_dico("brg_123");
$vl_c_brg_124=fa_recup_dico("brg_124");
$vl_c_brg_125=fa_recup_dico("brg_125");
$vl_c_brg_126=fa_recup_dico("brg_126");
$vl_c_brg_127=fa_recup_dico("brg_107");
$vl_c_brg_128=fa_recup_dico("brg_128");
$vl_c_brg_129=fa_recup_dico("brg_129");$vl_c_brg_129="Il faut renseigner la date de réglement.";
include("_graal_header_winxul.inc.php");
$ml_devise=fa_brik_menulist_choix(67,5,-1,1,'','ml_devise',"",0);
$ml_ecart=fa_brik_menulist_choix(146,5,-1,1,'','ml_ecart',"",-132);
echo <<<END
<window context="graal_cp00" title="$vl_c_brg_100" id="_win_fen_reglements" onload="fa_aa(this);pf_aa_init();" onunload="pf_onunload();" flex="1" $c_xmlns>
<broadcasterset><broadcaster id="broadcaster_01" /></broadcasterset>
$vl_c_graal_cp00
END;
include_once("js/_graal_01.js.php");
include("js/_graal_reglement_01.js.php");
echo <<<END
<hbox flex="1" class="overflow_01"><vbox flex="1">
END;
if ($vl_c_inc_reglement_01!="") {include("$vl_c_inc_reglement_01");}
include("$vl_c_inc_reglement_02");
echo <<<END
</vbox><vbox id="boutons_standards">
END;
include("_graal_inc_boutons_01.php");
echo <<<END
    </vbox>
</hbox>
</window>
END;
?>
