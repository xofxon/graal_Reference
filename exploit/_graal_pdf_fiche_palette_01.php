<?php
/*
require("_graal_fonctions_diverses.php");
require("_graal_fonctions_mysql.php");
include("_graal_fonctions_documents.php");
$bonprep_cleunik=intval(fa_recup_param("bonprep_cleunik","0"));
if (fa_verif_droit($bonprep_cleunik)==false) {fa_redirige("document_interdit");}
$sql_req = "SELECT f1.code as code,f2.document as document from _bonprep_entetes f1, _documents f2 where f1.bonprep_cleunik=$bonprep_cleunik and f2.doc_cleunik=$bonprep_cleunik;";
$result=_graal_requete_bd($sql_req);
$row = mysql_fetch_assoc($result);
$code_bondepreparation=$row['code'];
$chain_pdf=$row['document'];
_graal_libere_requete_bd($result);
header('Content-Type: application/pdf');
header('Content-Length: '.strlen($chain_pdf));
header('Content-disposition: inline; filename="'."bon_de_preparation_$code_bondepreparation.pdf".'"');
echo $chain_pdf;
*/

$pdf_referent="modeles_odt_pdf/2009-08-26-fiche_palette_001.pdf";
$xfdf_referen="modeles_odt_pdf/2009-08-26-fiche_palette_001.xfdf";
$output_01="mail/2009-08-26-fiche_palette_001-rempli_01.pdf";
$argument="pdftk $pdf_referent fill_form $xfdf_referen output $output_01 flatten";
pf_genere($argument);
$output_02="mail/2009-08-26-fiche_palette_001-rempli_02.pdf";
$argument="pdftk $pdf_referent fill_form $xfdf_referen output $output_02 flatten";
pf_genere($argument);
$output_final="mail/fiche_palette_001-rempli.pdf";
$argument="pdftk $output_01 $output_02 cat output $output_final";
pf_genere($argument);

function pf_genere($argument){
	exec($argument,$retour,$result);
	var_dump($result);
	var_dump($retour);
}

?>
