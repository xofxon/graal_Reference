<?php
include("_graal_header_xul.inc.php");
$vl_e_uti_cleunik =intval(fa_recup_session('vs_uti_cleunik','0'));
$vl_e_nomcomplet=fa_recup_session('vs_nomcomplet','tesquiconnard?');
$vs_envaa=fa_recup_session('vs_envaa','0');	//	Nombre d'utilisateurs
$vl_c_genre=fa_recup_param('genre','tousss');
$vl_e_art_cleunik=intval(fa_recup_param('vl_e_art_cleunik',-1));
switch ($vl_c_genre){
  case "tousss": $vl_c_id_fenetre="Fen_00777";$vl_c_id_article_recherche="Div_00206";$class_tabedition="ai07";break;  //  Tous les articles
  case "achats": $vl_c_id_fenetre="Fen_00778";$vl_c_id_article_recherche="Div_00208";$class_tabedition="ag02";break;  //  Articles d'achats
  case "ventes": $vl_c_id_fenetre="Fen_00779";$vl_c_id_article_recherche="Div_00209";$class_tabedition="ah19";break;  //  Articles de vente
  case "favori": $vl_c_id_fenetre="Fen_00777";$vl_c_id_article_recherche="Div_00207";$class_tabedition="ai07";break;  //  Favoris
  default: fa_redirige("acces_interdit");break; 
}
$vl_c_id_article_info_gene="Div_00211"; //  Informations générales
$vl_c_id_article_relations="Div_00218"; //  Tableau des relations entre articles
$vl_c_barre_presente_relations='ok';
$vl_c_id_article_achats="Div_00221"; //  Informations sur les achats
$vl_c_id_inc_articles_fournis="Div_00220"; //  Tableau des fournisseurs de l'article

$vl_c_id_article_criteres_entreprise="Div_00311"; //  Critères de l'article (vision de l'entreprise)
$vl_c_id_article_criteres_lesmiens="Div_00312"; //  Critères de l'article (ma vision)
$vl_c_id_article_criteres_lesautres="Div_00313"; //  Critères de l'article (la vision des autres)
$vl_c_id_article_criteres_tous="Div_00386"; //  Critères de l'article (la vision de tous)

$vl_c_id_article_ventes="Div_00318"; //  Onglet des ventes (tarif type, tarifs spéciaux)
$id_inc_ged="Div_00366"; //  Onglet de la GED
$vl_c_id_article_image="Div_00368"; //  Onglet des images
$id_inc_art_actions_selection="Div_00450";// Onglet de sélection des actions
$vl_c_id_article_nome_achats="Div_00543"; //  Onglet des nomenclatures d'achat
$vl_c_id_article_nome_ventes="Div_00544"; //  Onglet des nomenclatures de vente
$vl_c_id_article_divers="Div_00503"; //  Onglet des divers (intégré dans onglet informations générales)
$vl_tc_composants=array($vl_c_id_article_recherche,$vl_c_id_article_info_gene,$vl_c_id_article_info_stock,$vl_c_id_article_relations,$vl_c_id_article_achats,$vl_c_id_inc_articles_fournis,
$vl_c_id_article_criteres_entreprise,$vl_c_id_article_criteres_lesmiens,$vl_c_id_article_criteres_lesautres,$vl_c_id_article_criteres_tous,$vl_c_id_article_ventes,
$id_inc_ged,$vl_c_id_article_image,$id_inc_art_actions_selection,$vl_c_id_article_nome_achats,$vl_c_id_article_nome_ventes,$vl_c_id_article_divers);
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
$vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=1;
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
if ($vl_e_art_cleunik!=-1) {$vl_b_ajout=0;}
$vl_c_bbo_101=fa_recup_dico("bbo_101");
$vl_c_bbo_102=fa_recup_dico("bbo_102");
$vl_c_bbo_103=fa_recup_dico("bbo_103");
$vl_c_bbo_104=fa_recup_dico("bbo_104");
$vl_c_bbo_105=fa_recup_dico("bbo_105");
$vl_c_bbo_106=fa_recup_dico("bbo_106");
$vl_c_bbo_107=fa_recup_dico("bbo_107");
$vl_c_bbo_108=fa_recup_dico("bbo_108");
$vl_c_bbo_109=fa_recup_dico("bbo_109");
$vl_c_bbo_110=fa_recup_dico("bbo_110");
$vl_c_bbo_111=fa_recup_dico("bbo_111");
$vl_c_bbo_112=fa_recup_dico("bbo_112");
$vl_c_bbo_113=fa_recup_dico("bbo_113");
$vl_c_bbo_114=fa_recup_dico("bbo_114");
$vl_c_bbo_115=fa_recup_dico("bbo_115");
$vl_c_bbo_116=fa_recup_dico("bbo_116");
$vl_c_bbo_117=fa_recup_dico("bbo_117");
$vl_c_bbo_118=fa_recup_dico("bbo_118");
$vl_c_bbo_119=fa_recup_dico("bbo_119");
$vl_c_bbo_120=fa_recup_dico("bbo_120");
$vl_c_bbo_121=fa_recup_dico("bbo_121");
$vl_c_bbo_122=fa_recup_dico("bbo_122");
$vl_c_bbo_122="Tarifs";
$menu_partage="";
switch ($vl_c_genre){
  case "favori":     
    $vl_tb_droits_partage=_graal_requete_droits_fenetre("Fen_00643",$vl_e_uti_cleunik);
    if ($vl_tb_droits_partage[0]==true) {
      $menu_partage='<popupset><popup id="pop_favoris"><menuitem class="menuitem-iconic ak08" label="'.$vl_c_bbo_121.'" oncommand="pf_favoris_partager();" /></popup></popupset>';
    }
    break;
}
$vl_c_dico_00058=fa_recup_dico("dico_00058");
$vl_c_dico_00059=fa_recup_dico("dico_00059");
$vl_c_dico_00073=fa_recup_dico("dico_00073");
$vl_c_dico_00046=fa_recup_dico("dico_00046");
$vl_c_dico_00047=fa_recup_dico("dico_00047");
$vl_c_dico_00026=fa_recup_dico("dico_00026");
$tab_key=array();
$vl_k_bbo_101=fa_cree_raccourcis($vl_c_bbo_101,$tab_key);
$vl_k_bbo_120=fa_cree_raccourcis($vl_c_bbo_120,$tab_key);
$vl_k_bbo_111=fa_cree_raccourcis($vl_c_bbo_111,$tab_key);
$vl_k_bbo_108=fa_cree_raccourcis($vl_c_bbo_108,$tab_key);
$vl_k_bbo_102=fa_cree_raccourcis($vl_c_bbo_102,$tab_key);
$vl_k_bbo_103=fa_cree_raccourcis($vl_c_bbo_103,$tab_key);
$vl_k_bbo_104=fa_cree_raccourcis($vl_c_bbo_104,$tab_key);
$vl_k_bbo_105=fa_cree_raccourcis($vl_c_bbo_105,$tab_key);
$vl_k_bbo_106=fa_cree_raccourcis($vl_c_bbo_106,$tab_key);
$vl_k_bbo_107=fa_cree_raccourcis($vl_c_bbo_107,$tab_key);
$vl_k_bbo_109=fa_cree_raccourcis($vl_c_bbo_109,$tab_key);
$vl_k_bbo_110=fa_cree_raccourcis($vl_c_bbo_110,$tab_key);
$vl_c_bbo_133=fa_recup_dico("bbo_133");
$vl_k_nomcomplet=fa_cree_raccourcis($vl_e_nomcomplet,$tab_key);
$vl_k_dico_00058=fa_cree_raccourcis($vl_c_dico_00058,$tab_key);
$vl_k_dico_00059=fa_cree_raccourcis($vl_c_dico_00059,$tab_key);
$vl_k_dico_00073=fa_cree_raccourcis($vl_c_dico_00073,$tab_key);
$vl_k_bbo_112=fa_cree_raccourcis($vl_c_bbo_112,$tab_key);
$vl_k_bbo_114=fa_cree_raccourcis($vl_c_bbo_114,$tab_key);
$vl_k_bbo_116=fa_cree_raccourcis($vl_c_bbo_116,$tab_key);
$vl_k_bbo_118=fa_cree_raccourcis($vl_c_bbo_118,$tab_key);
$vl_k_bbo_113=fa_cree_raccourcis($vl_c_bbo_113,$tab_key);
$vl_k_bbo_115=fa_cree_raccourcis($vl_c_bbo_115,$tab_key);
$vl_k_bbo_117=fa_cree_raccourcis($vl_c_bbo_117,$tab_key);
$vl_k_bbo_119=fa_cree_raccourcis($vl_c_bbo_119,$tab_key);
$vl_k_bbo_133=fa_cree_raccourcis($vl_c_bbo_133,$tab_key);

$vl_c_type_article_recherche="1";
include("_graal_header_winxul.inc.php");
include("_graal_header_textfied.inc.php");
echo <<<END
<window context="graal_cp00" _graal_genre="$vl_c_genre" title="$vl_c_bbo_100" id="_win_fen_articles_01" onload="fa_aa(this);pf_aa_init()" onunload="pf_onunload();" $c_xmlns>
$vl_c_graal_cp00
$menu_partage
<broadcasterset>
  <broadcaster id="broadcaster_01"/>
  <broadcaster id="broadcaster_02"/>
</broadcasterset>
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_02.js.php");
include("js/_graal_articles_02.js.php");
include_once("js/_graal_07_ged.js.php");
if ($vl_e_art_cleunik==-1) {
  include("js/_graal_articles_selection_01.js.php");
  echo('<hbox id="bbo_articles_01" />');
  include("_graal_inc_articles_recherche_01.php");
  $vl_c_id_vbox_inc_article_01='arbre_articles_01';
  $vl_c_id_arbre_inc_article_01='arbre_des_articles';
  include("_graal_inc_articles_recherche_01_bis.php");
  echo ("<splitter/>");
}
echo <<<END
  <hbox flex="1">
  <tabbox id="tabbox_01" flex="1" orient="vertical" class="overflow_01">
    <tabs id="tab_infogene">
       <tab class="$class_tabedition" id="tab_edition" linkedpanel="tabpanel_edition" label="$vl_c_bbo_101" selected="true" accesskey="$vl_k_bbo_101"/>
       <tab class="am15" id="tab_tarifs" linkedpanel="tabpanel_tarifs"  label="$vl_c_bbo_122" accesskey="$vl_k_bbo_122"/>
       <tab class="al01" id="tab_criteres" linkedpanel="tabpanel_critere" label="$vl_c_bbo_108" accesskey="$vl_k_bbo_108"/>
       <tab class="ah03" linkedpanel="tabpanel_ged" id="tab_ged" label="$vl_c_bbo_109" accesskey="$vl_k_bbo_109"/>
       <tab class="ab17" linkedpanel="tabpanel_images" id="tab_images" label="$vl_c_bbo_110" accesskey="$vl_k_bbo_110"/>
       <tab class="am08" id="tab_relations" linkedpanel="tabpanel_relations"  label="$vl_c_bbo_106" accesskey="$vl_k_bbo_106"/>
			 <tab class="af08" id="tab_actions" linkedpanel="tabpanel_actions" label="$vl_c_bbo_111" accesskey="$vl_k_bbo_111"/>
       <tab class="ag02" id="tab_achats" linkedpanel="tabpanel_achats" label="$vl_c_bbo_102" accesskey="$vl_k_bbo_102"/>
       <tab class="ah19" id="tab_ventes" linkedpanel="tabpanel_ventes" label="$vl_c_bbo_103" accesskey="$vl_k_bbo_103"/>
    </tabs>
    <hbox id="tb_rappel_article" disabled="true">
    	<textbox id="tb_mnemotechnique_bis" disabled="true"/>	
    	<textbox id="tb_code_bis" disabled="true"/>
    	<textbox id="tb_description_bis" disabled="true" flex="1"/>
    </hbox>
    <tabpanels flex="1">
  		<tabpanel id="tabpanel_edition" flex="1">
END;
include("_graal_inc_articles_infogene_02.php");
echo <<<END
      </tabpanel>
			<tabpanel id="tabpanel_tarifs" flex="1">
END;
include("_graal_inc_articles_tarifs_02.php");
echo <<<END
      </tabpanel>
  		<tabpanel id="tabpanel_actions" flex="1">
  		<vbox flex="1">
END;
$bfp_cp03_hidden="true";
include("_graal_inc_art_actions_selection_01.php");
echo <<<END
        <tabbox id="tabbox_03" flex="1" orient="vertical" class="overflow_01">
          <tabs id="tabs_cial" value="1">
            <tab id="tab_cial_offcli" value="1" linkedpanel="tabpanel_cial_offcli" label="$vl_c_bbo_112" first-tab="true" selected="true" accesskey="$vl_k_bbo_112"/>
            <tab id="tab_cial_cdecli" value="2" linkedpanel="tabpanel_cial_cdecli" label="$vl_c_bbo_114" accesskey="$vl_k_bbo_114"/>
            <tab id="tab_cial_faccli" value="5" linkedpanel="tabpanel_cial_faccli" label="$vl_c_bbo_118" accesskey="$vl_k_bbo_118"/>
            <tab id="tab_cial_demfou" value="5" linkedpanel="tabpanel_cial_demfou" label="$vl_c_bbo_113" accesskey="$vl_k_bbo_113"/>
            <tab id="tab_cial_cdefou" value="6" linkedpanel="tabpanel_cial_cdefou" label="$vl_c_bbo_115" accesskey="$vl_k_bbo_115"/>
            <tab id="tab_cial_recfou" value="7" linkedpanel="tabpanel_cial_recfou" label="$vl_c_bbo_117" accesskey="$vl_k_bbo_117"/>
            <tab id="tab_cial_retfou" value="9" linkedpanel="tabpanel_cial_retfou" label="$vl_c_bbo_133" accesskey="$vl_k_bbo_133"/>
            <tab id="tab_cial_facfou" value="10" linkedpanel="tabpanel_cial_facfou" label="$vl_c_bbo_119" accesskey="$vl_k_bbo_119"/>
          </tabs>
          <tabpanels flex="1" id="tabpanels_cial">
          	<tabpanel id="tabpanel_cial_offcli" flex="1">
END;
include("_graal_inc_art_actions_offcli_01.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_cial_cdecli" flex="1">
END;
include("_graal_inc_art_actions_cdecli_01.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_cial_faccli" flex="1">
END;
include("_graal_inc_art_actions_faccli_01.php");
echo <<<END
            </tabpanel>
          	<tabpanel id="tabpanel_cial_demfou" flex="1">
END;
include("_graal_inc_art_actions_demfou_01.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_cial_cdefou" flex="1">
END;
include("_graal_inc_art_actions_cdefou_01.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_cial_recfou" flex="1">
END;
include("_graal_inc_art_actions_recfou_01.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_cial_retfou" flex="1">
END;
include("_graal_inc_art_actions_retfou_01.php");
echo <<<END
            </tabpanel>
            <tabpanel id="tabpanel_cial_facfou" flex="1">
END;
include("_graal_inc_art_actions_facfou_01.php");
echo <<<END
           </tabpanel>
          </tabpanels>
        </tabbox>
      </vbox>
      </tabpanel>
      <tabpanel id="tabpanel_critere" flex="1">
        <tabbox id="tabbox_02" flex="1" orient="vertical" class="overflow_01">
          <tabs>
            <tab class="ag17" id="tab_edition_critere_entreprise" linkedpanel="tabpanel_critere_entreprise" first-tab="true" label="$vl_c_dico_00058" selected="true" accesskey="$vl_k_dico_00058"/>
            <tab class="ak15" id="tab_edition_critere_lesmiens" linkedpanel="tabpanel_critere_lesmiens" label="$vl_e_nomcomplet" accesskey="$vl_k_nomcomplet"/>
END;
if ($vs_envaa!=1){
echo <<<END
            <tab class="ak19" linkedpanel="tabpanel_critere_lesautres" id="tab_edition_critere_lesautres" label="$vl_c_dico_00059" accesskey="$vl_k_dico_00059"/>
            <tab class="bd01" id="tab_edition_critere_tous" linkedpanel="tabpanel_critere_tous" label="$vl_c_dico_00073" accesskey="$vl_k_dico_00073"/>
END;
}
echo <<<END

          </tabs>
          <tabpanels flex="1">
          	<tabpanel id="tabpanel_critere_entreprise" flex="1">
END;
include("_graal_inc_articles_criteres_entreprise.php");
echo('</tabpanel>')  ;          
echo('<tabpanel id="tabpanel_critere_lesmiens" flex="1">');
include("_graal_inc_articles_criteres_lesmiens.php");
echo('</tabpanel>');
if ($vs_envaa!=1){
	echo('<tabpanel id="tabpanel_critere_lesautres" flex="1">');
	include("_graal_inc_articles_criteres_lesautres.php");
  echo('</tabpanel>');
  echo('<tabpanel id="tabpanel_critere_tous" flex="1">');
	include("_graal_inc_articles_criteres_tous.php");
  echo('</tabpanel>');
}
echo <<<END
          </tabpanels>
        </tabbox>
      </tabpanel>
    	<tabpanel id="tabpanel_achats" flex="1">
END;
include("_graal_inc_articles_achats_02.php");
echo <<<END
      </tabpanel>
      <tabpanel id="tabpanel_ventes" flex="1">
END;
include("_graal_inc_articles_ventes_02.php");
echo <<<END
      </tabpanel>
      <tabpanel id="tabpanel_relations" flex="1">
END;
include("_graal_inc_articles_relations_01.php");
echo <<<END
      </tabpanel>
      <tabpanel id="tabpanel_ged" flex="1">
END;
$vl_c_voir_doc="non";
include("_graal_inc_ged_01.php");
echo <<<END
      </tabpanel>
      <tabpanel id="tabpanel_images" flex="1">
END;
include("_graal_inc_ged_02.php");
echo <<<END
      </tabpanel>
    </tabpanels>
    
  </tabbox>
  <vbox id="boutons_standards">
END;
include("_graal_inc_boutons_01.php");
echo <<<END
  </vbox>  
  </hbox> 
 </window>
END;
?>
