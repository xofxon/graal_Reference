<?php
include("_graal_header_txt.inc.php");
$t_origines_ok=array();
$t_origines_ok[0]="_graal_fen_param_categories_compta_01";
fa_acces_script();
$vf_c_echo="";
$vf_c_action=fa_recup_param("vf_c_action","??????");
$vl_catcompta_cleunik=intval(fa_recup_param("vl_catcompta_cleunik",""));
$vl_code=fa_recup_param("vl_code","");
$vl_intitule=fa_recup_param("vl_intitule","");
$vl_compte_vente_port=intval(fa_recup_param("vl_compte_vente_port",""));
$vl_compte_vente_divers=intval(fa_recup_param("vl_compte_vente_divers",""));
$vl_compte_achat_port=intval(fa_recup_param("vl_compte_achat_port",""));
$vl_compte_achat_divers=intval(fa_recup_param("vl_compte_achat_divers",""));
$vl_taxes_vente_port=intval(fa_recup_param("vl_taxes_vente_port",""));
$vl_taxes_vente_divers=intval(fa_recup_param("vl_taxes_vente_divers",""));
$vl_taxes_achat_port=intval(fa_recup_param("vl_taxes_achat_port",""));
$vl_taxes_achat_divers=intval(fa_recup_param("vl_taxes_achat_divers",""));
switch (TRUE) {
  case $vf_c_action=="supprimer":
    $sql_req = "DELETE FROM _param_categories_compta WHERE catcompta_cleunik=$vl_catcompta_cleunik";
    $vf_c_echo=_graal_exec_requete($sql_req);
    if($vf_c_echo=='ok') {$vf_c_echo="ok";} else {$vf_c_echo=-1;}
    break;
  case $vf_c_action=="ajouter":
    $vl_catcompta_cleunik=_graal_requete_max("catcompta_cleunik","_param_categories_compta");
    $sql_req = "INSERT INTO _param_categories_compta set catcompta_cleunik=$vl_catcompta_cleunik,code='$vl_code',intitule='$vl_intitule',compte_vente_port=$vl_compte_vente_port,compte_vente_divers=$vl_compte_vente_divers,compte_achat_port=$vl_compte_achat_port,compte_achat_divers=$vl_compte_achat_divers,dateheurecreation=now(),taxes_vente_port=$vl_taxes_vente_port,taxes_vente_divers=$vl_taxes_vente_divers,taxes_achat_port=$vl_taxes_achat_port,taxes_achat_divers=$vl_taxes_achat_divers;";
    $vf_c_echo=_graal_exec_requete($sql_req);
    if($vf_c_echo=='ok') {$vf_c_echo="ok";} else {$vf_c_echo=-1;}
    break;
  case $vf_c_action=="modifier":
    $sql_req = "UPDATE _param_categories_compta set code='$vl_code',intitule='$vl_intitule',compte_vente_port=$vl_compte_vente_port,compte_vente_divers=$vl_compte_vente_divers,compte_achat_port=$vl_compte_achat_port,compte_achat_divers=$vl_compte_achat_divers,dateheuremodification=now(),taxes_vente_port=$vl_taxes_vente_port,taxes_vente_divers=$vl_taxes_vente_divers,taxes_achat_port=$vl_taxes_achat_port,taxes_achat_divers=$vl_taxes_achat_divers WHERE catcompta_cleunik=$vl_catcompta_cleunik";
    $vf_c_echo=_graal_exec_requete($sql_req);
    if($vf_c_echo=='ok') {$vf_c_echo="ok";} else {$vf_c_echo=-1;}
    break;
  case $vf_c_action=="??????":
    exit;
    break;
}
_graal_ferme_connexion();
echo $vf_c_echo;
?>
