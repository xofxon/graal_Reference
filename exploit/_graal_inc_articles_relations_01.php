<?php
_graal_requete_charge_varlib($vl_c_id_article_relations,$vl_e_uti_cleunik);
$vl_c_bbs_001=fa_recup_dico("bbs_001");
$vl_c_bbs_002=fa_recup_dico("bbs_002");
$vl_c_bbs_003=fa_recup_dico("bbs_003");
$vl_c_bbs_004=fa_recup_dico("bbs_004");
$vl_c_bbs_019=fa_recup_dico("bbs_019");
$vl_c_bbs_020=fa_recup_dico("bbs_020");
$vl_c_bbs_021=fa_recup_dico("bbs_021");
$vl_c_id_fen_relation="Fen_00232";
echo <<<END
<vbox id="bbs_art_relations_01" flex="3">
END;
if ($vl_c_barre_presente_relations=='ok'){
echo <<<END
      <toolbar grippyhidden="true">
  		  <toolbarbutton class="table-rafraichir" tooltiptext="$vl_c_bbs_019" oncommand="pf_affiche_donnees_relations();"/>
        <toolbarseparator />
        <hbox id="bloc_relations">
END;
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fen_relation,$vl_e_uti_cleunik);
if ($vl_tb_droits[0]!=0){
if ($vl_tb_droits[1]!=0){
echo <<<END
          <toolbarbutton class="aa01" observes="broadcaster_01" id="tb_relation_01" tooltiptext="$vl_c_bbs_020" oncommand="pf_ouvre('relation','nouveau');"/>
END;
}
echo <<<END
          <toolbarbutton class="aa01" observes="broadcaster_01" id="tb_relation_02" tooltiptext="$vl_c_bbs_021" oncommand="pf_ouvre('relation','ouvrir');" />
END;
}
echo <<<END
        </hbox>
        <toolbarseparator />
      </toolbar>
END;
}
echo <<<END
  <tree flex="1" id="arbre_relations" hidecolumnpicker="true" flags="" ref="*" querytype="xml" datasources="" onselect="pf_sel_arbre_relations();">
      <treecols>
        <treecol hidden="true" id="tc_art_cleunik_gauche" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
        <treecol hidden="true" id="tc_choix_cleunik_gauche" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
        <treecol hidden="true" id="tc_choix_cleunik_droite" ignoreincolumnpicker="true" /><splitter class="tree-splitter" resizeafter="grow"/>
        <treecol hidden="true" id="tc_art_cleunik_droite" ignoreincolumnpicker="true"/><splitter class="tree-splitter" resizeafter="grow"/>
        <treecol id="tc_qui_gauche_00" label="$vl_c_bbs_002"  sort="?qui_gauche_00"/><splitter class="tree-splitter" resizeafter="grow"/>
        <treecol id="tc_choix_01_gauche" label="$vl_c_bbs_003" sort="?choix_01_gauche"/><splitter class="tree-splitter" resizeafter="grow"/>
        <treecol id="tc_qui_droite" label="$vl_c_bbs_002" sort="?qui_droite"/><splitter class="tree-splitter" resizeafter="grow"/>
        <treecol id="tc_choix_01_droite" label="$vl_c_bbs_003" sort="?choix_01_droite"/><splitter class="tree-splitter" resizeafter="grow"/>
        <treecol id="tc_qui_gauche_01" label="$vl_c_bbs_002" sort="?qui_gauche_01"/><splitter class="tree-splitter" resizeafter="grow"/>
        <treecol id="tc_blocnotebrut" label="$vl_c_bbs_001" sort="?blocnotebrut"/><splitter class="tree-splitter" resizeafter="grow"/>
        <treecol hidden="true" id="tc_blocnoteriche" label="$vl_c_bbs_001" sort="?blocnoteriche"/><splitter class="tree-splitter" resizeafter="grow"/>
      </treecols>
      <template><query expr="*"/><action>
        <treechildren>
          <treeitem uri="?" seltype="single">
            <treerow>
              <treecell label="?art_cleunik_gauche"/>
              <treecell label="?choix_cleunik_gauche"/>
              <treecell label="?choix_cleunik_droite"/>
              <treecell label="?art_cleunik_droite"/>
              <treecell label="?qui_gauche_00"/>
              <treecell label="?choix_01_gauche"/>
              <treecell label="?qui_droite"/>
              <treecell label="?choix_01_droite"/>
              <treecell label="?qui_gauche_01"/>
              <treecell label="?blocnotebrut"/>
              <treecell label="?blocnoteriche"/>
            </treerow>
          </treeitem>
        </treechildren>
      </action></template>
    </tree>
  </vbox>
END;
?>
