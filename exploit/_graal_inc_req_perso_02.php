<?php
_graal_requete_charge_varlib($vl_c_id_inc_reqperso_02,$vl_e_uti_cleunik);
switch ($vl_c_id_inc_reqperso_02){
  case "Fen_00104":$vl_readonly_01="false";break;  // Construction des requêtes personnelles
  case "Fen_00105":$vl_readonly_01="true";break;  // Gestion de mes requêtes personnelles
  case "Fen_00562":$vl_readonly_01="true";break;  // Gestion des requêtes standard
  default : fa_redirige("acces_interdit");break;  // Erreur de programmation
}
$vl_c_bam_101=fa_recup_dico("bam_101");
$vl_c_bam_102=fa_recup_dico("bam_102");
$vl_c_bam_103=fa_recup_dico("bam_103");
$vl_c_bam_104=fa_recup_dico("bam_104");
$vl_c_bam_105=fa_recup_dico("bam_105");
$vl_c_bam_106=fa_recup_dico("bam_106");
$vl_c_bam_107=fa_recup_dico("bam_107");
$vl_c_bam_108=fa_recup_dico("bam_108");
$vl_c_bam_109=fa_recup_dico("bam_109");
$vl_c_bam_110=fa_recup_dico("bam_110");
$vl_c_bam_111=fa_recup_dico("bam_111");
$vl_c_bam_112=fa_recup_dico("bam_112");
$vl_c_bam_113=fa_recup_dico("bam_113");
$vl_c_bam_114=fa_recup_dico("bam_114");
$vl_c_dico_00020=fa_recup_dico("dico_00020");
$vl_c_dico_00021=fa_recup_dico("dico_00021");
$vl_c_dico_00022=fa_recup_dico("dico_00022");
$vl_c_dico_00023=fa_recup_dico("dico_00023");
$vl_c_dico_00024=fa_recup_dico("dico_00024");
$vl_c_dico_00025=fa_recup_dico("dico_00025");
$vl_c_dico_00026=fa_recup_dico("dico_00026");
$vl_c_dico_00062=fa_recup_dico("dico_00062");
$vl_c_dico_00068=fa_recup_dico("dico_00068");
$vl_c_dico_00070=fa_recup_dico("dico_00070");

$c_procli=($vl_e_acteur+$vl_e_procli);
$c_client=($vl_e_acteur+$vl_e_client);
$c_profou=($vl_e_acteur+$vl_e_profou);
$c_fourni=($vl_e_acteur+$vl_e_fourni);
$c_autrac=($vl_e_acteur+$vl_e_autrac);
$c_actind=($vl_e_acteur+$vl_e_actind);

$d_procli=($vl_e_interl+$vl_e_procli);
$d_client=($vl_e_interl+$vl_e_client);
$d_profou=($vl_e_interl+$vl_e_profou);
$d_fourni=($vl_e_interl+$vl_e_fourni);
$d_autrac=($vl_e_interl+$vl_e_autrac);
$d_actind=($vl_e_interl+$vl_e_actind);

$vl_x_dico_00020="Interlocuteurs des prospects clients";
$vl_x_dico_00021="Interlocuteurs des clients";
$vl_x_dico_00022="Interlocuteurs des prospects fournisseurs";
$vl_x_dico_00023="Interlocuteurs des fournisseurs";
$vl_x_dico_00024="Interlocuteurs des autres acteurs";
$vl_x_dico_00025="Interlocuteurs des acteurs indéterminés";

$c_gedged=$vl_e_gedged;
switch ($vl_c_id_inc_reqperso_02){
  case "Fen_00104":// Construction des requêtes personnelles
    $chaine01="";
    $chaine02="<button id='bt_manu_execute' label='$vl_c_bam_107' oncommand='pf_lance();'/><button id='bt_manu_sauvegarde' label='$vl_c_bam_108' oncommand='pf_sauve_requete();' />";
    $chaine03="<button id='bt_resultat_sauvegarde' label='$vl_c_bam_109' />";
    break;
  case "Fen_00105":// Gestion des requêtes personnelles
    $chaine01="<row ><label control='la_dateheurecreation' value='$vl_c_bam_104'/><label id='la_dateheurecreation' /></row><row ><label control='la_dateheuremodif' value='$vl_c_bam_105'/><label id='la_dateheuremodif' /></row>";
    $chaine02="";
    $chaine03="";
    break;
  case "Fen_00562":// Gestion des requêtes standard
    $chaine01="<row ><label control='la_dateheurecreation' value='$vl_c_bam_104'/><label id='la_dateheurecreation' /></row><row ><label control='la_dateheuremodif' value='$vl_c_bam_105'/><label id='la_dateheuremodif' /></row>";
    $chaine02="";
    $chaine03="";
    break;

}
echo <<<END
  <tabpanel id="tp_reqperso">
    <tabbox flex="1">
      <tabs id="tabpan_03">
        <tab id="tab_edition" linkedpanel="tabpanel_edition" first-tab="true" selected="true" label="$vl_c_bam_103" />
        <tab id="tab_resulta" linkedpanel="tabpanel_resulta" label="$vl_c_bam_106"/>
      </tabs>
      <tabpanels flex="1" style="border-bottom: 0px solid">
        <tabpanel id="tabpanel_edition">
          <vbox flex="1">
            <grid flex="1">
              <columns flex="1">
               <column/>
               <column flex="1"/>
              </columns>
                <rows>
                    <row>
                     <label flex= "1" control="la_titre" value="$vl_c_bam_101"/>
                     <textbox observes="broadcaster_01" flex= "1" id="tb_titre"  />
                    </row>
                    <row flex= "1">
                      <label flex= "1" control="la_descriptif_sommaire" value="$vl_c_bam_102"/>
                      <textbox observes="broadcaster_01" flex= "1" id="tb_descriptif_sommaire"   />
                    </row>
                    <row flex= "2">
                     <label control="la_teste_requete" value="$vl_c_bam_110"/>
                     <textbox observes="broadcaster_01" readonly="$vl_readonly_01" id="req_manu_edition"   multiline="true" style="font-family:courier new;font-size:1.2em;"/>
                    </row>
                    <row>
                     <label control="la_porte" value="$vl_c_bam_114"/>
                      <menulist sizetopopup="none" onfocus='setTimeout(fa_focus_gere_menulist, 0, this);' class="normal" flex="1" id="ml_portee" _graal_nombre="18" oncommand="pf_change_ml_portee();" observes="broadcaster_01">
                        <menupopup>
                          <menuitem class="menuitem-iconic ai17" label="$vl_c_dico_00020" value="$c_procli" />
                          <menuitem class="menuitem-iconic ai14" label="$vl_c_dico_00021" value="$c_client" />
                          <menuitem class="menuitem-iconic ah10" label="$vl_c_dico_00022" value="$c_profou" />
                          <menuitem class="menuitem-iconic ah06" label="$vl_c_dico_00023" value="$c_fourni" />
                          <menuitem class="menuitem-iconic ai16" label="$vl_c_dico_00024" value="$c_autrac" />
                          <menuitem class="menuitem-iconic aj08" label="$vl_c_dico_00025" value="$c_actind" />

                          <menuitem class="menuitem-iconic ba02" label="$vl_x_dico_00020" value="$d_procli" />
                          <menuitem class="menuitem-iconic ba01" label="$vl_x_dico_00021" value="$d_client" />
                          <menuitem class="menuitem-iconic ba03" label="$vl_x_dico_00022" value="$d_profou" />
                          <menuitem class="menuitem-iconic ba04" label="$vl_x_dico_00023" value="$d_fourni" />
                          <menuitem class="menuitem-iconic ba05" label="$vl_x_dico_00024" value="$d_autrac" />
                          <menuitem class="menuitem-iconic ba06" label="$vl_x_dico_00025" value="$d_actind" />

                          <menuitem class="menuitem-iconic ai15" label="$vl_c_dico_00026" value="$vl_e_acteur" />
                          <menuitem class="menuitem-iconic ai18" label="$vl_x_dico_00026" value="$vl_e_interl" />
                          <menuitem class="menuitem-iconic ai07" label="$vl_c_dico_00062" value="$vl_e_articl" />
							<menuitem class="menuitem-iconic ah03" label="$vl_c_dico_00068" value="$vl_e_gedged" />
							<menuitem class="menuitem-iconic af08" label="$vl_c_dico_00070" value="$vl_e_action" />
							<menuitem class="menuitem-iconic ag18" label="Courriels" value="$vl_e_refweb" />
                        </menupopup>
                      </menulist>
                  </row>
$chaine01
                </rows>
            </grid>
                    <groupbox>
    <caption><label value="$vl_c_bam_111" /></caption>
    <radiogroup id='rdg_actif'>
      <hbox>
        <radio observes="broadcaster_01" id='ra_choix_actif_oui' label="$vl_c_bam_112" value='1' />
        <spacer flex="1"/>
        <radio observes="broadcaster_01" id='ra_choix_actif_non' label="$vl_c_bam_113" value='2'/>
       </hbox>
     </radiogroup>
  </groupbox>
            <hbox>
$chaine02
            </hbox>
          </vbox>
        </tabpanel>
        <tabpanel id="tabpanel_resulta">
          <vbox flex="1">
            <iframe onload="event.stopPropagation();" id="req_manu_resultat" flex="1" src=""/>
$chaine03
          </vbox>
        </tabpanel>
      </tabpanels>
    </tabbox>
  </tabpanel>
END;
?>
