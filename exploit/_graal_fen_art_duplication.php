<?php
include("_graal_header_xul.inc.php");
$vl_e_uti_cleunik =intval(fa_recup_session("vs_uti_cleunik","0"));
$vl_e_art_cleunik=intval(fa_recup_param("vl_art_cleunik","-1"));
$vl_c_id_fenetre="Fen_00657";
$vl_tb_droits=_graal_requete_droits_fenetre($vl_c_id_fenetre,$vl_e_uti_cleunik);if ($vl_tb_droits[0]==false) {fa_redirige("acces_interdit");}
_graal_requete_charge_varlib($vl_c_id_fenetre,$vl_e_uti_cleunik);
$vl_c_graal_cp00=fa_cree_graal_cp00($vl_c_id_fenetre);
$vl_c_bpa_100=fa_recup_dico("bpa_100");
$vl_c_bpa_101=fa_recup_dico("bpa_101");
$vl_c_bpa_102=fa_recup_dico("bpa_102");
$vl_c_bpa_103=fa_recup_dico("bpa_103");
$vl_c_bpa_104=fa_recup_dico("bpa_104");
$vl_c_bpa_105=fa_recup_dico("bpa_105");
$vl_c_bpa_106=fa_recup_dico("bpa_106");
$vl_c_bpa_107=fa_recup_dico("bpa_107");
$vl_c_bpa_108=fa_recup_dico("bpa_108");
$vl_c_bpa_109=fa_recup_dico("bpa_109");
$vl_c_bpa_110=fa_recup_dico("bpa_110");
$vl_c_dico_00013=fa_recup_dico("dico_00013");
$vl_c_dico_00014=fa_recup_dico("dico_00014");
$vl_c_dico_00149=fa_recup_dico('dico_00149');
$tab_article=_graal_requete_article($vl_e_art_cleunik);
$vl_b_ajout=$vl_tb_droits[1];$vl_b_modif=$vl_tb_droits[2];$vl_b_suppr=$vl_tb_droits[3];$vl_b_impri=$vl_tb_droits[4];$vl_b_detai=$vl_tb_droits[5];
$vl_c_dico_00005=fa_recup_dico('dico_00005');
$vl_c_dico_00007=fa_recup_dico('dico_00007');
$vl_c_bout="";
$vl_c_bout.='<button tooltiptext ="'.$vl_c_dico_00005.' Ctrl+Shift+F5" keycode="k-enregistrer" width="40" flex="1" id="bt_enregistrer" label="'.$vl_c_dico_00005.'" crop="end" dir="normal" oncommand="pf_validation(\'enregistrer\')" />';
$vl_c_bout.='<button width="40" flex="1" id="bt_sortir" label="'.$vl_c_dico_00007.'" crop="end" dir="normal" oncommand="pf_etat_fen(\'sortir\')" />';
$ks_01="";
$ks_01.='<keyset id="_graal_ks_01">';
$ks_01.='<key id="k-enregistrer" modifiers="control shift" keycode="VK_F5" oncommand="if(fa_est_grise(\'bt_enregistrer\')==true){return};pf_validation(\'enregistrer\');"/>';
$ks_01.='<key id="k-sortir" modifiers="alt" keycode="VK_F4" oncommand="if(fa_est_grise(\'bt_sortir\')==true){return};pf_etat_fen(\'sortir\');"/>';
$ks_01.='</keyset>';
include("_graal_header_winxul.inc.php"); 
echo <<<END
<window context="graal_cp00" title="$vl_c_bpa_100" id="_win_fen_art_duplication" onload="fa_aa(this);pf_aa_init();" $c_xmlns>
$vl_c_graal_cp00
$ks_01
END;
include("_graal_visites.inc.php");
include_once("js/_graal_01.js.php");
include("js/_graal_art_duplication.js.php");
echo <<<END
  <groupbox>
    <caption><label value="$vl_c_bpa_108"/></caption>
    <label value="$vl_c_bpa_101"/>
    <textbox id="tb_code_origine" value="$tab_article[0]" readonly="true" />
    <label value="$vl_c_bpa_104"/>
    <textbox id="tb_mnemotechnique_origine" value="$tab_article[1]" readonly="true" />
    <label value="$vl_c_bpa_102"/>
    <textbox id="tb_description_origine" value="$tab_article[2]" readonly="true" />
  </groupbox>
  <groupbox>
    <caption><label value="$vl_c_bpa_109"/></caption>
    <label value="$vl_c_bpa_103"/>
    <textbox id="tb_code_destination" value="$vl_c_bpa_107$tab_article[0]" />
    <label value="$vl_c_bpa_106"/>
    <textbox id="tb_mnemotechnique_destination" value="$vl_c_bpa_107$tab_article[1]" />
    <label value="$vl_c_bpa_105"/>
    <textbox id="tb_description_destination" value="$vl_c_bpa_107$tab_article[2]"/>
  </groupbox>
  <groupbox>
    <caption><label value="$vl_c_bpa_110" /></caption>
    <radiogroup id='rdg_duplik_ged' flex="1" value="2">
      <hbox>
        <radio id='ra_duplik_ged_oui' label="$vl_c_dico_00013" value='1' />
        <spacer flex="1"/>
        <radio id='ra_duplik_ged_non' label="$vl_c_dico_00014" value='2' selected="true"/>
       </hbox>
     </radiogroup>
    </groupbox>

  <hbox flex="1" id="boutons_standards" >
  $vl_c_bout
  <button id="bt_info_fen" class="ab19" label="$vl_c_dico_00149"  crop="end" dir="normal" oncommand="fa_infos_fenetre('$vl_c_win_id')" />
  </hbox>
</window>
END;
?>
